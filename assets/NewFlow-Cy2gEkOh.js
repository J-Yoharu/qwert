import { _ as ye } from "./Form.vue_vue_type_script_setup_true_lang-CZs49AvZ.js";
import { _ as Et, r as zt } from "./Init.vue_vue_type_script_setup_true_lang-BdDsMihd.js";
import { L as Ut, _ as qt } from "./Loading-DlsCYH3q.js";
import "./VContainer-CKFoGwtE.js";
import { V as Be } from "./VForm-C_P48-o0.js";
import "./VList-MKxnMQsT.js";
import { V as A, a as F } from "./VRow-Dex7Pfo1.js";
import { V as K } from "./VSheet-DiGYqssP.js";
import "./VSlideGroup-n9Q6nBr0.js";
import { V as Nt } from "./VTextField-BZDLI70u.js";
import "./VTooltip-KBEgGkUt.js";
import "./VWindowItem-D40mKObc.js";
import { _ as Ge, V as He, c as Je, f as Ke, a as Qe, r as Ue, b as We, d as Xe, e as Ze } from "./Welcome-B7kPz7A9.js";
import { d as Qt } from "./default-values-Cei7-cAt.js";
import "./filter-B7hWuaSj.js";
import { X as $e, ak as $t, aF as At, b7 as Bt, c as C, N as Ce, an as Ct, Y as D, b8 as Dt, aW as E, aa as Ft, i as G, a8 as I, V as Ie, b6 as It, a3 as J, ab as L, W as Le, b3 as Lt, am as Mt, o as N, a1 as O, ah as Ot, ac as P, b5 as Pe, b4 as Pt, b as Rt, f as Se, aY as St, a_ as Te, Q as Tt, F as U, a6 as V, as as Ve, aZ as Vt, w as W, a4 as Y, aH as Ye, aX as Z, r as _, aT as _e, S as _t, b0 as ae, t as at, aS as bt, aN as ct, a2 as d, aw as dt, K as et, aP as ft, a0 as g, aR as gt, B as ht, ae as ie, aL as it, b1 as je, b2 as jt, p as ke, D as kt, a$ as le, aJ as lt, aO as mt, a7 as ne, aI as nt, h as o, P as ot, aQ as pt, T as re, aM as rt, s as se, aK as st, z as tt, y as ut, af as v, u as vt, g as we, aV as wt, L as xe, ay as xt, aU as yt, a5 as z } from "./index-_dW35LJ9.js";
import "./ssrBoot-CQs2aLE0.js";
import { c as Ht } from "./string-D3I3Kuho.js";
import { f as Gt } from "./totem.repository-B6q_Fyut.js";
import "./validator-D0QUwTbt.js";
const Wt={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Jt(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return o("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[u])}function ge(e){const[u,t]=e.split("@");return Array.from({length:t}).map(()=>oe(u))}function oe(e){let u=[];if(!e)return u;const t=Wt[e];if(e!==t){if(e.includes(","))return he(e);if(e.includes("@"))return ge(e);t.includes(",")?u=he(t):t.includes("@")?u=ge(t):t&&u.push(oe(t))}return[Jt(e,u)]}function he(e){return e.replace(/\s/g,"").split(",").map(oe)}const Xt=ke({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Ye(),...et(),...xe()},"VSkeletonLoader"),Zt=we()({name:"VSkeletonLoader",props:Xt(),setup(e,u){let{slots:t}=u;const{backgroundColorClasses:n,backgroundColorStyles:r}=tt(at(e,"color")),{dimensionStyles:a}=nt(e),{elevationClasses:c}=ot(e),{themeClasses:s}=Ce(e),{t:l}=lt(),i=C(()=>oe(st(e.type).join(",")));return Se(()=>{var m;const f=!t.default||e.loading;return o("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},s.value,n.value,c.value],style:[r.value,f?a.value:{}],"aria-busy":e.boilerplate?void 0:f,"aria-live":e.boilerplate?void 0:"polite","aria-label":e.boilerplate?void 0:l(e.loadingText),role:e.boilerplate?void 0:"alert"},[f?i.value:(m=t.default)==null?void 0:m.call(t)])}),{}}});function Kt(e){const u=se(e);let t=-1;function n(){clearInterval(t)}function r(){n(),$e(()=>u.value=e)}function a(c){const s=c?getComputedStyle(c):{transitionDuration:.2},l=parseFloat(s.transitionDuration)*1e3||200;if(n(),u.value<=0)return;const i=performance.now();t=window.setInterval(()=>{const f=performance.now()-i+l;u.value=Math.max(e-f,0),u.value<=0&&n()},l)}return wt(n),{clear:n,time:u,start:a,reset:r}}const Yt=ke({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...it({location:"bottom"}),...rt(),...ut(),...ct(),...xe(),...dt(mt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),ea=we()({name:"VSnackbar",props:Yt(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:t}=u;const n=vt(e,"modelValue"),{locationStyles:r}=ft(e),{positionClasses:a}=pt(e),{scopeId:c}=_t(),{themeClasses:s}=Ce(e),{colorClasses:l,colorStyles:i,variantClasses:f}=gt(e),{roundedClasses:m}=ht(e),h=Kt(Number(e.timeout)),T=_(),$=_(),j=se(!1);W(n,w),W(()=>e.timeout,w),N(()=>{n.value&&w()});let M=-1;function w(){h.reset(),window.clearTimeout(M);const b=Number(e.timeout);if(!n.value||b===-1)return;const R=bt($.value);h.start(R),M=window.setTimeout(()=>{n.value=!1},b)}function S(){h.reset(),window.clearTimeout(M)}function x(){j.value=!0,S()}function k(){j.value=!1,w()}return Se(()=>{const b=_e.filterProps(e),R=!!(t.default||t.text||e.text);return o(_e,G({ref:T,class:["v-snackbar",{"v-snackbar--active":n.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},a.value,e.class],style:e.style},b,{modelValue:n.value,"onUpdate:modelValue":H=>n.value=H,contentProps:G({class:["v-snackbar__wrapper",s.value,l.value,m.value,f.value],style:[r.value,i.value],onPointerenter:x,onPointerleave:k},b.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},c),{default:()=>{var H,Q;return[yt(!1,"v-snackbar"),e.timer&&!j.value&&o("div",{key:"timer",class:"v-snackbar__timer"},[o(Ve,{ref:$,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":h.time.value},null)]),R&&o("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((H=t.text)==null?void 0:H.call(t))??e.text,(Q=t.default)==null?void 0:Q.call(t)]),t.actions&&o(kt,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[o("div",{class:"v-snackbar__actions"},[t.actions()])]})]},activator:t.activator})}),xt({},T)}}),ta=v("h2",null,"Agora confirme que todos os seus contatos estão corretos.",-1),aa=v("p",null," Estas informações serão utilizadas caso seja necessário o hospital entrar em contato com você. ",-1),na=D({__name:"ContactInfo",props:{data:{}},setup(e){const u=_([{component:"VTextField",value:"fix_phone",label:"DDD + Telefone fixo",required:!0,cols:{cols:12,md:3}},{component:"VTextField",value:"cellphone",label:"DDD + Celular",required:!0,cols:{cols:12,md:3}},{component:"VTextField",value:"email",label:"E-mail",required:!0,cols:{cols:12,md:6}},{component:"VAutocomplete",value:"adress_type",label:"Tipo de endereço",required:!0,cols:{cols:12,md:3},props:{items:["Residencial","Comercial","Outro"]}},{component:"VTextField",value:"cep",label:"CEP",required:!0,cols:{cols:12,md:2}},{component:"VTextField",value:"aditional_adress",label:"Logradouro",required:!0,cols:{cols:12,md:5}},{component:"VTextField",value:"number",label:"Número",required:!0,cols:{cols:12,md:2}},{component:"VTextField",value:"complement",label:"Complemento",required:!0,cols:{cols:12,md:3}},{component:"VAutocomplete",value:"uf",label:"UF",required:!0,cols:{cols:12,md:3},props:{items:["SP","RJ","MG","PR","RS"]}},{component:"VAutocomplete",value:"city",label:"Cidade",required:!0,cols:{cols:12,md:6},props:{items:["São Paulo","Rio de Janeiro","Belo Horizonte","Curitiba","Porto Alegre"]}}]),t=_({fix_phone:"11 1234-5678",cellphone:"11 98765-4321",email:"paciente@test.com",adress_type:"Residencial",cep:"12345-678",aditional_adress:"Rua dos Bobos",number:"0",complement:"Apto 123",uf:"SP",city:"São Paulo"});return(n,r)=>(g(),V("div",null,[ta,aa,o(ye,{class:"mt-5",form:u.value,modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=a=>t.value=a)},null,8,["form","modelValue"]),o(A,{justify:"center"},{default:d(()=>[o(F,{cols:"5"},{default:d(()=>[o(I,{block:"",rounded:"lg",color:"primary",onClick:r[1]||(r[1]=a=>n.$emit("next"))},{default:d(()=>[L("Continuar")]),_:1})]),_:1})]),_:1})]))}}),oa=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"})),la=v("p",null,"É muito importante que estas informações estejam corretas.",-1),sa=v("p",null," Elas serão utilizadas para sua identificação em todos os processos dentro do hospital. ",-1),ia=D({__name:"PatientInfo",props:{data:{}},emits:["to"],setup(e,{emit:u}){var l,i;const t=u,n=e,r=_(),a=_({id:(l=n.data.patient)==null?void 0:l.id,first_name:((i=n.data.patient)==null?void 0:i.first_name)+" da Silva Santos",sex:"Masculino",civil_state:"Solteiro",nacionality:"Brasileiro",religion:"Católico",gender:"Masculino"}),c=_([{component:"VTextField",value:"id",label:"CPF",required:!0,cols:{cols:12,md:4},props:{disabled:!0}},{component:"VTextField",value:"first_name",label:"Nome completo",required:!0,cols:{cols:12,md:4}},{component:"VTextField",value:"social_name",label:"Nome socia",cols:{cols:12,md:4}},{component:"VAutocomplete",value:"sex",label:"Sexo",required:!0,cols:{cols:12,md:4},props:{items:["Masculino","Feminino"]}},{component:"VAutocomplete",value:"gender",label:"Gênero",cols:{cols:12,md:4},props:{items:["Masculino","Feminino","Lésbica","Bissexual","Transexual","Travesti","Outro"]}},{component:"VTextField",value:"rg",label:"RG",required:!0,cols:{cols:12,md:4}},{component:"VAutocomplete",value:"civil_state",label:"Estado civil",required:!0,cols:{cols:12,md:4},props:{items:["Solteiro","Casado","Divorciado","Viúvo"]}},{component:"VAutocomplete",value:"nacionality",label:"Nacionalidade",required:!0,cols:{cols:12,md:4},props:{items:["Brasileiro","Americano","Alemão","Francês","Italiano","Japonês","Chinês","Coreano","Outro"]}},{component:"VAutocomplete",value:"religion",label:"Religião",required:!0,cols:{cols:12,md:4},props:{items:["Católico","Evangélico","Espírita","Ateu","Agnóstico","Outro"]}}]);function s(){r.value.validate()&&t("to","ContactInfo")}return(f,m)=>{var h;return g(),V("div",null,[v("h2",null,[v("b",null,P((h=f.data.patient)==null?void 0:h.first_name),1),L(", revise suas informações pessoais.")]),la,sa,o(Be,{ref_key:"formElement",ref:r,onSubmit:Ct(s,["prevent"])},{default:d(()=>[o(ye,{class:"mt-5",modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=T=>a.value=T),form:c.value},null,8,["modelValue","form"]),o(A,{justify:"center"},{default:d(()=>[o(F,{cols:"5"},{default:d(()=>[o(I,{type:"submit",block:"",rounded:"lg",color:"primary"},{default:d(()=>[L("Continuar")]),_:1})]),_:1})]),_:1})]),_:1},512)])}}}),ra=Object.freeze(Object.defineProperty({__proto__:null,default:ia},Symbol.toStringTag,{value:"Module"}));function ua(e){return new Promise((u,t)=>{setTimeout(()=>{if(console.log(e),e.patient_id=="44444444444")return t("Não foi possível gerar a sua senha");u({data:{value:"C219",site:"Barra da Tijuca"}})},2e3)})}const ca=e=>(St("data-v-80568fcc"),e=e(),Vt(),e),da=ca(()=>v("h1",{class:"text-center"}," Escolha seu tipo de prioridade: ",-1)),ma={class:"mr-2"},va={class:"font-weight-bold"},fa=D({__name:"AttendanceType",props:{totem:{},data:{}},emits:["alert","next","cancel","loading","update:data"],setup(e,{emit:u}){const t=e,n=u,r=C({get:()=>t.data,set:c=>n("update:data",c)});async function a(c){var l;const s={queue_id:c.integration_id,patient_id:(l=r.value.patient)==null?void 0:l.id};n("loading",{text:"Gerando senha",async callback(i){ua(s).then(f=>{r.value.ticket=f.data,i.value=!1,n("next")}).catch(f=>{i.value=!1,n("alert",{title:f,text:"Fale com a recepção para prosseguir com o seu atendimento",action:{type:"confirm",label:"Ok, entendi",callback(){n("cancel")}}})})}})}return(c,s)=>(g(),V("div",null,[o(A,null,{default:d(()=>[o(F,{cols:"12"},{default:d(()=>[da]),_:1}),(g(!0),V(U,null,ne(r.value.queue.attendance_types,(l,i)=>(g(),O(F,{cols:"12",md:"4",key:i},{default:d(()=>[E((g(),O(K,{onClick:f=>a(l),color:"transparent",style:{cursor:"pointer","white-space":"normal"},border:"sm",rounded:"",class:"pa-6 d-flex align-center",link:"",height:c.$vuetify.display.mdAndUp?"300":"auto"},{default:d(()=>[v("div",null,[v("div",ma,[o(J,{src:l.data.icon,width:"64",height:"64"},null,8,["src"])]),v("h2",va,P(l.data.name),1),v("p",null,P(l.data.description),1)])]),_:2},1032,["onClick","height"])),[[Z]])]),_:2},1024))),128))]),_:1})]))}}),pa=ie(fa,[["__scopeId","data-v-80568fcc"]]),_a=Object.freeze(Object.defineProperty({__proto__:null,default:pa},Symbol.toStringTag,{value:"Module"})),ga={key:0,class:"font-weight-bold text-secondary text-h4"},ha=D({__name:"Timer",props:{time:{default:15},hideNumber:{type:Boolean,default:!1},startManual:{type:Boolean,default:!1}},emits:["end"],setup(e,{expose:u,emit:t}){const n=e,r=t;u({start:f});const a=_(n.time),c=_(),s=_();W(n,(m,h)=>{m.time<h.time||(a.value=n.time,l(),f())});function l(){clearInterval(c.value),clearTimeout(s.value)}const i=C(()=>a.value*100/n.time);function f(){c.value=setInterval(()=>{a.value--},1e3),s.value=setTimeout(()=>{clearInterval(c.value),r("end")},n.time*1e3)}return N(()=>{n.startManual||f()}),(m,h)=>(g(),O(Ve,{class:"progress",height:"6",modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=T=>i.value=T),color:"primary"},{default:d(()=>[m.hideNumber?z("",!0):(g(),V("span",ga,P(a.value),1))]),_:1},8,["modelValue"]))}}),ue=ie(ha,[["__scopeId","data-v-4807d716"]]),Me="data:image/svg+xml,%3csvg%20width='113'%20height='112'%20viewBox='0%200%20113%20112'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M103.167%2051.7067V56C103.161%2066.0633%2099.9025%2075.8552%2093.8771%2083.9152C87.8516%2091.9752%2079.3822%2097.8716%2069.7318%20100.725C60.0815%20103.578%2049.7674%20103.236%2040.3277%2099.7481C30.888%2096.2606%2022.8286%2089.8151%2017.3513%2081.373C11.8741%2072.9308%209.27252%2062.9443%209.93465%2052.9028C10.5968%2042.8613%2014.4871%2033.3029%2021.0255%2025.653C27.5638%2018.0032%2036.3998%2012.6718%2046.2157%2010.454C56.0316%208.23626%2066.3014%209.25092%2075.4935%2013.3467'%20stroke='%2304B300'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M103.167%2018.6665L56.5%2065.3798L42.5%2051.3798'%20stroke='%2304B300'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ba={key:0},ya={key:1,class:"fill-height d-flex align-center justify-center flex-column"},ka=["src"],xa=v("h1",{class:"text-success"},"Senha gerada com sucesso! :)",-1),wa=v("p",null,"Retire sua senha e aguarde ser chamado pelo painel da recepção.",-1),Ca={class:"w-100"},Sa=["src"],Va=D({__name:"PasswordSuccess",props:{data:{}},emits:["alert","next","cancel","loading"],setup(e,{emit:u}){const t=e,n=C(()=>{const i=new URLSearchParams(t.data.ticket);return window.location.origin+`qwert/#/senha?${i.toString()}`}),r=u,a=_(null),c=_(!1),s=C(()=>"api"in window);function l(){r("loading",{text:"Aguarde só mais um instante",callback(i){window.api.print(JSON.parse(JSON.stringify(t.data.ticket))).then(()=>{var f;c.value=!1,i.value=!1,(f=a.value)==null||f.start()}).catch(f=>{var m;r("alert",{title:"Ops, Não foi possível imprimir a senha! :(",text:`Por favor, anote o número abaixo <br/> <h1> ${(m=t.data.ticket)==null?void 0:m.value} </h1> Já acionamos a equipe responsavel para cuidar disso`,action:{type:"confirm",label:"Já anotei a minha senha",callback(){r("cancel"),c.value=!1,i.value=!1}}})})}})}return re(()=>{if(s.value)return l()}),N(async()=>{var i;await $e(),s.value||(c.value=!1,(i=a.value)==null||i.start())}),(i,f)=>c.value?(g(),V("div",ba)):(g(),V("div",ya,[v("div",null,[v("img",{src:Y(Me)},null,8,ka)]),xa,wa,v("div",Ca,[o(ue,{"hide-number":"","start-manual":"",time:15,ref_key:"timer",ref:a,onEnd:f[0]||(f[0]=m=>i.$emit("cancel")),class:"mt-4"},null,512)]),s.value?z("",!0):(g(),V("iframe",{key:0,src:n.value,frameborder:"0",class:"rounded-xl border mt-6",height:"200"},null,8,Sa))]))}}),$a=Object.freeze(Object.defineProperty({__proto__:null,default:Va},Symbol.toStringTag,{value:"Module"})),Ta=v("h1",null,"O que você deseja fazer hoje?",-1),ja={class:"mr-2"},La={class:"font-weight-medium"},Pa=D({__name:"Queues",props:{totem:{},data:{}},emits:["alert","next","cancel","update:data"],setup(e,{emit:u}){const t=u,n=e,r=C({get:()=>n.data,set:s=>t("update:data",s)});function a(s){const l=new Date().getDay(),i=s.attendance_hours.find(f=>f.weekday_iso==l);if(i){if(!c(i==null?void 0:i.start_time,i==null?void 0:i.end_time))return t("alert",{title:"Ops, infelizmente já passamos do horário de atendimento! :(",text:`O horário de atendimento é das ${i.start_time} às ${i.end_time} <br/> ${s.off_hours_message??""}`,action:{type:"confirm",label:"Ok, entendi",callback(){t("cancel")}}});r.value.queue=s,t("next")}}function c(s,l){const i=new Date,f=new Date,m=new Date,[h,T]=s.split(":"),[$,j]=l.split(":");return f.setHours(parseInt(h),parseInt(T)),m.setHours(parseInt($),parseInt(j)),i>=f&&i<=m}return(s,l)=>(g(),V("div",null,[o(A,null,{default:d(()=>[o(F,{cols:"12",class:"text-center"},{default:d(()=>[Ta]),_:1}),o(A,{justify:"center"},{default:d(()=>[o(F,{cols:"10"},{default:d(()=>[o(A,{justify:"center"},{default:d(()=>[(g(!0),V(U,null,ne(s.totem.queues,(i,f)=>(g(),O(F,{cols:"12",md:"auto",key:f,class:"d-flex justify-center"},{default:d(()=>[E((g(),O(K,{color:"transparent",onClick:m=>a(i),style:{cursor:"pointer","white-space":"normal"},border:"sm",rounded:"",class:"d-flex pa-6",link:"","min-height":"80",width:"342",click:"checkQueue(queue)"},{default:d(()=>{var m,h;return[v("div",ja,[o(J,{src:(m=i.data)==null?void 0:m.icon_src,width:"32",height:"32"},null,8,["src"])]),v("p",La,P((h=i.data)==null?void 0:h.name),1)]}),_:2},1032,["onClick"])),[[Z]])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]))}}),Ia=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"})),Ba={class:"fill-height d-flex justify-center align-center"},Ma=v("h1",{class:"text-success text-center"}," Você realizou o check-in rápido! :) ",-1),Da=v("p",{class:"text-center"}," Com esse benefício você não precisa mais enfrentar filas, basta aguardar ser chamado por seu médico pelo painel. ",-1),Fa=D({__name:"CheckinSuccess",emits:["cancel"],setup(e){return(u,t)=>(g(),V("div",Ba,[v("div",null,[o(J,{height:"112",src:Y(Me),class:"mb-4"},null,8,["src"]),Ma,Da,o(ue,{"hide-number":"",timer:20,class:"mt-4",onEnd:t[0]||(t[0]=n=>u.$emit("cancel"))})])]))}}),Oa=Object.freeze(Object.defineProperty({__proto__:null,default:Fa},Symbol.toStringTag,{value:"Module"})),Ra={class:"d-flex flex-column flex-grow-1"},Aa={class:"text-center"},Ea={class:"text-primary"},za={class:"d-flex flex-column flex-grow-1",style:{"flex-grow":"1",background:"#4b4b4b"}},Na={style:{width:"70%"},class:"d-flex flex-column justify-center align-center flex-grow-1 mx-auto position-relative"},qa=["src"],Ua={key:1,class:"avatar-capture"},Ha={class:"flex-grow-0"},Qa={class:"d-flex"},te=3,be=3,Ga=D({__name:"FaceRecognition",props:{data:{}},emits:["alert","next","to"],setup(e,{emit:u}){const t=u,n=e,r=_(null),a=_(!1),c=_(!1),s=_(!1),l=_(null),i=_(0),f=_(be),m=_(!1),h=C(()=>i.value>=te?"Limite de tentativas excedido":i.value>0?"Tentar novamente":!a.value&&!l.value?"Iniciar verificação":"Tirar outra foto");function T(){j(),l.value=null}function $(){const x=setInterval(()=>{if(f.value===0){w(),f.value=be,clearInterval(x);return}f.value--},1e3)}const j=async(x=!0)=>{try{const k=await navigator.mediaDevices.getUserMedia({video:!0});r.value&&(r.value.srcObject=k,x&&(a.value=!0,$()))}catch(k){t("alert",{title:"Erro ao acessar a câmera",text:k,action:{type:"confirm",label:"fechar"}})}};function M(){return new Promise((x,k)=>{try{c.value=!0,setTimeout(()=>{if(!r.value)return;const b=document.createElement("canvas");b.width=r.value.videoWidth,b.height=r.value.videoHeight;const R=b.getContext("2d");R==null||R.drawImage(r.value,0,0,b.width,b.height),x(b.toDataURL("image/png")),c.value=!1},200)}catch(b){k(b)}})}async function w(){if(l.value=await M(),!r.value)return;const x=r.value.srcObject;M(),x.getTracks().forEach(b=>{b.stop()}),r.value.srcObject=null,a.value=!1}function S(){var x;l.value&&(s.value=!0,Ue(l.value,(x=n.data.patient)==null?void 0:x.id).then(k=>{n.data.internal.faceRecognition=l.value,t("next")}).catch(k=>{if(i.value++,m.value=!0,l.value=null,i.value>=te){t("alert",{title:`Você atingiu ${te} tentativas de leitura biométrica!`,text:"Deseja tentar com o Token?",action:{type:"choise",rejectLabel:"Ir para recepção",acceptLabel:"Tentar com Token",callback(b){if(!b)return t("to","Queues");t("to","SendToken")}}});return}}).finally(()=>{s.value=!1}))}return Te(()=>{w()}),N(()=>{n.data.internal.faceRecognition&&(l.value=n.data.internal.faceRecognition),j(!1)}),(x,k)=>(g(),V("div",Ra,[v("h1",Aa,[E(v("span",null,[L(" Capturando em "),v("span",Ea,P(f.value),1)],512),[[le,a.value]]),E(v("span",null," Posicione-se em frente a câmera ",512),[[le,!a.value]])]),v("div",za,[v("div",Na,[v("video",{ref_key:"video",ref:r,class:"bg-grey position-absolute",autoplay:"",style:{"object-fit":"fill",left:"0",right:"0",top:"0",bottom:"0",width:"100%",height:"100%"}},null,512),v("div",{class:$t(["cover position-absolute d-flex justify-center align-center",{active:c.value}]),style:{width:"100%",left:"0",right:"0",top:"0",bottom:"0",height:"100%"}},[l.value?(g(),V("img",{key:0,src:l.value,style:{width:"100%",height:"100%"}},null,8,qa)):(g(),V("div",Ua))],2)])]),v("div",Ha,[v("div",Qa,[o(I,{class:"mx-auto px-8 py-2 mt-8",rounded:"",color:"primary",disabled:a.value,onClick:T},{default:d(()=>[L(P(h.value),1)]),_:1},8,["disabled"]),o(I,{loading:s.value,class:"mx-auto px-8 py-2 mt-8",disabled:!l.value,rounded:"",color:"green",onClick:S},{default:d(()=>[L(" Confirmar ")]),_:1},8,["loading","disabled"])])]),o(ea,{modelValue:m.value,"onUpdate:modelValue":k[0]||(k[0]=b=>m.value=b),position:"absolute",location:"top right",color:"red"},{default:d(()=>[L(" Faces divergentes, não é a mesma pessoa. Tentativas restantes: "+P(te-i.value),1)]),_:1},8,["modelValue"])]))}}),Wa=ie(Ga,[["__scopeId","data-v-0fc53824"]]),Ja=Object.freeze(Object.defineProperty({__proto__:null,default:Wa},Symbol.toStringTag,{value:"Module"})),Xa=D({__name:"IFrameVue",props:{showLoading:{type:Boolean,default:!0}},setup(e){const u=_(!0);return(t,n)=>(g(),V(U,null,[o(Le,{name:"fade"},{default:d(()=>[t.showLoading&&u.value?(g(),O(ae,{key:0,variant:"tonal",elevation:"5",class:"pa-5 h-100"},{default:d(()=>[je(t.$slots,"loading",{loading:u.value},()=>[o(ae,{variant:"outlined",rounded:"0",class:"mx-auto pa-10 h-100",style:{width:"70%"}},{default:d(()=>[o(ae,{variant:"outlined",class:"h-100",rounded:"0"},{default:d(()=>[(g(),V(U,null,ne(6,r=>o(Zt,{type:r%2==0?"paragraph":"article"},null,8,["type"])),64))]),_:1})]),_:1})])]),_:3})):z("",!0)]),_:3}),E(v("iframe",G({onLoad:n[0]||(n[0]=r=>u.value=!1)},t.$attrs),null,16),[[le,!u.value]])],64))}}),Za={class:"d-flex justify-end text-h5"},Ka={style:{overflow:"scroll",height:"90%"}},Ya={class:"d-flex align-center h-100",style:{overflow:"scroll"}},en=D({__name:"GuideCarousel",props:{urls:{}},setup(e){const u=e,t=_(0),n=C(()=>u.urls),r=C(()=>t.value+1),a=C(()=>t.value===n.value.length-1),c=C(()=>t.value===0);return(s,l)=>(g(),V(U,null,[v("div",Za,P(r.value)+" / "+P(n.value.length),1),v("div",Ka,[v("div",Ya,[o(I,{color:c.value?"":"primary",size:"large",icon:"mdi-chevron-left",class:"mr-2",onClick:l[0]||(l[0]=i=>t.value--),disabled:c.value},null,8,["color","disabled"]),o(He,{class:"h-100","show-arrows":!1,"hide-delimiters":"","hide-delimiter-background":"",modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=i=>t.value=i)},{default:d(()=>[(g(!0),V(U,null,ne(n.value,(i,f)=>(g(),O(Qe,{key:f},{default:d(()=>[o(Xa,{src:i+"?page=hsn#toolbar=0",height:"100%",width:"100%",style:{border:"none"}},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["modelValue"]),o(I,{color:a.value?"":"primary",size:"large",icon:"mdi-chevron-right",disabled:a.value,class:"ml-2",onClick:l[2]||(l[2]=i=>t.value++)},null,8,["color","disabled"])])])],64))}}),tn="/qwert/assets/totem-VpQX9TsR.png",an="/qwert/assets/totem-tablet-focus-DjzX2n2c.png",nn="/qwert/assets/tablet-jtXbmNYi.svg";function on(){const{smAndDown:e,mdAndDown:u,lgAndUp:t,md:n,mobile:r}=Tt(),a=C(()=>["responsive-font"]),c=C(()=>[{"text-h6":e.value,"text-h5":n.value,"text-h4":t.value},"my-4"]),s=C(()=>{switch(!0){case e.value:return"small";case u.value:return"default";default:return"large"}});return{title:a,subtitle:c,btnSize:s,mobile:r}}const ln=v("h1",null,"Assinatura de Guia",-1),sn={key:0},rn=["innerHTML"],un={key:1},cn=["innerHTML"],dn=D({__name:"HelpSignatureFlow",props:{modelValue:{type:Boolean}},emits:["update:modelValue","end"],setup(e,{emit:u}){const t=e,n=u;on();const r=_(!1),a=[{text:"Bem-vindo ao nosso sistema de autoatendimento! <br/> Realize a assinatura da sua guia de forma rápida e simples. Siga as etapas abaixo para concluir o processo",image:tn},{text:"No canto esquerdo do totem, você verá um tablet.",image:an},{text:"Utilize a caneta que está em cima do tablet. <br> Após assinar, toque no botão <strong>'OK'</strong> na tela para confirmar",image:nn}],c=_(!1),s=_(0),l=_(null);W(s,x=>{x==a.length-1&&!r.value&&(r.value=!0,n("end",!0))});const i=C(()=>s.value==0),f=C(()=>s.value==a.length-1),m=C(()=>a[s.value]),h=C({get(){return t.modelValue},set(x){n("update:modelValue",x)}}),T=C(()=>m.value.text.split(" ").length),$=C(()=>T.value*500);function j(){clearTimeout(l.value),s.value++}function M(){clearTimeout(l.value),s.value--}function w(x){x&&S($.value)}function S(x){console.log(`Step: ${m.value.text} 
 reading time second: ${x/1e3}s`),a.length-1!=s.value&&(c.value=!c.value,s.value++)}return(x,k)=>(g(),O(Pe,{modelValue:h.value,"onUpdate:modelValue":[k[2]||(k[2]=b=>h.value=b),w],width:"100%",persistent:"",class:"totem"},{default:d(()=>[o(ae,null,{default:d(()=>[o(jt,{class:"text-center"},{default:d(()=>[ln]),_:1}),o(Lt,{style:{"overflow-y":"hidden"},class:"d-flex align-center justify-center justify-space-between"},{default:d(()=>[o(I,{fab:"",onClick:M,icon:"mdi-chevron-left",color:"primary",disabled:i.value},null,8,["disabled"]),o(Le,{name:"slide-up",mode:"out-in"},{default:d(()=>[c.value?(g(),V("div",un,[v("p",{class:"text-center",innerHTML:m.value.text},null,8,cn),o(J,{src:m.value.image,height:"400"},null,8,["src"])])):(g(),V("div",sn,[v("p",{class:"text-center mt-3",innerHTML:m.value.text},null,8,rn),o(J,{src:m.value.image,height:"400"},null,8,["src"])]))]),_:1}),o(I,{fab:"",onClick:j,icon:"mdi-chevron-right",color:"primary",disabled:f.value},null,8,["disabled"])]),_:1}),o(Pt,{class:"d-flex justify-end"},{default:d(()=>[o(I,{variant:"tonal",color:"primary",class:"pa-1",onClick:k[0]||(k[0]=b=>s.value=a.length-1),disabled:s.value==a.length-1},{default:d(()=>[L(" Pular Ajuda ")]),_:1},8,["disabled"])]),_:1}),s.value!=a.length-1?(g(),O(ue,{onTimerEnd:k[1]||(k[1]=b=>S($.value)),key:s.value,time:$.value/1e3,"hide-number":""},null,8,["time"])):z("",!0)]),_:1})]),_:1},8,["modelValue"]))}});function mn(){return new Promise((e,u)=>{setTimeout(()=>e({data:{nr_sequencia_autor:"6546748",guia:{nr_guia:5087294,nr_prescricao:19828424,codigomensagem:"0",ds_mensagem:"Guia assinada com sucesso"}}}),4e3)})}const vn={class:"fill-height"},fn=D({__name:"PDFSignature",props:{data:{}},emits:["update:data","next","cancel","alert","loading","to"],setup(e,{emit:u}){const t=e,n=u,r=_(!1),a=_(!1),c=C(()=>{var l;return((l=t.data.patient)==null?void 0:l.schedules.map(i=>{var f;return(f=i.guide)==null?void 0:f.url}).filter(i=>i))??[]});function s(){r.value=!0,mn().then(l=>{n("next")}).catch(l=>{a.value=!1,n("alert",l)}).finally(()=>{r.value=!1})}return N(()=>{c.value.length||n("to","Queues")}),(l,i)=>(g(),V("div",vn,[o(en,{urls:c.value},{append:d(()=>[]),_:1},8,["urls"]),o(I,{block:"",disabled:r.value,loading:r.value,size:"x-large",color:"primary",onClick:i[0]||(i[0]=f=>a.value=!0)},{default:d(()=>[L(" Clique para assinar a guia do convênio ")]),_:1},8,["disabled","loading"]),o(dn,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=f=>a.value=f),onEnd:s},null,8,["modelValue"])]))}}),pn=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"}));function _n(e){return new Promise((u,t)=>{setTimeout(()=>e=="123456"?u({data:!0}):t({data:{message:"Token inválido",maxAttempts:ce--}}),1e3)})}function gn(){return new Promise(e=>{setTimeout(()=>e({data:!0}),1e3)})}var ce=2;function hn(e){return new Promise((u,t)=>{setTimeout(()=>e=="123456"?u({data:!0}):t({data:{message:"Token inválido",maxAttempts:ce--}}),4e3)})}function bn(){ce=2}const yn={key:0},kn=v("p",{class:"mt-10"}," Caso não tenha acesso ao código ou seu número esteja incorreto, volte uma etapa para tentar a leitura biométrica ou pule o check-in para passar na recepção. ",-1),xn=D({__name:"SendToken",props:{data:{}},emits:["update:data","next","cancel","alert","loading","to"],setup(e,{emit:u}){const t=e,n=u,r=C({get:()=>t.data,set:w=>n("update:data",w)}),a=_({data:"",wasSended:!1,isValid:!1,expiration:10,timer:0,sendLoading:!1,timesItWasSend:0}),c=_(),s=_(),l=_(!1),i=C(()=>a.value.timesItWasSend<=1?"Não recebi o código":"Reenviar código");function f(w,S){return S.length<w?`Mínimo de ${w} caracteres`:!0}function m(w){return w.length==7&&a.value.wasSended&&!a.value.isValid?"Token inválido":!0}function h(){return a.value.data.replace(/\D/g,"")}const T=_(!1);function $(){l.value=!0,_n(h()).then(()=>{n("loading",{text:"Aguardando autorização da operadora",callback(w){hn(h()).then(()=>{w.value=!1,n("next")}).catch(S=>{var x,k;w.value=!1,n("alert",{title:`Ops, ${(k=(x=S.response)==null?void 0:x.data)==null?void 0:k.message} :(`,text:"Tente novamente",action:{type:"choise",acceptLabel:"Ok, entendi",rejectLabel:"Finalizar",callback(b){if(!b)return n("cancel");n("to","Queues")}}})})}})}).catch(w=>{var S;if(console.log({error:w}),a.value.wasSended=!0,a.value.isValid=!1,c.value.validate(),w.data.maxAttempts<=0){const x={title:"Você atingiu o limite de tentativas",text:"Vamos te encaminhar para a recepção :)"};if((S=r.value.patient)!=null&&S.has_face_recognition)return n("alert",{...x,action:{type:"choise",acceptLabel:"Ir para recepção",rejectLabel:"Tentar com biometria facial",callback(k){if(!k)return n("to","FaceRecognition");n("to","Queues")}}});n("alert",{...x,action:{type:"confirm",label:"Ok, entendi",callback(){n("to","Queues")}}})}}).finally(()=>l.value=!1)}function j(){var S,x;M();const w={title:`Enviamos um novo código SMS para o seu celular com o final ${(S=r.value.patient)==null?void 0:S.phone_hint} e para o seu app :)`,text:""};if((x=r.value.patient)!=null&&x.has_face_recognition)return n("alert",{...w,action:{type:"choise",acceptLabel:"Continuar",rejectLabel:"Tentar com biometria facial",callback(k){if(!k)return n("to","FaceRecognition");a.value.data="",c.value.resetValidation(),setTimeout(()=>s.value.focus(),500)}}});n("alert",{...w,action:{type:"choise",acceptLabel:"Continuar",rejectLabel:"Ir para recepção",callback(k){if(!k)return n("to","Queues");a.value.data="",c.value.resetValidation(),setTimeout(()=>s.value.focus(),500)}}})}function M(){a.value.timesItWasSend++,a.value.sendLoading=!0,gn().then(()=>{if(a.value.timesItWasSend<=1){a.value.sendLoading=!1;return}a.value.timer=a.value.expiration;const w=setInterval(()=>{if(a.value.timer==0)return a.value.sendLoading=!1,clearInterval(w);a.value.timer--},1e3)}).catch(w=>{console.log({errorSendToken:w})})}return N(()=>{M()}),(w,S)=>{const x=Et,k=It("mask");return g(),V("div",null,[o(A,{justify:"center"},{default:d(()=>[o(F,{cols:"12"},{default:d(()=>{var b;return[v("h1",null," Enviamos um código SMS para o seu celular com final "+P((b=r.value.patient)==null?void 0:b.phone_hint)+" e para o seu app. ",1)]}),_:1}),o(F,{cols:"12",md:"8",lg:"7"},{default:d(()=>[o(Be,{modelValue:T.value,"onUpdate:modelValue":S[2]||(S[2]=b=>T.value=b),"lazy-validation":"",ref_key:"formElement",ref:c},{default:d(()=>[E(o(Nt,{"onUpdate:modelValue":[S[0]||(S[0]=b=>a.value.wasSended=!1),S[1]||(S[1]=b=>a.value.data=b)],ref_key:"inputElement",ref:s,"validate-on":"input",modelValue:a.value.data,number:"",rules:[Y(zt),b=>f(6,h()),m],placeholder:"000-000"},null,8,["modelValue","rules"]),[[k,"###-###"]])]),_:1},8,["modelValue"]),o(A,{class:"d-flex",dense:"",justify:"center"},{default:d(()=>[o(F,{cols:"12",md:"7"},{default:d(()=>[o(I,{rounded:"",variant:"outlined",class:"mr-4",onClick:j,disabled:a.value.sendLoading},{default:d(()=>[L(P(i.value),1)]),_:1},8,["disabled"]),a.value.timer>0?(g(),V("div",yn," Seu código expira em 0:"+P(a.value.timer.toString().padStart(2,"0")),1)):z("",!0)]),_:1}),o(F,{cols:"12",md:"5"},{default:d(()=>[o(I,{color:"primary",onClick:$,disabled:!T.value||a.value.data.length!=7||l.value,loading:l.value,rounded:""},{default:d(()=>[L(" Continua ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),kn,o(I,{variant:"text",class:"mt-4 text-primary",onClick:S[3]||(S[3]=b=>w.$emit("to","Queues"))},{default:d(()=>[L(" Pular check-in rápido ")]),_:1})]),_:1}),o(F,{cols:"12",md:"4",lg:"5",class:"d-flex justify-center"},{default:d(()=>[o(x,{"always-visible":""})]),_:1})]),_:1})])}}}),wn=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"})),Cn="data:image/svg+xml,%3csvg%20width='65'%20height='64'%20viewBox='0%200%2065%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.8333%208H21.3C16.8196%208%2014.5794%208%2012.8681%208.87195C11.3628%209.63893%2010.1389%2010.8628%209.37195%2012.3681C8.5%2014.0794%208.5%2016.3196%208.5%2020.8V21.3333M21.8333%2056H21.3C16.8196%2056%2014.5794%2056%2012.8681%2055.1281C11.3628%2054.3611%2010.1389%2053.1372%209.37195%2051.6319C8.5%2049.9206%208.5%2047.6804%208.5%2043.2V42.6667M56.5%2021.3333V20.8C56.5%2016.3196%2056.5%2014.0794%2055.6281%2012.3681C54.8611%2010.8628%2053.6372%209.63894%2052.1319%208.87195C50.4206%208%2048.1804%208%2043.7%208H43.1667M56.5%2042.6667V43.2C56.5%2047.6804%2056.5%2049.9206%2055.6281%2051.6319C54.8611%2053.1372%2053.6372%2054.3611%2052.1319%2055.1281C50.4206%2056%2048.1804%2056%2043.7%2056H43.1667M20.5%2021.3333V25.3333M44.5%2021.3333V25.3333M29.8333%2033.6003C31.9667%2033.6003%2033.8333%2031.7336%2033.8333%2029.6003V21.3333M41.0339%2040.5332C36.2339%2045.3332%2028.5005%2045.3332%2023.7005%2040.5332'%20stroke='%23FC4C02'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Sn="data:image/svg+xml,%3csvg%20width='65'%20height='64'%20viewBox='0%200%2065%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M59.1667%2029.3334V21.8667C59.1667%2018.8798%2059.1667%2017.3863%2058.5854%2016.2454C58.074%2015.2419%2057.2581%2014.426%2056.2546%2013.9147C55.1138%2013.3334%2053.6203%2013.3334%2050.6333%2013.3334H14.3667C11.3797%2013.3334%209.88624%2013.3334%208.74538%2013.9147C7.74185%2014.426%206.92595%2015.2419%206.41463%2016.2454C5.83333%2017.3863%205.83333%2018.8798%205.83333%2021.8667V31.4667C5.83333%2034.4537%205.83333%2035.9471%206.41463%2037.088C6.92595%2038.0915%207.74185%2038.9074%208.74538%2039.4187C9.88624%2040%2011.3797%2040%2014.3667%2040H29.8333M32.5%2026.6667H32.5133M45.8333%2026.6667H45.8467M19.1667%2026.6667H19.18M51.8333%2045.3334V40.6667C51.8333%2038.0894%2049.744%2036%2047.1667%2036C44.5893%2036%2042.5%2038.0894%2042.5%2040.6667V45.3334M33.1667%2026.6667C33.1667%2027.0349%2032.8682%2027.3334%2032.5%2027.3334C32.1318%2027.3334%2031.8333%2027.0349%2031.8333%2026.6667C31.8333%2026.2985%2032.1318%2026%2032.5%2026C32.8682%2026%2033.1667%2026.2985%2033.1667%2026.6667ZM46.5%2026.6667C46.5%2027.0349%2046.2015%2027.3334%2045.8333%2027.3334C45.4651%2027.3334%2045.1667%2027.0349%2045.1667%2026.6667C45.1667%2026.2985%2045.4651%2026%2045.8333%2026C46.2015%2026%2046.5%2026.2985%2046.5%2026.6667ZM19.8333%2026.6667C19.8333%2027.0349%2019.5349%2027.3334%2019.1667%2027.3334C18.7985%2027.3334%2018.5%2027.0349%2018.5%2026.6667C18.5%2026.2985%2018.7985%2026%2019.1667%2026C19.5349%2026%2019.8333%2026.2985%2019.8333%2026.6667ZM42.1%2056H52.2333C53.7268%2056%2054.4735%2056%2055.044%2055.7094C55.5457%2055.4537%2055.9537%2055.0458%2056.2093%2054.544C56.5%2053.9736%2056.5%2053.2268%2056.5%2051.7334V49.6C56.5%2048.1066%2056.5%2047.3598%2056.2093%2046.7894C55.9537%2046.2876%2055.5457%2045.8797%2055.044%2045.624C54.4735%2045.3334%2053.7268%2045.3334%2052.2333%2045.3334H42.1C40.6065%2045.3334%2039.8598%2045.3334%2039.2894%2045.624C38.7876%2045.8797%2038.3796%2046.2876%2038.124%2046.7894C37.8333%2047.3598%2037.8333%2048.1066%2037.8333%2049.6V51.7334C37.8333%2053.2268%2037.8333%2053.9736%2038.124%2054.544C38.3796%2055.0458%2038.7876%2055.4537%2039.2894%2055.7094C39.8598%2056%2040.6065%2056%2042.1%2056Z'%20stroke='%23FC4C02'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Vn=["src"],$n=["src"],Tn=D({__name:"Signature",props:{subScreens:{},data:{},screen:{}},emits:["alert","next","to"],setup(e,{emit:u}){const t=e,n=u,r=_(!0);return re(()=>{var a;if(!((a=t.data.patient)!=null&&a.has_face_recognition))return n("alert",{title:"Como gostaria de realizar o seu check-in?",text:"",action:{type:"choise",acceptLabel:"Agilizar com token",rejectLabel:"Ir para recepção",callback(c){if(c)return n("to","SendToken");n("to","Queues")}}});r.value=!1}),(a,c)=>(g(),V("div",null,[r.value?z("",!0):(g(),O(A,{key:0,justify:"center"},{default:d(()=>[o(F,{cols:"12",sm:"auto"},{default:d(()=>[a.data.patient.has_face_recognition?E((g(),O(K,{key:0,onClick:c[0]||(c[0]=s=>a.$emit("to","FaceRecognition")),height:"200",style:{cursor:"pointer","white-space":"normal"},width:"280",class:"d-flex align-start justify-center flex-column px-4 py-10",color:"transparent",border:"sm",rounded:"lg"},{default:d(()=>[v("img",{src:Y(Cn),height:"64"},null,8,Vn),L("Assinatura PDF Biometria facial ")]),_:1})),[[Z]]):z("",!0)]),_:1}),o(F,{cols:"12",sm:"auto"},{default:d(()=>[E((g(),O(K,{onClick:c[1]||(c[1]=s=>a.$emit("to","SendToken")),height:"200",style:{cursor:"pointer","white-space":"normal"},width:"280",class:"d-flex align-start justify-center flex-column px-4 py-10",color:"transparent",border:"sm",rounded:"lg"},{default:d(()=>[v("img",{src:Y(Sn),height:"64"},null,8,$n),L(" Token via SMS ou App ")]),_:1})),[[Z]])]),_:1}),o(F,{cols:"12",sm:"auto"},{default:d(()=>[E((g(),O(K,{onClick:c[2]||(c[2]=s=>a.$emit("to","PDFSignature")),height:"200",style:{cursor:"pointer","white-space":"normal"},width:"280",class:"d-flex align-start justify-center flex-column px-4 py-10",color:"transparent",border:"sm",rounded:"lg"},{default:d(()=>[o(Ie,{icon:"mdi-file-pdf-box",size:"64",color:"primary"}),L(" Assinatura do PDF ")]),_:1})),[[Z]])]),_:1}),o(F,{cols:"12",md:"10"},{default:d(()=>[o(I,{block:"",rounded:"",variant:"outlined",class:"mt-6",onClick:c[3]||(c[3]=s=>a.$emit("to","Queues"))},{default:d(()=>[L(" Pular checkin e ir para a recepção ")]),_:1})]),_:1})]),_:1}))]))}}),jn=Object.freeze(Object.defineProperty({__proto__:null,default:Tn},Symbol.toStringTag,{value:"Module"})),Ln={class:"d-flex bg-white align-center justify-center fill-height w-100"},Pn={class:"text-center mb-6",style:{"font-size":"1.4em"}},In={class:"font-weight-bold"},Bn=["innerHTML"],Mn={key:0,class:"d-flex justify-center"},Dn={key:1,class:"d-flex justify-center"},Fn=D({__name:"ConfirmAlert",props:{modelValue:{type:Boolean},title:{},action:{},text:{}},emits:["update:modelValue"],setup(e,{emit:u}){const t=e,n=u,r=C({get(){return t.modelValue},set(s){n("update:modelValue",s)}});function a(s=!0){var l;if(r.value=!1,t.action.type==="choise"){t.action.callback(s);return}(l=t.action)!=null&&l.callback&&t.action.callback()}const c=C(()=>t.text instanceof Error?t.text.message:t.text);return(s,l)=>(g(),O(Pe,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=i=>r.value=i),persistent:"",fullscreen:"",class:"totem"},{default:d(()=>[o(qt,{class:"bg-white"},{default:d(()=>[v("div",Ln,[v("div",null,[v("p",Pn,[v("span",In,P(s.title),1),v("div",{innerHTML:c.value},null,8,Bn)]),s.action.type=="choise"?(g(),V("div",Mn,[v("div",null,[o(I,{variant:"outlined",color:"primary",class:"mr-2","min-width":"350",rounded:"",onClick:l[0]||(l[0]=i=>a(!1))},{default:d(()=>[L(P(s.action.rejectLabel),1)]),_:1}),o(I,{variant:"flat","min-width":"350",rounded:"",color:"primary",onClick:l[1]||(l[1]=i=>a())},{default:d(()=>[L(P(s.action.acceptLabel),1)]),_:1})])])):(g(),V("div",Dn,[o(I,{ariant:"flat",rounded:"",width:"350",color:"primary",onClick:l[2]||(l[2]=i=>a())},{default:d(()=>[L(P(s.action.label),1)]),_:1})]))])])]),_:1})]),_:1},8,["modelValue"]))}}),On={class:"mt-4 d-flex justify-space-between",style:{}},Rn=v("span",{class:"font-weight-bold"},"Voltar",-1),An=v("span",{class:"font-weight-bold"},"Cancelar",-1),En={style:{width:"80%"},class:"mx-auto flex-grow-1 d-flex flex-column"},zn={class:"text-center"},Nn=D({__name:"Default",props:{hideBack:{type:Boolean,default:!1},hideCancel:{type:Boolean,default:!1}},emits:["cancel","back"],setup(e,{expose:u,emit:t}){const n=t;Bt();const r=_({}),a=C(()=>Ft);_(!1);const c=C(()=>{const m=new Date,h=m.toLocaleDateString("pt-BR",{day:"2-digit"}),T=m.toLocaleDateString("pt-BR",{month:"long"}),$=m.toLocaleDateString("pt-BR",{year:"numeric"});return`${h} de ${Ht(T)} de ${$}`}),s=_("");let l=0;function i(){s.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});const m=new Date,h=6e4-(m.getSeconds()*1e3+m.getMilliseconds());setTimeout(()=>{s.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),l=setInterval(()=>{s.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})},6e4)},h)}function f(m){r.value=m}return u({setStyles:f}),N(()=>{i()}),Te(()=>{clearInterval(l)}),(m,h)=>(g(),V("div",{class:"d-flex flex-column flex-grow-1 totem",style:Dt(r.value),fluid:""},[v("div",null,[v("div",null,[o(J,{src:a.value,width:"194"},null,8,["src"])]),v("div",On,[o(I,{variant:"text",color:"primary",onClick:h[0]||(h[0]=T=>n("back")),disabled:m.hideBack},{default:d(()=>[o(Ie,{class:"mr-2",size:"30"},{default:d(()=>[L("mdi-chevron-left")]),_:1}),Rn]),_:1},8,["disabled"]),o(I,{variant:"text",color:"primary",onClick:h[1]||(h[1]=T=>n("cancel")),disabled:m.hideCancel},{default:d(()=>[An]),_:1},8,["disabled"])])]),v("div",En,[je(m.$slots,"default")]),v("div",zn,[o(Mt,{class:"my-4"}),L(" "+P(c.value)+" - "+P(s.value),1)])],4))}}),uo=D({__name:"NewFlow",setup(e){_("");const u=_(!1),t=_(!1),n=_(),r=_({title:"",text:"",action:{type:"confirm",label:"Ok"}}),a=_({text:"",callback:p=>{}}),c=_([]),s=_(""),l=_({internal:{}}),i=Ot(),f=C(()=>i.params.id),m=_(structuredClone(Qt.totem)),h=se({}),T=_({hideBack:!0,hideCancel:!1}),$=_(0),j=_(""),M=_(null),w=_(60*5),S=C(()=>{var p;return(p=m.value.screens[$.value])==null?void 0:p.data}),x=C(()=>{if(j.value!=="")return ve(S.value,j.value)}),k=C(()=>(n.value&&n.value.setStyles({}),j.value===""?S.value:x.value)),b=C(()=>k.value?(h.value[k.value.component]||me("component-not-found"),h.value[k.value.component]):h.value.Loading);W($,p=>{if(p==0)return T.value.hideBack=!0;T.value.hideBack=!1}),W(k,(p,y)=>{(p==null?void 0:p.component)===s.value||!(y!=null&&y.component)&&s.value===""||$.value!==0&&c.value.push(y.component)});const R=Object.assign({"/src/modules/patient/views/totem/BirthDate.vue":Ge,"/src/modules/patient/views/totem/Identifier.vue":We,"/src/modules/patient/views/totem/Init.vue":Je,"/src/modules/patient/views/totem/Loading.vue":Xe,"/src/modules/patient/views/totem/PatientInfo/ContactInfo.vue":oa,"/src/modules/patient/views/totem/PatientInfo/PatientInfo.vue":ra,"/src/modules/patient/views/totem/Queues/AttendanceType.vue":_a,"/src/modules/patient/views/totem/Queues/PasswordSuccess.vue":$a,"/src/modules/patient/views/totem/Queues/Queues.vue":Ia,"/src/modules/patient/views/totem/Schedule.vue":Ze,"/src/modules/patient/views/totem/Signature/CheckinSuccess.vue":Oa,"/src/modules/patient/views/totem/Signature/FaceRecognition.vue":Ja,"/src/modules/patient/views/totem/Signature/PDFSignature.vue":pn,"/src/modules/patient/views/totem/Signature/SendToken.vue":wn,"/src/modules/patient/views/totem/Signature/Signature.vue":jn,"/src/modules/patient/views/totem/Welcome.vue":Ke});Ne(),re(()=>{Gt(f.value).then(p=>{m.value=p.data})}),N(()=>{window.addEventListener("click",ee),window.addEventListener("keydown",ee)}),Rt(()=>{window.removeEventListener("click",ee),window.removeEventListener("keydown",ee),M.value!==null&&clearTimeout(M.value)});function H(p){console.log("open loading"),console.log(p),t.value=!0,a.value=p,p.callback(t)}function Q(){$.value=0,j.value="",l.value={internal:{}},s.value="",c.value=[],bn()}function De(){if(c.value.length===0)return;s.value=c.value.pop();const p=ze(s.value);p&&($.value=p.index,j.value=p.subScreenComponent)}function Fe(){const p=fe(S.value,x.value);if(!p){Oe();return}j.value=p.component}function Oe(){if(j.value="",$.value==m.value.screens.length-1){$.value=0;return}$.value++}function Re(p){const y=ve(S.value,p);if(y){j.value=y.component;return}Ae(p)}function Ae(p){const y=Ee(p);if(!y)return me("flow-not-found");j.value="",$.value=m.value.screens.indexOf(y)}function de(p){r.value=p,u.value=!0}function me(p){de({title:"Erro de sistema",text:`Favor entrar em contato com a equipe de TI. (erro: ${p})`,action:{type:"confirm",label:"Ok"}})}const ee=()=>{M.value!==null&&clearTimeout(M.value),M.value=window.setTimeout(()=>{$.value!==0&&Q()},w.value*1e3)};function ve(p,y){return p.subscreens.find(B=>B.component===y)}function Ee(p){return m.value.screens.find(y=>y.data.component===p)}function ze(p){let y=null;for(let B=0;B<m.value.screens.length;B++){const q=m.value.screens[B];if(q.data.component===p){y={index:B,subScreenComponent:""};break}for(let X=0;X<q.data.subscreens.length;X++){const pe=q.data.subscreens[X];if(pe.component===p){y={index:B,subScreenComponent:pe.component};break}}if(y)break}return y}function fe(p,y){if(p.subscreens.length===0)return;if(!y)return p.subscreens[0];const B=p.subscreens.findIndex(X=>X.component===y.component),q=p.subscreens[B+1];if(q!==void 0)return q.order===y.order?fe(p,q):p.subscreens[B+1]}function Ne(){for(const p in R){const y=qe(p);y!==null&&(h.value[y]=R[p].default)}}function qe(p){const y=p.match(/\/([^\/]+)\.vue$/);return y?y[1]:null}return(p,y)=>(g(),V(U,null,[z("",!0),o(Nn,G({ref_key:"layoutRef",ref:n,onBack:De,onCancel:Q},T.value),{default:d(()=>[(g(),O(At(b.value),{onAlert:de,onNext:Fe,onTo:y[0]||(y[0]=B=>Re(B)),onCancel:Q,onLoading:H,data:l.value,"onUpdate:data":y[1]||(y[1]=B=>l.value=B),layoutRef:n.value,totem:m.value,screen:k.value},null,40,["data","layoutRef","totem","screen"])),o(Fn,G({modelValue:u.value,"onUpdate:modelValue":y[2]||(y[2]=B=>u.value=B)},r.value),null,16,["modelValue"]),o(Ut,G({modelValue:t.value,"onUpdate:modelValue":y[3]||(y[3]=B=>t.value=B)},a.value),null,16,["modelValue"])]),_:1},16)],64))}});export { uo as default };

