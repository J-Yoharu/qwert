import{c as G,d as C,_ as R}from"./default-data-BQTdE4wb.js";import{Y as x,c as V,a1 as n,a2 as c,a3 as e,h as t,b3 as N,a4 as A,ag as _,ac as o,b4 as E,a6 as p,F as b,a7 as y,ab as f,b1 as B,ai as F,r as q,ae as $,a8 as S,V as O,aw as T,b6 as Q,ba as U,aG as W,bo as j,ad as L,aF as P,b8 as M,o as Y}from"./index-BKCAMHtB.js";import{V as z}from"./VSheet-CbT8pimE.js";import{b as D,c as H}from"./filter-Dhl--26x.js";import{r as J}from"./VDataTable-BQlvNdma.js";import{V as K,a as X}from"./Welcome-D0P4oOpp.js";import{f as Z}from"./totem.repository-D2BaXo3Y.js";import{a as I,V as ee}from"./VRow-CFpyredg.js";import{V as te}from"./VSlideGroup-fefg94Nt.js";import{V as ae}from"./VSlideGroupItem-DUsW_am8.js";import"./VList-DAqeaKwZ.js";import"./ssrBoot-B3XYMXay.js";import"./VTextField-CYevVSB1.js";import"./VWindowItem-C_VgvuYB.js";import"./Init.vue_vue_type_script_setup_true_lang-CzRgUJ2e.js";import"./VForm-B8sy0Rqc.js";const se={style:{"line-height":"1.5rem"},class:"text-wrap"},ne={class:"text-body-2"},le={key:0},oe={key:1},re=_("span",{class:"font-weight-bold"}," Horários de atendimento ",-1),ie=x({__name:"QueueTotem",props:{queue:{}},setup(w){const h=w,g=V(()=>{const[a,...u]=h.queue.attendance_hours,r=u.at(-1);return h.queue.attendance_hours.every((v,d)=>d===0?!0:v.start_time===a.start_time&&v.end_time===a.end_time&&v.weekday_iso-1===d)&&r?`Horario de atendimento de ${s(a.weekday_iso)} a ${s(r.weekday_iso)} das ${a.start_time} às ${a.end_time}`:!1});function s(a){return a?["Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"][a-1]:void 0}return(a,u)=>(n(),c(B,{width:"100%",height:"100%"},{default:e(()=>[t(N,{class:"bg-secondary d-flex align-end justify-start pb-0 text-wrap overflow-visible",style:{"min-height":"60px"}},{default:e(()=>[t(z,{"min-height":"60","min-width":"60",class:"pa-2 border-md border-primary rounded mb-n4 mr-4 d-flex align-center justify-center"},{default:e(()=>[t(A,{src:a.queue.data.icon_src},null,8,["src"])]),_:1}),_("div",se,[_("p",null,o(a.queue.data.name),1),_("small",ne,o(a.queue.data.description),1)])]),_:1}),t(E,{class:"pt-0 pb-4"},{default:e(()=>[t(D,{"show-arrows":""},{default:e(()=>[(n(!0),p(b,null,y(a.queue.attendance_types,(r,i)=>(n(),c(H,{key:i},{default:e(()=>[f(o(r.data.name),1)]),_:2},1024))),128))]),_:1}),g.value?(n(),p("span",le,o(g.value),1)):(n(),p("div",oe,[re,t(D,{"show-arrows":""},{default:e(()=>[(n(!0),p(b,null,y(a.queue.attendance_hours,(r,i)=>(n(),c(H,{key:i},{default:e(()=>[f(o(s(r.weekday_iso))+" "+o(r.start_time)+" - "+o(r.end_time),1)]),_:2},1024))),128))]),_:1})]))]),_:1})]),_:1}))}}),ue=x({__name:"TotemScreensTable",props:{screens:{}},setup(w){const h=w,g=F(),s=V(()=>g.params.id),a=q(!1),u=q(0),r=[{title:"ID",align:"start",value:"id",width:"5%"},{title:"Nome",align:"start",value:"data.name",width:"20%"},{title:"Descrição",align:"start",value:"data.description",width:"20%"},{title:"Funcionalidades",align:"start",value:"traits",sortable:!0,width:"5%"},{title:"Campos",align:"start",value:"fields",sortable:!0,width:"5%"},{title:"",align:"start",value:"actions",sortable:!1,width:"5%"}],i=V(()=>h.screens[u.value]);function v(d){a.value=!0,u.value=d}return(d,m)=>(n(),p(b,null,[t(J,{items:d.screens,headers:r,"onClick:item":m[0]||(m[0]=()=>{}),"items-per-page":-1},{"item.data.name":e(({item:l})=>[t($(U),{to:{name:"screen.detail",params:{id:s.value,screenId:l.id}}},{default:e(()=>[f(o(l.data.name),1)]),_:2},1032,["to"])]),"item.actions":e(({item:l,index:k})=>[t(S,{icon:"",variant:"flat",onClick:ve=>v(k)},{default:e(()=>[t(O,null,{default:e(()=>[f(" mdi-eye-outline ")]),_:1})]),_:2},1032,["onClick"])]),"item.traits":e(({item:l})=>[f(o(l.traits.length?l.traits.length:"-"),1)]),"item.fields":e(({item:l})=>[f(o(l.fields.length?l.fields.length:"-"),1)]),bottom:e(()=>[]),_:1},8,["items"]),t(Q,{modelValue:a.value,"onUpdate:modelValue":m[4]||(m[4]=l=>a.value=l)},{default:e(()=>[t(B,null,{default:e(()=>[t(N,{class:"d-flex align-center bg-primary"},{default:e(()=>[_("h2",null,o(i.value.data.name),1),t(T),t(S,{icon:"mdi-close",variant:"plain",onClick:m[1]||(m[1]=l=>a.value=!1)})]),_:1}),t(K,{modelValue:u.value,"onUpdate:modelValue":m[3]||(m[3]=l=>u.value=l)},{default:e(()=>[(n(!0),p(b,null,y(d.screens,l=>(n(),c(X,null,{default:e(()=>[(n(),c(W($(G)[l.data.component]),{class:"pointer-none",modelValue:$(C),"onUpdate:modelValue":m[2]||(m[2]=k=>j(C)?C.value=k:null)},null,8,["modelValue"]))]),_:2},1024))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64))}}),de={class:"d-flex align-center"},me=_("h2",null,"Filas",-1),ce={key:0},pe={class:"d-flex align-center"},fe=_("h2",null,"Telas",-1),_e={key:0},Ne=x({__name:"TotemDetail",setup(w){const{setBreadcrumbs:h}=L(),{openAlert:g}=P(),s=q({id:0,name:"",description:"",queues:[],screens:[],site:{cd_estabelecimento:0,ds_estabelecimento:""}}),a=M([{title:"Gerenciar Filas",slug:"totem.queue.view",to:{name:"queue.detail"}},{title:"Gerenciar telas",slug:"totem.screen.view",to:{name:"screen.totem.manager",params:{id:V(()=>s.value.id)}}}]),u=F();Y(()=>{r()});function r(){h([{title:"Totens",to:{name:"totem.view"}},{title:V(()=>s.value.id?s.value.name:u.params.id),to:{name:"totem.detail"}}]),Z(Number(u.params.id)).then(i=>{s.value=i.data}).catch(i=>{g("Erro",i)})}return(i,v)=>(n(),c(R,{title:s.value.name,"enable-action":"",actions:a,description:s.value.description},{"action-prepend":e(()=>[t(S,{color:"primary","prepend-icon":"mdi-play",onClick:v[0]||(v[0]=d=>i.$router.push({name:"totem.run",params:{id:s.value.id}}))},{default:e(()=>[f(" Executar ")]),_:1})]),default:e(()=>[t(ee,null,{default:e(()=>[t(I,{cols:"12"},{default:e(()=>[_("div",de,[me,t(T),f(" total: "+o(s.value.queues.length),1)]),s.value.queues.length===0?(n(),p("div",ce,"Não há filas")):(n(),c(te,{key:1,"show-arrows":""},{default:e(()=>[(n(!0),p(b,null,y(s.value.queues,d=>(n(),c(ae,null,{default:e(()=>[t(ie,{width:"400",queue:d},null,8,["queue"])]),_:2},1024))),256))]),_:1}))]),_:1}),t(I,{cols:"12"},{default:e(()=>[_("div",pe,[fe,t(T),f(" total: "+o(s.value.screens.length),1)]),s.value.screens.length===0?(n(),p("div",_e,"Não há telas")):(n(),c(ue,{key:1,screens:s.value.screens},null,8,["screens"]))]),_:1})]),_:1})]),_:1},8,["title","actions","description"]))}});export{Ne as default};
