import{_ as R}from"./LayoutView.vue_vue_type_script_setup_true_lang-IMetWSzZ.js";import{g as P,d as b}from"./acl.repository-D4gBC5dN.js";import{Y as B,r as n,aq as S,ad as T,c as A,o as F,a0 as d,a1 as v,a2 as t,h as o,ab as g,a8 as _,au as I,af as U,ac as V,i as q,a6 as h,a7 as z,F as C,a5 as D}from"./index-eSwy3xtz.js";import{V as E,a as L}from"./VRow-CBFz3Dht.js";import{V as M}from"./VTextField-MS4vxye7.js";import{V as $}from"./filter-WSIZa-5s.js";import{b as j,V as Y,c as G}from"./VList-Ck199v2W.js";import{V as H}from"./VDataTableServer-gIGcQsqo.js";import"./VSheet-D4hldqhc.js";import"./index-C-zpw9ZX.js";import"./VSelectionControl--XLGJQvK.js";import"./VSlideGroup-04aVnn54.js";import"./ssrBoot-Bs0WsREi.js";import"./VDataTable-DppTqyZv.js";const ue=B({__name:"Roles",setup(J){const p=n(!1),s=n(!1),u=n(""),f=S(),c=n([]),i=n({current_page:1,per_page:10,total:0,to:2}),{setBreadcrumbs:y}=T();y([{title:"ACL",name:"true",to:""}]);const w=[{title:"Nome",value:"name"},{title:"Nível",value:"level"},{title:"Permissões",value:"scopes_count"},{title:"Padrão",value:"is_default"},{value:"actions",align:"center",width:"2%"}],k=[{title:"Visualizar",action:e=>{f.push({name:"management.acl.edit",params:{id:e.id}})}},{title:"Excluir",show:e=>!e.is_default,action:e=>{s.value=!0,b(e.id).then(()=>{m()}).catch(l=>{console.error(l)}).finally(()=>{s.value=!1})}}],x=A(()=>{let e=[];return u.value?(e=c.value.filter(l=>{var a;if((a=l.name)!=null&&a.toLocaleLowerCase().includes(u.value.toLocaleLowerCase()))return l}),e):c.value}),N=(e,l)=>{const a=l.item;f.push({name:"management.acl.edit",params:{id:a.id}})},m=()=>{p.value=!0,s.value=!0,P(i.value).then(e=>{c.value=e.data.data,i.value={current_page:e.data.current_page,per_page:e.data.per_page,total:e.data.total,to:e.data.to}}).catch(()=>{}).finally(()=>{p.value=!1,s.value=!1})};return F(()=>{m()}),(e,l)=>(d(),v(R,{icon:"mdi-shield-key-outline",title:"ACL"},{action:t(()=>[o(_,{color:"primary",to:{name:"management.acl.create"}},{default:t(()=>[g(" Nova Role ")]),_:1},8,["to"])]),content:t(()=>[o(H,{headers:w,items:x.value,hover:"","onClick:row":N,loading:s.value,"items-length":i.value.total,"items-per-page":i.value.per_page,"onUpdate:itemsPerPage":[l[1]||(l[1]=a=>i.value.per_page=a),m],"onUpdate:page":m},{top:t(()=>[o(E,null,{default:t(()=>[o(L,{cols:"12",md:"4",class:"d-flex align-center"},{default:t(()=>[o(M,{density:"compact","hide-details":"auto",placeholder:"Pesquisar...","append-inner-icon":"mdi-magnify",variant:"outlined",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=a=>u.value=a)},null,8,["modelValue"])]),_:1}),o(I),o(L,{cols:"12",md:"2",class:"d-flex align-center justify-end"})]),_:1})]),"item.is_default":t(({item:a})=>[U("span",null,V(a.is_default?"Sim":"Não"),1)]),"item.actions":t(({item:a})=>[o($,{location:"right"},{activator:t(({props:r})=>[o(_,q({icon:"mdi-dots-horizontal",variant:"plain"},r),null,16)]),default:t(()=>[o(j,null,{default:t(()=>[(d(),h(C,null,z(k,r=>(d(),h(C,null,[!r.show||r.show(a)?(d(),v(Y,{key:0,onClick:K=>r.action({...a})},{default:t(()=>[o(G,null,{default:t(()=>[g(V(r.title),1)]),_:2},1024)]),_:2},1032,["onClick"])):D("",!0)],64))),64))]),_:2},1024)]),_:2},1024)]),_:1},8,["items","loading","items-length","items-per-page"])]),_:1}))}});export{ue as default};
