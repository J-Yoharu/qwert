import{_ as se}from"./LayoutView.vue_vue_type_script_setup_true_lang-D62CiNoH.js";import{p as Y,ax as oe,ay as ne,g as j,v as re,r as S,c as U,f as H,a8 as z,h as t,F as k,i as D,az as ue,aA as ie,aB as de,x as ce,n as me,u as fe,A as ve,z as pe,t as C,C as be,E as Ve,aC as ge,Y as I,aD as E,aE as O,o as X,a1 as v,a6 as _,a7 as R,a3 as i,ag as B,ac as ye,a2 as P,an as xe,a5 as J,af as he,ad as Ce,aF as _e,s as Se,ae as ke,aw as we,ab as Te,ao as Be,aG as Me}from"./index-BKCAMHtB.js";import{V as L,a as Pe}from"./validator-BSIhhdyp.js";import{b as $e}from"./acl.repository-DAU-0bpy.js";import{a as $,V as N}from"./VRow-CFpyredg.js";import{V as Ue}from"./VTextField-CYevVSB1.js";import{V as Fe}from"./VForm-B8sy0Rqc.js";import{m as Ae,V as W}from"./VSlideGroup-fefg94Nt.js";import{V as Ee,a as Re}from"./VWindowItem-C_VgvuYB.js";const K=Symbol.for("vuetify:v-tabs"),ze=Y({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...oe(ne({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Q=j()({name:"VTab",props:ze(),setup(e,p){let{slots:d,attrs:o}=p;const{textColorClasses:g,textColorStyles:r}=re(e,"sliderColor"),b=S(),y=S(),f=U(()=>e.direction==="horizontal"),c=U(()=>{var a,l;return((l=(a=b.value)==null?void 0:a.group)==null?void 0:l.isSelected.value)??!1});function x(a){var s,m;let{value:l}=a;if(l){const u=(m=(s=b.value)==null?void 0:s.$el.parentElement)==null?void 0:m.querySelector(".v-tab--selected .v-tab__slider"),M=y.value;if(!u||!M)return;const n=getComputedStyle(u).color,V=u.getBoundingClientRect(),h=M.getBoundingClientRect(),F=f.value?"x":"y",A=f.value?"X":"Y",G=f.value?"right":"bottom",w=f.value?"width":"height",Z=V[F],ee=h[F],T=Z>ee?V[G]-h[G]:V[F]-h[F],ae=Math.sign(T)>0?f.value?"right":"bottom":Math.sign(T)<0?f.value?"left":"top":"center",te=(Math.abs(T)+(Math.sign(T)<0?V[w]:h[w]))/Math.max(V[w],h[w])||0,le=V[w]/h[w]||0,q=1.5;ie(M,{backgroundColor:[n,"currentcolor"],transform:[`translate${A}(${T}px) scale${A}(${le})`,`translate${A}(${T/q}px) scale${A}(${(te-1)/q+1})`,"none"],transformOrigin:Array(3).fill(ae)},{duration:225,easing:de})}}return H(()=>{const a=z.filterProps(e);return t(z,D({symbol:K,ref:b,class:["v-tab",e.class],style:e.style,tabindex:c.value?0:-1,role:"tab","aria-selected":String(c.value),active:!1},a,o,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":x}),{...d,default:()=>{var l;return t(k,null,[((l=d.default)==null?void 0:l.call(d))??e.text,!e.hideSlider&&t("div",{ref:y,class:["v-tab__slider",g.value],style:r.value},null)])}})}),ue({},b)}});function De(e){return e?e.map(p=>ge(p)?p:{text:p,value:p}):[]}const Ne=Y({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ae({mandatory:"force"}),...ce(),...me()},"VTabs"),Ge=j()({name:"VTabs",props:Ne(),emits:{"update:modelValue":e=>!0},setup(e,p){let{slots:d}=p;const o=fe(e,"modelValue"),g=U(()=>De(e.items)),{densityClasses:r}=ve(e),{backgroundColorClasses:b,backgroundColorStyles:y}=pe(C(e,"bgColor"));return be({VTab:{color:C(e,"color"),direction:C(e,"direction"),stacked:C(e,"stacked"),fixed:C(e,"fixedTabs"),sliderColor:C(e,"sliderColor"),hideSlider:C(e,"hideSlider")}}),H(()=>{const f=W.filterProps(e);return t(W,D(f,{modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},r.value,b.value,e.class],style:[{"--v-tabs-height":Ve(e.height)},y.value,e.style],role:"tablist",symbol:K}),{default:()=>[d.default?d.default():g.value.map(c=>t(Q,D(c,{key:c.text}),null))]})}),{}}}),qe={key:0},Le={class:"mr-auto"},We={class:"text-subtitle-1 font-weight-semi-bold pl-auto"},Ye=I({__name:"Permissions",props:E({modelValue:{default:()=>[]}},{modelValue:{required:!0},modelModifiers:{}}),emits:E(["update:modelValue"],["update:modelValue"]),setup(e,{emit:p}){const d=S(!1),o=S([]),g=U(()=>o.value.map(a=>({...a,isFullyMarked:y(a.scopes)}))),r=O(e,"modelValue"),b=()=>{d.value=!0,$e().then(a=>{o.value=a.data}).catch(a=>{console.error(a)}).finally(()=>{d.value=!1})},y=a=>a.every(l=>r.value.find(s=>s===l.slug)),f=a=>{if(a.isFullyMarked)return x(a);c(a)},c=a=>{const l=a.scopes.filter(s=>{if(!r.value.find(m=>m.slug===s.slug))return s}).map(s=>s.slug);l.length!==0&&(r.value=[...r.value,...l])},x=a=>{const l=r.value.filter(s=>!a.scopes.find(m=>m.slug===s));r.value=l};return X(()=>{b()}),(a,l)=>d.value?J("",!0):(v(),_("div",qe,[(v(!0),_(k,null,R(g.value,s=>(v(),_(k,null,[t(N,{"no-gutters":""},{default:i(()=>[t($,{cols:"12",class:"pb-0 d-flex align-center"},{default:i(()=>[B("div",Le,[B("span",We,ye(s.name),1)]),B("div",null,[t(L,{modelValue:s.isFullyMarked,"onUpdate:modelValue":m=>s.isFullyMarked=m,onClick:m=>f(s),label:"Marcar todos","hide-details":"auto",density:"compact",class:"pa-1"},null,8,["modelValue","onUpdate:modelValue","onClick"])])]),_:2},1024),(v(!0),_(k,null,R(s.scopes,m=>(v(),P($,{cols:"12",md:"3"},{default:i(()=>[t(L,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=u=>r.value=u),label:m.name,value:m.slug,"hide-details":"auto",density:"compact",class:"pa-1 ml-2"},null,8,["modelValue","label","value"])]),_:2},1024))),256))]),_:2},1024),t(xe,{class:"pb-3"})],64))),256))]))}}),je=he(Ye,[["__scopeId","data-v-7b4f1dff"]]),He=B("div",{class:"mb-1"},[B("span",{class:"text-subtitle-2 font-weight-semi-bold pb-6 pr-1"},"Nome do grupo"),B("span",{class:"text-subtitle-2 font-weight-semi-bold text-error pb-6"},"*")],-1),la=I({__name:"Role",props:E({modelValue:{default:()=>({id:"",name:"",scopes:[],users:[],level:1,is_default:!1})},showUsersTab:{type:Boolean,default:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:E(["update:modelValue","save"],["update:modelValue"]),setup(e,{emit:p}){const d=e,o=O(e,"modelValue"),g=U(()=>o.value.id?o.value.name:"Criar grupo de permissões"),{setBreadcrumbs:r}=Ce();r([{title:"ACL",name:"true",to:{name:"management.acl"}},{title:g.value,name:"true",to:""}]);const b=p,{openAlert:y}=_e(),f=new Pe,c=S(!1),x=S(null),a=S([{title:"Permissões",component:Se(je),show:!0,value:"scopes"}]),l=()=>{o.value.scopes.length||y("Selecione pelo menos uma permissão","É necessário selecionar pelo menos uma permissão"),c.value&&o.value.scopes.length&&b("save",!0)},s=()=>{o.value.id&&d.showUsersTab};return X(()=>{s()}),(m,u)=>{const M=se;return v(),P(M,{icon:"mdi-shield-key-outline",title:g.value},{content:i(()=>[t(Fe,{modelValue:c.value,"onUpdate:modelValue":u[1]||(u[1]=n=>c.value=n),"lazy-validation":"",onSubmit:Be(l,["prevent"])},{default:i(()=>[t(N,null,{default:i(()=>[t($,{cols:"12",md:"3"},{default:i(()=>[He,t(Ue,{density:"compact",flat:"",variant:"outlined","hide-details":"auto",modelValue:o.value.name,"onUpdate:modelValue":u[0]||(u[0]=n=>o.value.name=n),rules:ke(f).rules("required"),disabled:!!o.value.is_default},null,8,["modelValue","rules","disabled"])]),_:1}),t(we),t($,{cols:"12",md:"2",class:"d-flex align-end justify-end"},{default:i(()=>[t(z,{color:"primary",rounded:"lg",type:"submit"},{default:i(()=>[Te(" Salvar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(N,null,{default:i(()=>[t($,{cols:"12"},{default:i(()=>[t(Ge,{modelValue:x.value,"onUpdate:modelValue":u[2]||(u[2]=n=>x.value=n)},{default:i(()=>[(v(!0),_(k,null,R(a.value,(n,V)=>(v(),_(k,null,[n.show?(v(),P(Q,{key:V,density:"compact",text:n.title},null,8,["text"])):J("",!0)],64))),256))]),_:1},8,["modelValue"]),t(Ee,{modelValue:x.value,"onUpdate:modelValue":u[3]||(u[3]=n=>x.value=n),class:"pt-2"},{default:i(()=>[(v(!0),_(k,null,R(a.value,(n,V)=>(v(),P(Re,{key:V},{default:i(()=>[(v(),P(Me(n.component),{modelValue:o.value[n.value],"onUpdate:modelValue":h=>o.value[n.value]=h},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["title"])}}});export{la as _};
