import{r as Qe,V as Ge,a as We,_ as Je,b as Xe,c as Ze,d as Ke,e as Ye,f as et,g as tt}from"./Welcome-CRKz40rK.js";import{_ as xe}from"./Form.vue_vue_type_script_setup_true_lang-CbT_6LEC.js";import{a as F,V as z}from"./VRow-D8J0Kcti.js";import{p as we,aI as at,K as nt,L as Ce,g as Se,z as ot,t as lt,aJ as st,P as it,N as Ve,aK as rt,c as C,aL as ut,f as Te,h as i,aM as ct,aN as dt,y as mt,aO as vt,ax as ft,aP as pt,u as _t,aQ as gt,aR as ht,S as bt,aS as yt,B as kt,r as f,s as le,w as G,o as q,aT as xt,aU as ge,aV as wt,at as $e,D as Ct,i as Q,az as St,aW as Vt,X as Le,Y as O,a1 as g,a6 as S,a3 as c,a8 as B,ab as I,ag as p,ac as P,ao as Tt,F as N,a7 as X,a2 as M,aX as H,a4 as W,aY as se,aZ as $t,a_ as Lt,af as ie,a5 as A,T as re,ae as ue,a$ as je,b0 as oe,al as jt,b1 as ee,b2 as Pe,W as Ie,Q as Pt,b3 as It,b4 as Bt,b5 as Mt,b6 as Be,b7 as Ot,b8 as Dt,V as Me,$ as Rt,aw as he,an as Ft,b9 as At,a9 as Et,ar as zt,ai as Nt,b as qt,aG as Ut}from"./index-qD7YzMI5.js";import{V as Oe}from"./VForm-Z8UNoJNM.js";import{V as ce}from"./VSheet-BBLRjc8r.js";import{_ as Ht,r as Qt}from"./Init.vue_vue_type_script_setup_true_lang-PSd2mehW.js";import{V as Gt}from"./VTextField-Dhuq--7F.js";import{_ as Wt,L as Jt}from"./Loading-DDCQjrni.js";import{c as Xt}from"./string-D3I3Kuho.js";import{d as Zt}from"./default-values-CbD4zaFl.js";import{f as Kt}from"./totem.repository-SahHbUeZ.js";import"./VWindowItem-xcBKYlQf.js";import"./ssrBoot-CKTcMaVY.js";import"./filter-CwHpNPHQ.js";import"./VList-DfE71V2C.js";import"./VSlideGroup-BFjSOK57.js";import"./VTooltip-Bb_4RZzS.js";import"./validator-BWY9Mz8E.js";import"./VContainer-D9_cgc0e.js";const Yt={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function ea(t){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return i("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${t}`]},[u])}function be(t){const[u,e]=t.split("@");return Array.from({length:e}).map(()=>te(u))}function te(t){let u=[];if(!t)return u;const e=Yt[t];if(t!==e){if(t.includes(","))return ye(t);if(t.includes("@"))return be(t);e.includes(",")?u=ye(e):e.includes("@")?u=be(e):e&&u.push(te(e))}return[ea(t,u)]}function ye(t){return t.replace(/\s/g,"").split(",").map(te)}const ta=we({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...at(),...nt(),...Ce()},"VSkeletonLoader"),aa=Se()({name:"VSkeletonLoader",props:ta(),setup(t,u){let{slots:e}=u;const{backgroundColorClasses:a,backgroundColorStyles:r}=ot(lt(t,"color")),{dimensionStyles:l}=st(t),{elevationClasses:d}=it(t),{themeClasses:s}=Ve(t),{t:o}=rt(),n=C(()=>te(ut(t.type).join(",")));return Te(()=>{var _;const v=!e.default||t.loading;return i("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":t.boilerplate},s.value,a.value,d.value],style:[r.value,v?l.value:{}],"aria-busy":t.boilerplate?void 0:v,"aria-live":t.boilerplate?void 0:"polite","aria-label":t.boilerplate?void 0:o(t.loadingText),role:t.boilerplate?void 0:"alert"},[v?n.value:(_=e.default)==null?void 0:_.call(e)])}),{}}});function na(t){const u=le(t);let e=-1;function a(){clearInterval(e)}function r(){a(),Le(()=>u.value=t)}function l(d){const s=d?getComputedStyle(d):{transitionDuration:.2},o=parseFloat(s.transitionDuration)*1e3||200;if(a(),u.value<=0)return;const n=performance.now();e=window.setInterval(()=>{const v=performance.now()-n+o;u.value=Math.max(t-v,0),u.value<=0&&a()},o)}return Vt(a),{clear:a,time:u,start:l,reset:r}}const oa=we({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ct({location:"bottom"}),...dt(),...mt(),...vt(),...Ce(),...ft(pt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),la=Se()({name:"VSnackbar",props:oa(),emits:{"update:modelValue":t=>!0},setup(t,u){let{slots:e}=u;const a=_t(t,"modelValue"),{locationStyles:r}=gt(t),{positionClasses:l}=ht(t),{scopeId:d}=bt(),{themeClasses:s}=Ve(t),{colorClasses:o,colorStyles:n,variantClasses:v}=yt(t),{roundedClasses:_}=kt(t),h=na(Number(t.timeout)),T=f(),j=f(),$=le(!1);G(a,x),G(()=>t.timeout,x),q(()=>{a.value&&x()});let L=-1;function x(){h.reset(),window.clearTimeout(L);const b=Number(t.timeout);if(!a.value||b===-1)return;const E=xt(j.value);h.start(E),L=window.setTimeout(()=>{a.value=!1},b)}function V(){h.reset(),window.clearTimeout(L)}function k(){$.value=!0,V()}function w(){$.value=!1,x()}return Te(()=>{const b=ge.filterProps(t),E=!!(e.default||e.text||t.text);return i(ge,Q({ref:T,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--timer":!!t.timer,"v-snackbar--vertical":t.vertical},l.value,t.class],style:t.style},b,{modelValue:a.value,"onUpdate:modelValue":U=>a.value=U,contentProps:Q({class:["v-snackbar__wrapper",s.value,o.value,_.value,v.value],style:[r.value,n.value],onPointerenter:k,onPointerleave:w},b.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},d),{default:()=>{var U,Z;return[wt(!1,"v-snackbar"),t.timer&&!$.value&&i("div",{key:"timer",class:"v-snackbar__timer"},[i($e,{ref:j,color:typeof t.timer=="string"?t.timer:"info",max:t.timeout,"model-value":h.time.value},null)]),E&&i("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((U=e.text)==null?void 0:U.call(e))??t.text,(Z=e.default)==null?void 0:Z.call(e)]),e.actions&&i(Ct,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[i("div",{class:"v-snackbar__actions"},[e.actions()])]})]},activator:e.activator})}),St({},T)}}),sa=p("h2",null,"Agora confirme que todos os seus contatos estão corretos.",-1),ia=p("p",null," Estas informações serão utilizadas caso seja necessário o hospital entrar em contato com você. ",-1),ra=O({__name:"ContactInfo",props:{data:{}},setup(t){const u=f([{component:"VTextField",value:"fix_phone",label:"DDD + Telefone fixo",required:!0,cols:{cols:12,md:3}},{component:"VTextField",value:"cellphone",label:"DDD + Celular",required:!0,cols:{cols:12,md:3}},{component:"VTextField",value:"email",label:"E-mail",required:!0,cols:{cols:12,md:6}},{component:"VAutocomplete",value:"adress_type",label:"Tipo de endereço",required:!0,cols:{cols:12,md:3},props:{items:["Residencial","Comercial","Outro"]}},{component:"VTextField",value:"cep",label:"CEP",required:!0,cols:{cols:12,md:2}},{component:"VTextField",value:"aditional_adress",label:"Logradouro",required:!0,cols:{cols:12,md:5}},{component:"VTextField",value:"number",label:"Número",required:!0,cols:{cols:12,md:2}},{component:"VTextField",value:"complement",label:"Complemento",required:!0,cols:{cols:12,md:3}},{component:"VAutocomplete",value:"uf",label:"UF",required:!0,cols:{cols:12,md:3},props:{items:["SP","RJ","MG","PR","RS"]}},{component:"VAutocomplete",value:"city",label:"Cidade",required:!0,cols:{cols:12,md:6},props:{items:["São Paulo","Rio de Janeiro","Belo Horizonte","Curitiba","Porto Alegre"]}}]),e=f({fix_phone:"11 1234-5678",cellphone:"11 98765-4321",email:"paciente@test.com",adress_type:"Residencial",cep:"12345-678",aditional_adress:"Rua XPTO",number:"30",complement:"Apto 123",uf:"SP",city:"São Paulo"});return(a,r)=>(g(),S("div",null,[sa,ia,i(xe,{class:"mt-5",form:u.value,modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=l=>e.value=l)},null,8,["form","modelValue"]),i(z,{justify:"center"},{default:c(()=>[i(F,{cols:"12",md:"5"},{default:c(()=>[i(B,{block:"",rounded:"lg",color:"primary",onClick:r[1]||(r[1]=l=>a.$emit("next"))},{default:c(()=>[I("Continuar")]),_:1})]),_:1})]),_:1})]))}}),ua=Object.freeze(Object.defineProperty({__proto__:null,default:ra},Symbol.toStringTag,{value:"Module"})),ca=p("p",null,"É muito importante que estas informações estejam corretas.",-1),da=p("p",null," Elas serão utilizadas para sua identificação em todos os processos dentro do hospital. ",-1),ma=O({__name:"PatientInfo",props:{data:{}},emits:["to"],setup(t,{emit:u}){var o,n,v;const e=u,a=t,r=f(),l=f({id:(o=a.data.patient)==null?void 0:o.id,first_name:((n=a.data.patient)==null?void 0:n.first_name)+" da Silva Santos",sex:((v=a.data.patient)==null?void 0:v.sex)??"Masculino",civil_state:"Solteiro",nacionality:"Brasileiro",religion:"Católico",gender:"Outro"}),d=f([{component:"VTextField",value:"id",label:"CPF",required:!0,cols:{cols:12,md:4},props:{disabled:!0}},{component:"VTextField",value:"first_name",label:"Nome completo",required:!0,cols:{cols:12,md:4}},{component:"VTextField",value:"social_name",label:"Nome socia",cols:{cols:12,md:4}},{component:"VAutocomplete",value:"sex",label:"Sexo",required:!0,cols:{cols:12,md:4},props:{items:["Masculino","Feminino"]}},{component:"VAutocomplete",value:"gender",label:"Gênero",cols:{cols:12,md:4},props:{items:["Outro","Lésbica","Bissexual","Transexual","Travesti"]}},{component:"VTextField",value:"rg",label:"RG",required:!0,cols:{cols:12,md:4}},{component:"VAutocomplete",value:"civil_state",label:"Estado civil",required:!0,cols:{cols:12,md:4},props:{items:["Solteiro","Casado","Divorciado","Viúvo"]}},{component:"VAutocomplete",value:"nacionality",label:"Nacionalidade",required:!0,cols:{cols:12,md:4},props:{items:["Brasileiro","Americano","Alemão","Francês","Italiano","Japonês","Chinês","Coreano","Outro"]}},{component:"VAutocomplete",value:"religion",label:"Religião",required:!0,cols:{cols:12,md:4},props:{items:["Católico","Evangélico","Espírita","Ateu","Agnóstico","Outro"]}}]);function s(){r.value.validate()&&e("to","ContactInfo")}return(_,h)=>{var T;return g(),S("div",null,[p("h2",null,[p("b",null,P((T=_.data.patient)==null?void 0:T.first_name),1),I(", revise suas informações pessoais.")]),ca,da,i(Oe,{ref_key:"formElement",ref:r,onSubmit:Tt(s,["prevent"])},{default:c(()=>[i(xe,{class:"mt-5",modelValue:l.value,"onUpdate:modelValue":h[0]||(h[0]=j=>l.value=j),form:d.value},null,8,["modelValue","form"]),i(z,{justify:"center"},{default:c(()=>[i(F,{cols:"12",md:"5"},{default:c(()=>[i(B,{type:"submit",block:"",rounded:"lg",color:"primary"},{default:c(()=>[I("Continuar")]),_:1})]),_:1})]),_:1})]),_:1},512)])}}}),va=Object.freeze(Object.defineProperty({__proto__:null,default:ma},Symbol.toStringTag,{value:"Module"}));function fa(t){return new Promise((u,e)=>{setTimeout(()=>{if(console.log(t),t.patient_id=="44444444444")return e("Não foi possível gerar a sua senha");u({data:{value:"C219",site:"Barra da Tijuca"}})},2e3)})}const pa=t=>($t("data-v-80568fcc"),t=t(),Lt(),t),_a=pa(()=>p("h1",{class:"text-center"}," Escolha seu tipo de prioridade: ",-1)),ga={class:"mr-2"},ha={class:"font-weight-bold"},ba=O({__name:"AttendanceType",props:{totem:{},data:{}},emits:["alert","next","cancel","loading","update:data"],setup(t,{emit:u}){const e=t,a=u,r=C({get:()=>e.data,set:d=>a("update:data",d)});async function l(d){var o;const s={queue_id:d.integration_id,patient_id:(o=r.value.patient)==null?void 0:o.id};a("loading",{text:"Gerando senha",async callback(n){fa(s).then(v=>{r.value.ticket=v.data,n.value=!1,a("next")}).catch(v=>{n.value=!1,a("alert",{title:v,text:"Fale com a recepção para prosseguir com o seu atendimento",action:{type:"confirm",label:"Ok, entendi",callback(){a("cancel")}}})})}})}return(d,s)=>(g(),S("div",null,[i(z,null,{default:c(()=>[i(F,{cols:"12"},{default:c(()=>[_a]),_:1}),(g(!0),S(N,null,X(r.value.queue.attendance_types,(o,n)=>(g(),M(F,{cols:"12",md:"4",key:n},{default:c(()=>[H((g(),M(ce,{onClick:v=>l(o),color:"transparent",style:{cursor:"pointer","white-space":"normal"},border:"sm",rounded:"",class:"pa-6 d-flex align-center",link:"",height:d.$vuetify.display.mdAndUp?"300":"auto"},{default:c(()=>[p("div",null,[p("div",ga,[i(W,{src:o.data.icon,width:"64",height:"64"},null,8,["src"])]),p("h2",ha,P(o.data.name),1),p("p",null,P(o.data.description),1)])]),_:2},1032,["onClick","height"])),[[se]])]),_:2},1024))),128))]),_:1})]))}}),ya=ie(ba,[["__scopeId","data-v-80568fcc"]]),ka=Object.freeze(Object.defineProperty({__proto__:null,default:ya},Symbol.toStringTag,{value:"Module"})),xa={key:0,class:"font-weight-bold text-secondary text-h4"},wa=O({__name:"Timer",props:{time:{default:15},hideNumber:{type:Boolean,default:!1},startManual:{type:Boolean,default:!1}},emits:["end"],setup(t,{expose:u,emit:e}){const a=t,r=e;u({start:v});const l=f(a.time),d=f(),s=f();G(a,(_,h)=>{_.time<h.time||(l.value=a.time,o(),v())});function o(){clearInterval(d.value),clearTimeout(s.value)}const n=C(()=>l.value*100/a.time);function v(){d.value=setInterval(()=>{l.value--},1e3),s.value=setTimeout(()=>{clearInterval(d.value),r("end")},a.time*1e3)}return q(()=>{a.startManual||v()}),(_,h)=>(g(),M($e,{class:"progress",height:"6",modelValue:n.value,"onUpdate:modelValue":h[0]||(h[0]=T=>n.value=T),color:"primary"},{default:c(()=>[_.hideNumber?A("",!0):(g(),S("span",xa,P(l.value),1))]),_:1},8,["modelValue"]))}}),de=ie(wa,[["__scopeId","data-v-4807d716"]]),De="data:image/svg+xml,%3csvg%20width='113'%20height='112'%20viewBox='0%200%20113%20112'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M103.167%2051.7067V56C103.161%2066.0633%2099.9025%2075.8552%2093.8771%2083.9152C87.8516%2091.9752%2079.3822%2097.8716%2069.7318%20100.725C60.0815%20103.578%2049.7674%20103.236%2040.3277%2099.7481C30.888%2096.2606%2022.8286%2089.8151%2017.3513%2081.373C11.8741%2072.9308%209.27252%2062.9443%209.93465%2052.9028C10.5968%2042.8613%2014.4871%2033.3029%2021.0255%2025.653C27.5638%2018.0032%2036.3998%2012.6718%2046.2157%2010.454C56.0316%208.23626%2066.3014%209.25092%2075.4935%2013.3467'%20stroke='%2304B300'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M103.167%2018.6665L56.5%2065.3798L42.5%2051.3798'%20stroke='%2304B300'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Ca={key:0},Sa={key:1,class:"fill-height d-flex align-center justify-center flex-column"},Va=["src"],Ta=p("h1",{class:"text-success"},"Senha gerada com sucesso! :)",-1),$a=p("p",null,"Retire sua senha e aguarde ser chamado pelo painel da recepção.",-1),La={class:"w-100"},ja=["src"],Pa=O({__name:"PasswordSuccess",props:{data:{}},emits:["alert","next","cancel","loading"],setup(t,{emit:u}){const e=t,a=C(()=>{const n=new URLSearchParams(e.data.ticket);return `https://j-yoharu.github.io/qwert/#/senha?${n.toString()}`}),r=u,l=f(null),d=f(!1),s=C(()=>"api"in window);function o(){r("loading",{text:"Aguarde só mais um instante",callback(n){window.api.print(JSON.parse(JSON.stringify(e.data.ticket))).then(()=>{var v;d.value=!1,n.value=!1,(v=l.value)==null||v.start()}).catch(v=>{var _;r("alert",{title:"Ops, Não foi possível imprimir a senha! :(",text:`Por favor, anote o número abaixo <br/> <h1> ${(_=e.data.ticket)==null?void 0:_.value} </h1> Já acionamos a equipe responsavel para cuidar disso`,action:{type:"confirm",label:"Já anotei a minha senha",callback(){r("cancel"),d.value=!1,n.value=!1}}})})}})}return re(()=>{if(s.value)return o()}),q(async()=>{var n;await Le(),s.value||(d.value=!1,(n=l.value)==null||n.start())}),(n,v)=>d.value?(g(),S("div",Ca)):(g(),S("div",Sa,[p("div",null,[p("img",{src:ue(De)},null,8,Va)]),Ta,$a,p("div",La,[i(de,{"hide-number":"","start-manual":"",time:15,ref_key:"timer",ref:l,onEnd:v[0]||(v[0]=_=>n.$emit("next")),class:"mt-4"},null,512)]),s.value?A("",!0):(g(),S("iframe",{key:0,src:a.value,frameborder:"0",class:"rounded-xl border mt-6",height:"200"},null,8,ja))]))}}),Ia=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"})),Ba=p("h1",null,"O que você deseja fazer hoje?",-1),Ma={class:"mr-2"},Oa={class:"font-weight-medium"},Da=O({__name:"Queues",props:{totem:{},data:{}},emits:["alert","next","cancel","update:data"],setup(t,{emit:u}){const e=u,a=t,r=C({get:()=>a.data,set:s=>e("update:data",s)});function l(s){const o=new Date().getDay(),n=s.attendance_hours.find(v=>v.weekday_iso==o);if(n){if(!d(n==null?void 0:n.start_time,n==null?void 0:n.end_time))return e("alert",{title:"Ops, infelizmente já passamos do horário de atendimento! :(",text:`O horário de atendimento é das ${n.start_time} às ${n.end_time} <br/> ${s.off_hours_message??""}`,action:{type:"confirm",label:"Ok, entendi",callback(){e("cancel")}}});r.value.queue=s,e("next")}}function d(s,o){const n=new Date,v=new Date,_=new Date,[h,T]=s.split(":"),[j,$]=o.split(":");return v.setHours(parseInt(h),parseInt(T)),_.setHours(parseInt(j),parseInt($)),n>=v&&n<=_}return(s,o)=>(g(),S("div",null,[i(z,null,{default:c(()=>[i(F,{cols:"12",class:"text-center"},{default:c(()=>[Ba]),_:1}),i(z,{justify:"center","no-gutters":""},{default:c(()=>[(g(!0),S(N,null,X(s.totem.queues,(n,v)=>(g(),M(F,{cols:"12",md:"auto",key:v,class:"d-flex justify-center ma-1"},{default:c(()=>[H((g(),M(ce,{color:"transparent",onClick:_=>l(n),style:{cursor:"pointer","white-space":"normal"},border:"sm",rounded:"",class:"d-flex pa-6",link:"","min-height":"80","max-width":"342","min-width":"300",click:"checkQueue(queue)"},{default:c(()=>{var _,h;return[p("div",Ma,[i(W,{src:(_=n.data)==null?void 0:_.icon_src,width:"32",height:"32"},null,8,["src"])]),p("p",Oa,P((h=n.data)==null?void 0:h.name),1)]}),_:2},1032,["onClick"])),[[se]])]),_:2},1024))),128))]),_:1})]),_:1})]))}}),Ra=Object.freeze(Object.defineProperty({__proto__:null,default:Da},Symbol.toStringTag,{value:"Module"})),Fa={class:"fill-height d-flex justify-center align-center"},Aa=p("h1",{class:"text-success text-center"}," Você realizou o check-in rápido! :) ",-1),Ea=p("p",{class:"text-center"}," Com esse benefício você não precisa mais enfrentar filas, basta aguardar ser chamado por seu médico pelo painel. ",-1),za=O({__name:"CheckinSuccess",emits:["cancel"],setup(t){return(u,e)=>(g(),S("div",Fa,[p("div",null,[i(W,{height:"112",src:ue(De),class:"mb-4"},null,8,["src"]),Aa,Ea,i(de,{"hide-number":"",timer:20,class:"mt-4",onEnd:e[0]||(e[0]=a=>u.$emit("cancel"))})])]))}}),Na=Object.freeze(Object.defineProperty({__proto__:null,default:za},Symbol.toStringTag,{value:"Module"})),qa={class:"d-flex flex-column flex-grow-1"},Ua={class:"text-center"},Ha={class:"text-primary"},Qa={class:"d-flex flex-column flex-grow-1",style:{"flex-grow":"1",background:"#4b4b4b"}},Ga={style:{width:"50%"},class:"d-flex flex-column justify-center align-center flex-grow-1 mx-auto position-relative"},Wa=["src"],Ja={key:1,class:"avatar-capture"},Xa={class:"flex-grow-0"},Za={class:"d-flex"},Y=3,ke=3,Ka=O({__name:"FaceRecognition",props:{data:{}},emits:["alert","next","to"],setup(t,{emit:u}){const e=u,a=t,r=f(null),l=f(!1),d=f(!1),s=f(!1),o=f(null),n=f(0),v=f(ke),_=f(!1),h=C(()=>n.value>=Y?"Limite de tentativas excedido":n.value>0?"Tentar novamente":!l.value&&!o.value?"Iniciar verificação":"Tirar outra foto");function T(){$(),o.value=null}function j(){const k=setInterval(()=>{if(v.value===0){x(),v.value=ke,clearInterval(k);return}v.value--},1e3)}const $=async(k=!0)=>{try{const w=await navigator.mediaDevices.getUserMedia({video:!0});r.value&&(r.value.srcObject=w,k&&(l.value=!0,j()))}catch(w){e("alert",{title:"Erro ao acessar a câmera",text:w,action:{type:"confirm",label:"fechar"}})}};function L(){return new Promise((k,w)=>{try{d.value=!0,setTimeout(()=>{if(!r.value)return;const b=document.createElement("canvas");b.width=r.value.videoWidth,b.height=r.value.videoHeight;const E=b.getContext("2d");E==null||E.drawImage(r.value,0,0,b.width,b.height),k(b.toDataURL("image/png")),d.value=!1},200)}catch(b){w(b)}})}async function x(){if(o.value=await L(),!r.value)return;const k=r.value.srcObject;L(),k.getTracks().forEach(b=>{b.stop()}),r.value.srcObject=null,l.value=!1}function V(){var k;o.value&&(s.value=!0,Qe(o.value,(k=a.data.patient)==null?void 0:k.id).then(w=>{a.data.internal.faceRecognition=o.value,e("next")}).catch(w=>{if(n.value++,_.value=!0,o.value=null,n.value>=Y){e("alert",{title:`Você atingiu ${Y} tentativas de leitura biométrica!`,text:"Deseja tentar com o Token?",action:{type:"choise",rejectLabel:"Ir para recepção",acceptLabel:"Tentar com Token",callback(b){if(!b)return e("to","Queues");e("to","SendToken")}}});return}}).finally(()=>{s.value=!1}))}return je(()=>{x()}),q(()=>{a.data.internal.faceRecognition&&(o.value=a.data.internal.faceRecognition),$(!1)}),(k,w)=>(g(),S("div",qa,[p("h1",Ua,[H(p("span",null,[I(" Capturando em "),p("span",Ha,P(v.value),1)],512),[[oe,l.value]]),H(p("span",null," Posicione-se em frente a câmera ",512),[[oe,!l.value]])]),p("div",Qa,[p("div",Ga,[p("video",{ref_key:"video",ref:r,class:"bg-grey position-absolute",autoplay:"",style:{"object-fit":"fill",left:"0",right:"0",top:"0",bottom:"0",width:"100%",height:"100%"}},null,512),p("div",{class:jt(["cover position-absolute d-flex justify-center align-center",{active:d.value}]),style:{width:"100%",left:"0",right:"0",top:"0",bottom:"0",height:"100%"}},[o.value?(g(),S("img",{key:0,src:o.value,style:{width:"100%",height:"100%"}},null,8,Wa)):(g(),S("div",Ja))],2)])]),p("div",Xa,[p("div",Za,[i(B,{class:"mx-auto px-8 py-2 mt-8",rounded:"",color:"primary",disabled:l.value,onClick:T},{default:c(()=>[I(P(h.value),1)]),_:1},8,["disabled"]),i(B,{loading:s.value,class:"mx-auto px-8 py-2 mt-8",disabled:!o.value,rounded:"",color:"green",onClick:V},{default:c(()=>[I(" Confirmar ")]),_:1},8,["loading","disabled"])])]),i(la,{modelValue:_.value,"onUpdate:modelValue":w[0]||(w[0]=b=>_.value=b),position:"absolute",location:"top right",color:"red"},{default:c(()=>[I(" Faces divergentes, não é a mesma pessoa. Tentativas restantes: "+P(Y-n.value),1)]),_:1},8,["modelValue"])]))}}),Ya=ie(Ka,[["__scopeId","data-v-4a7f690e"]]),en=Object.freeze(Object.defineProperty({__proto__:null,default:Ya},Symbol.toStringTag,{value:"Module"})),tn=O({__name:"IFrameVue",props:{showLoading:{type:Boolean,default:!0}},setup(t){const u=f(!0);return(e,a)=>(g(),S(N,null,[i(Ie,{name:"fade"},{default:c(()=>[e.showLoading&&u.value?(g(),M(ee,{key:0,variant:"tonal",elevation:"5",class:"pa-5 h-100"},{default:c(()=>[Pe(e.$slots,"loading",{loading:u.value},()=>[i(ee,{variant:"outlined",rounded:"0",class:"mx-auto pa-10 h-100",style:{width:"70%"}},{default:c(()=>[i(ee,{variant:"outlined",class:"h-100",rounded:"0"},{default:c(()=>[(g(),S(N,null,X(6,r=>i(aa,{type:r%2==0?"paragraph":"article"},null,8,["type"])),64))]),_:1})]),_:1})])]),_:3})):A("",!0)]),_:3}),H(p("iframe",Q({onLoad:a[0]||(a[0]=r=>u.value=!1)},e.$attrs),null,16),[[oe,!u.value]])],64))}}),an={class:"d-flex justify-end text-h5"},nn={style:{overflow:"scroll",height:"90%"}},on={class:"d-flex align-center h-100",style:{overflow:"scroll"}},ln=O({__name:"GuideCarousel",props:{urls:{}},setup(t){const u=t,e=f(0),a=C(()=>u.urls),r=C(()=>e.value+1),l=C(()=>e.value===a.value.length-1),d=C(()=>e.value===0);return(s,o)=>(g(),S(N,null,[p("div",an,P(r.value)+" / "+P(a.value.length),1),p("div",nn,[p("div",on,[i(B,{color:d.value?"":"primary",size:"large",icon:"mdi-chevron-left",class:"mr-2",onClick:o[0]||(o[0]=n=>e.value--),disabled:d.value},null,8,["color","disabled"]),i(Ge,{class:"h-100","show-arrows":!1,"hide-delimiters":"","hide-delimiter-background":"",modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=n=>e.value=n)},{default:c(()=>[(g(!0),S(N,null,X(a.value,(n,v)=>(g(),M(We,{key:v},{default:c(()=>[i(tn,{src:n+"?page=hsn#toolbar=0",height:"100%",width:"100%",style:{border:"none"}},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["modelValue"]),i(B,{color:l.value?"":"primary",size:"large",icon:"mdi-chevron-right",disabled:l.value,class:"ml-2",onClick:o[2]||(o[2]=n=>e.value++)},null,8,["color","disabled"])])])],64))}}),sn="/qwert/qwert/assets/totem-VpQX9TsR.png",rn="/qwert/qwert/assets/totem-tablet-focus-DjzX2n2c.png",un="/qwert/qwert/assets/tablet-jtXbmNYi.svg";function cn(){const{smAndDown:t,mdAndDown:u,lgAndUp:e,md:a,mobile:r}=Pt(),l=C(()=>["responsive-font"]),d=C(()=>[{"text-h6":t.value,"text-h5":a.value,"text-h4":e.value},"my-4"]),s=C(()=>{switch(!0){case t.value:return"small";case u.value:return"default";default:return"large"}});return{title:l,subtitle:d,btnSize:s,mobile:r}}const dn=p("h1",null,"Assinatura de Guia",-1),mn={key:0},vn=["innerHTML"],fn={key:1},pn=["innerHTML"],_n=O({__name:"HelpSignatureFlow",props:{modelValue:{type:Boolean}},emits:["update:modelValue","end"],setup(t,{emit:u}){const e=t,a=u;cn();const r=f(!1),l=[{text:"Bem-vindo ao nosso sistema de autoatendimento! <br/> Realize a assinatura da sua guia de forma rápida e simples. Siga as etapas abaixo para concluir o processo",image:sn},{text:"No canto esquerdo do totem, você verá um tablet.",image:rn},{text:"Utilize a caneta que está em cima do tablet. <br> Após assinar, toque no botão <strong>'OK'</strong> na tela para confirmar",image:un}],d=f(!1),s=f(0),o=f(null);G(s,k=>{k==l.length-1&&!r.value&&(r.value=!0,a("end",!0))});const n=C(()=>s.value==0),v=C(()=>s.value==l.length-1),_=C(()=>l[s.value]),h=C({get(){return e.modelValue},set(k){a("update:modelValue",k)}}),T=C(()=>_.value.text.split(" ").length),j=C(()=>T.value*500);function $(){clearTimeout(o.value),s.value++}function L(){clearTimeout(o.value),s.value--}function x(k){k&&V(j.value)}function V(k){console.log(`Step: ${_.value.text} 
 reading time second: ${k/1e3}s`),l.length-1!=s.value&&(d.value=!d.value,s.value++)}return(k,w)=>(g(),M(Be,{modelValue:h.value,"onUpdate:modelValue":[w[2]||(w[2]=b=>h.value=b),x],width:"100%",persistent:"",class:"totem"},{default:c(()=>[i(ee,null,{default:c(()=>[i(It,{class:"text-center"},{default:c(()=>[dn]),_:1}),i(Bt,{style:{"overflow-y":"hidden"},class:"d-flex align-center justify-center justify-space-between"},{default:c(()=>[i(B,{fab:"",onClick:L,icon:"mdi-chevron-left",color:"primary",disabled:n.value},null,8,["disabled"]),i(Ie,{name:"slide-up",mode:"out-in"},{default:c(()=>[d.value?(g(),S("div",fn,[p("p",{class:"text-center",innerHTML:_.value.text},null,8,pn),i(W,{src:_.value.image,height:"400"},null,8,["src"])])):(g(),S("div",mn,[p("p",{class:"text-center mt-3",innerHTML:_.value.text},null,8,vn),i(W,{src:_.value.image,height:"400"},null,8,["src"])]))]),_:1}),i(B,{fab:"",onClick:$,icon:"mdi-chevron-right",color:"primary",disabled:v.value},null,8,["disabled"])]),_:1}),i(Mt,{class:"d-flex justify-end"},{default:c(()=>[i(B,{variant:"tonal",color:"primary",class:"pa-1",onClick:w[0]||(w[0]=b=>s.value=l.length-1),disabled:s.value==l.length-1},{default:c(()=>[I(" Pular Ajuda ")]),_:1},8,["disabled"])]),_:1}),s.value!=l.length-1?(g(),M(de,{onTimerEnd:w[1]||(w[1]=b=>V(j.value)),key:s.value,time:j.value/1e3,"hide-number":""},null,8,["time"])):A("",!0)]),_:1})]),_:1},8,["modelValue"]))}});function gn(){return new Promise((t,u)=>{setTimeout(()=>t({data:{nr_sequencia_autor:"6546748",guia:{nr_guia:5087294,nr_prescricao:19828424,codigomensagem:"0",ds_mensagem:"Guia assinada com sucesso"}}}),4e3)})}const hn={class:"fill-height"},bn=O({__name:"PDFSignature",props:{data:{}},emits:["update:data","next","cancel","alert","loading","to"],setup(t,{emit:u}){const e=t,a=u,r=f(!1),l=f(!1),d=C(()=>{var o;return((o=e.data.patient)==null?void 0:o.schedules.map(n=>{var v;return(v=n.guide)==null?void 0:v.url}).filter(n=>n))??[]});function s(){r.value=!0,gn().then(o=>{a("next")}).catch(o=>{l.value=!1,a("alert",o)}).finally(()=>{r.value=!1})}return q(()=>{d.value.length||a("to","Queues")}),(o,n)=>(g(),S("div",hn,[i(ln,{urls:d.value},{append:c(()=>[]),_:1},8,["urls"]),i(B,{block:"",disabled:r.value,loading:r.value,size:"x-large",color:"primary",onClick:n[0]||(n[0]=v=>l.value=!0)},{default:c(()=>[I(" Clique para assinar a guia do convênio ")]),_:1},8,["disabled","loading"]),i(_n,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=v=>l.value=v),onEnd:s},null,8,["modelValue"])]))}}),yn=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"}));function kn(t){return new Promise((u,e)=>{setTimeout(()=>t=="123456"?u({data:!0}):e({data:{message:"Token inválido",maxAttempts:me--}}),1e3)})}function xn(){return new Promise(t=>{setTimeout(()=>t({data:!0}),1e3)})}var me=2;function wn(t){return new Promise((u,e)=>{setTimeout(()=>t=="123456"?u({data:!0}):e({data:{message:"Token inválido",maxAttempts:me--}}),4e3)})}function Cn(){me=2}const Sn={key:0},Vn=p("p",{class:"mt-10"}," Caso não tenha acesso ao código ou seu número esteja incorreto, volte uma etapa para tentar a leitura biométrica ou pule o check-in para passar na recepção. ",-1),Tn=O({__name:"SendToken",props:{data:{}},emits:["update:data","next","cancel","alert","loading","to"],setup(t,{emit:u}){const e=t,a=u,r=C({get:()=>e.data,set:x=>a("update:data",x)}),l=f({data:"",wasSended:!1,isValid:!1,expiration:10,timer:0,sendLoading:!1,timesItWasSend:0}),d=f(),s=f(),o=f(!1),n=C(()=>l.value.timesItWasSend<=1?"Não recebi o código":"Reenviar código");function v(x,V){return V.length<x?`Mínimo de ${x} caracteres`:!0}function _(x){return x.length==7&&l.value.wasSended&&!l.value.isValid?"Token inválido":!0}function h(){return l.value.data.replace(/\D/g,"")}const T=f(!1);function j(){o.value=!0,kn(h()).then(()=>{a("loading",{text:"Aguardando autorização da operadora",callback(x){wn(h()).then(()=>{x.value=!1,a("next")}).catch(V=>{var k,w;x.value=!1,a("alert",{title:`Ops, ${(w=(k=V.response)==null?void 0:k.data)==null?void 0:w.message} :(`,text:"Tente novamente",action:{type:"choise",acceptLabel:"Ok, entendi",rejectLabel:"Finalizar",callback(b){if(!b)return a("cancel");a("to","Queues")}}})})}})}).catch(x=>{var V;if(console.log({error:x}),l.value.wasSended=!0,l.value.isValid=!1,d.value.validate(),x.data.maxAttempts<=0){const k={title:"Você atingiu o limite de tentativas",text:"Vamos te encaminhar para a recepção :)"};if((V=r.value.patient)!=null&&V.has_face_recognition)return a("alert",{...k,action:{type:"choise",acceptLabel:"Ir para recepção",rejectLabel:"Tentar com biometria facial",callback(w){if(!w)return a("to","FaceRecognition");a("to","Queues")}}});a("alert",{...k,action:{type:"confirm",label:"Ok, entendi",callback(){a("to","Queues")}}})}}).finally(()=>o.value=!1)}function $(){var V,k;L();const x={title:`Enviamos um novo código SMS para o seu celular com o final ${(V=r.value.patient)==null?void 0:V.phone_hint} e para o seu app :)`,text:""};if((k=r.value.patient)!=null&&k.has_face_recognition)return a("alert",{...x,action:{type:"choise",acceptLabel:"Continuar",rejectLabel:"Tentar com biometria facial",callback(w){if(!w)return a("to","FaceRecognition");l.value.data="",d.value.resetValidation(),setTimeout(()=>s.value.focus(),500)}}});a("alert",{...x,action:{type:"choise",acceptLabel:"Continuar",rejectLabel:"Ir para recepção",callback(w){if(!w)return a("to","Queues");l.value.data="",d.value.resetValidation(),setTimeout(()=>s.value.focus(),500)}}})}function L(){l.value.timesItWasSend++,l.value.sendLoading=!0,xn().then(()=>{if(l.value.timesItWasSend<=1){l.value.sendLoading=!1;return}l.value.timer=l.value.expiration;const x=setInterval(()=>{if(l.value.timer==0)return l.value.sendLoading=!1,clearInterval(x);l.value.timer--},1e3)}).catch(x=>{console.log({errorSendToken:x})})}return q(()=>{L()}),(x,V)=>{const k=Ht,w=Ot("mask");return g(),S("div",null,[i(z,{justify:"center"},{default:c(()=>[i(F,{cols:"12"},{default:c(()=>{var b;return[p("h1",null," Enviamos um código SMS para o seu celular com final "+P((b=r.value.patient)==null?void 0:b.phone_hint)+" e para o seu app. ",1)]}),_:1}),i(F,{cols:"12",md:"8",lg:"7"},{default:c(()=>[i(Oe,{modelValue:T.value,"onUpdate:modelValue":V[2]||(V[2]=b=>T.value=b),"lazy-validation":"",ref_key:"formElement",ref:d},{default:c(()=>[H(i(Gt,{"onUpdate:modelValue":[V[0]||(V[0]=b=>l.value.wasSended=!1),V[1]||(V[1]=b=>l.value.data=b)],ref_key:"inputElement",ref:s,"validate-on":"input",modelValue:l.value.data,number:"",rules:[ue(Qt),b=>v(6,h()),_],placeholder:"000-000"},null,8,["modelValue","rules"]),[[w,"###-###"]])]),_:1},8,["modelValue"]),i(z,{class:"d-flex",dense:"",justify:"center"},{default:c(()=>[i(F,{cols:"12",md:"7"},{default:c(()=>[i(B,{rounded:"",variant:"outlined",class:"mr-4",onClick:$,disabled:l.value.sendLoading},{default:c(()=>[I(P(n.value),1)]),_:1},8,["disabled"]),l.value.timer>0?(g(),S("div",Sn," Seu código expira em 0:"+P(l.value.timer.toString().padStart(2,"0")),1)):A("",!0)]),_:1}),i(F,{cols:"12",md:"5"},{default:c(()=>[i(B,{color:"primary",onClick:j,disabled:!T.value||l.value.data.length!=7||o.value,loading:o.value,rounded:""},{default:c(()=>[I(" Continua ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),Vn,i(B,{variant:"text",class:"mt-4 text-primary",onClick:V[3]||(V[3]=b=>x.$emit("to","Queues"))},{default:c(()=>[I(" Pular check-in rápido ")]),_:1})]),_:1}),i(F,{cols:"12",md:"4",lg:"5",class:"d-flex justify-center"},{default:c(()=>[i(k,{"always-visible":""})]),_:1})]),_:1})])}}}),$n=Object.freeze(Object.defineProperty({__proto__:null,default:Tn},Symbol.toStringTag,{value:"Module"})),Ln="data:image/svg+xml,%3csvg%20width='65'%20height='64'%20viewBox='0%200%2065%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.8333%208H21.3C16.8196%208%2014.5794%208%2012.8681%208.87195C11.3628%209.63893%2010.1389%2010.8628%209.37195%2012.3681C8.5%2014.0794%208.5%2016.3196%208.5%2020.8V21.3333M21.8333%2056H21.3C16.8196%2056%2014.5794%2056%2012.8681%2055.1281C11.3628%2054.3611%2010.1389%2053.1372%209.37195%2051.6319C8.5%2049.9206%208.5%2047.6804%208.5%2043.2V42.6667M56.5%2021.3333V20.8C56.5%2016.3196%2056.5%2014.0794%2055.6281%2012.3681C54.8611%2010.8628%2053.6372%209.63894%2052.1319%208.87195C50.4206%208%2048.1804%208%2043.7%208H43.1667M56.5%2042.6667V43.2C56.5%2047.6804%2056.5%2049.9206%2055.6281%2051.6319C54.8611%2053.1372%2053.6372%2054.3611%2052.1319%2055.1281C50.4206%2056%2048.1804%2056%2043.7%2056H43.1667M20.5%2021.3333V25.3333M44.5%2021.3333V25.3333M29.8333%2033.6003C31.9667%2033.6003%2033.8333%2031.7336%2033.8333%2029.6003V21.3333M41.0339%2040.5332C36.2339%2045.3332%2028.5005%2045.3332%2023.7005%2040.5332'%20stroke='%23FC4C02'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",jn="data:image/svg+xml,%3csvg%20width='65'%20height='64'%20viewBox='0%200%2065%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M59.1667%2029.3334V21.8667C59.1667%2018.8798%2059.1667%2017.3863%2058.5854%2016.2454C58.074%2015.2419%2057.2581%2014.426%2056.2546%2013.9147C55.1138%2013.3334%2053.6203%2013.3334%2050.6333%2013.3334H14.3667C11.3797%2013.3334%209.88624%2013.3334%208.74538%2013.9147C7.74185%2014.426%206.92595%2015.2419%206.41463%2016.2454C5.83333%2017.3863%205.83333%2018.8798%205.83333%2021.8667V31.4667C5.83333%2034.4537%205.83333%2035.9471%206.41463%2037.088C6.92595%2038.0915%207.74185%2038.9074%208.74538%2039.4187C9.88624%2040%2011.3797%2040%2014.3667%2040H29.8333M32.5%2026.6667H32.5133M45.8333%2026.6667H45.8467M19.1667%2026.6667H19.18M51.8333%2045.3334V40.6667C51.8333%2038.0894%2049.744%2036%2047.1667%2036C44.5893%2036%2042.5%2038.0894%2042.5%2040.6667V45.3334M33.1667%2026.6667C33.1667%2027.0349%2032.8682%2027.3334%2032.5%2027.3334C32.1318%2027.3334%2031.8333%2027.0349%2031.8333%2026.6667C31.8333%2026.2985%2032.1318%2026%2032.5%2026C32.8682%2026%2033.1667%2026.2985%2033.1667%2026.6667ZM46.5%2026.6667C46.5%2027.0349%2046.2015%2027.3334%2045.8333%2027.3334C45.4651%2027.3334%2045.1667%2027.0349%2045.1667%2026.6667C45.1667%2026.2985%2045.4651%2026%2045.8333%2026C46.2015%2026%2046.5%2026.2985%2046.5%2026.6667ZM19.8333%2026.6667C19.8333%2027.0349%2019.5349%2027.3334%2019.1667%2027.3334C18.7985%2027.3334%2018.5%2027.0349%2018.5%2026.6667C18.5%2026.2985%2018.7985%2026%2019.1667%2026C19.5349%2026%2019.8333%2026.2985%2019.8333%2026.6667ZM42.1%2056H52.2333C53.7268%2056%2054.4735%2056%2055.044%2055.7094C55.5457%2055.4537%2055.9537%2055.0458%2056.2093%2054.544C56.5%2053.9736%2056.5%2053.2268%2056.5%2051.7334V49.6C56.5%2048.1066%2056.5%2047.3598%2056.2093%2046.7894C55.9537%2046.2876%2055.5457%2045.8797%2055.044%2045.624C54.4735%2045.3334%2053.7268%2045.3334%2052.2333%2045.3334H42.1C40.6065%2045.3334%2039.8598%2045.3334%2039.2894%2045.624C38.7876%2045.8797%2038.3796%2046.2876%2038.124%2046.7894C37.8333%2047.3598%2037.8333%2048.1066%2037.8333%2049.6V51.7334C37.8333%2053.2268%2037.8333%2053.9736%2038.124%2054.544C38.3796%2055.0458%2038.7876%2055.4537%2039.2894%2055.7094C39.8598%2056%2040.6065%2056%2042.1%2056Z'%20stroke='%23FC4C02'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Pn=["src"],In=O({__name:"Signature",props:{subScreens:{},data:{},screen:{},traits:{}},emits:["alert","next","to"],setup(t,{emit:u}){const e=t,a=u,r=f(!0),l=Dt([{click:()=>a("to","FaceRecognition"),title:"Assinatura PDF Biometria facial",image:Ln,show:e.data.patient.has_face_recognition,trait:"faceRecognition"},{click:()=>a("to","SendToken"),title:"Token via SMS ou App",show:!0,image:jn,trait:"sendToken"},{click:()=>a("to","PDFSignature"),title:"Assinatura do PDF",show:!0,icon:"mdi-file-pdf-box",trait:"pdfSignature"}]);function d(s){var o;return((o=e.traits)==null?void 0:o.some(n=>n.data.slug===s&&n.enabled))??!1}return re(()=>{var s;if(!((s=e.data.patient)!=null&&s.has_face_recognition))return a("alert",{title:"Como gostaria de realizar o seu check-in?",text:"",action:{type:"choise",acceptLabel:"Agilizar com token",rejectLabel:"Ir para recepção",callback(o){if(o)return a("to","SendToken");a("to","Queues")}}});r.value=!1}),(s,o)=>(g(),S("div",null,[r.value?A("",!0):(g(),M(z,{key:0,justify:"center"},{default:c(()=>[(g(!0),S(N,null,X(l,n=>(g(),M(F,{cols:"12",sm:"auto"},{default:c(()=>[n.show&&d(n.trait)?H((g(),M(ce,{key:0,onClick:v=>n.click(),height:"200",style:{cursor:"pointer","white-space":"normal"},width:"280",class:"d-flex align-start justify-center flex-column px-4 py-10",color:"transparent",border:"sm",rounded:"lg"},{default:c(()=>[n.image?(g(),S("img",{key:0,src:n.image,height:"64"},null,8,Pn)):(g(),M(Me,{key:1,icon:n.icon,size:"64",color:"primary"},null,8,["icon"])),I(" "+P(n.title),1)]),_:2},1032,["onClick"])),[[se]]):A("",!0)]),_:2},1024))),256)),i(F,{cols:"12",md:"10"},{default:c(()=>[i(B,{block:"",rounded:"",variant:"outlined",class:"mt-6",onClick:o[0]||(o[0]=n=>s.$emit("to","Queues"))},{default:c(()=>[I(" Pular checkin e ir para a recepção ")]),_:1})]),_:1})]),_:1}))]))}}),Bn=Object.freeze(Object.defineProperty({__proto__:null,default:In},Symbol.toStringTag,{value:"Module"})),Mn={class:"d-flex bg-white align-center justify-center fill-height w-100"},On={class:"text-center mb-6",style:{"font-size":"1.4em"}},Dn={class:"font-weight-bold"},Rn=["innerHTML"],Fn={key:0,class:"d-flex justify-center"},An={key:1,class:"d-flex justify-center"},En=O({__name:"ConfirmAlert",props:{modelValue:{type:Boolean},title:{},action:{},text:{}},emits:["update:modelValue"],setup(t,{emit:u}){const e=t,a=u,r=C({get(){return e.modelValue},set(s){a("update:modelValue",s)}});function l(s=!0){var o;if(r.value=!1,e.action.type==="choise"){e.action.callback(s);return}(o=e.action)!=null&&o.callback&&e.action.callback()}const d=C(()=>e.text instanceof Error?e.text.message:e.text);return(s,o)=>(g(),M(Be,{modelValue:r.value,"onUpdate:modelValue":o[3]||(o[3]=n=>r.value=n),persistent:"",fullscreen:"",class:"totem"},{default:c(()=>[i(Wt,{class:"bg-white"},{default:c(()=>[p("div",Mn,[p("div",null,[p("p",On,[p("span",Dn,P(s.title),1),p("div",{innerHTML:d.value},null,8,Rn)]),s.action.type=="choise"?(g(),S("div",Fn,[p("div",null,[i(B,{variant:"outlined",color:"primary",class:"mr-2","min-width":"350",rounded:"",onClick:o[0]||(o[0]=n=>l(!1))},{default:c(()=>[I(P(s.action.rejectLabel),1)]),_:1}),i(B,{variant:"flat","min-width":"350",rounded:"",color:"primary",onClick:o[1]||(o[1]=n=>l())},{default:c(()=>[I(P(s.action.acceptLabel),1)]),_:1})])])):(g(),S("div",An,[i(B,{ariant:"flat",rounded:"",width:"350",color:"primary",onClick:o[2]||(o[2]=n=>l())},{default:c(()=>[I(P(s.action.label),1)]),_:1})]))])])]),_:1})]),_:1},8,["modelValue"]))}}),zn={class:"d-flex justify-space-between mb-4"},Nn=p("span",{class:"font-weight-bold"},"Voltar",-1),qn={key:1},Un=p("span",{class:"font-weight-bold"},"Cancelar",-1),Hn={style:{width:"80%"},class:"mx-auto flex-grow-1 d-flex flex-column"},Qn={class:"text-center"},Gn=O({__name:"Default",props:{hideBack:{type:Boolean,default:!1},hideCancel:{type:Boolean,default:!1}},emits:["cancel","back"],setup(t,{expose:u,emit:e}){const a=e;Rt();const r=f({}),l=C(()=>Et);f(!1);const d=C(()=>{const _=new Date,h=_.toLocaleDateString("pt-BR",{day:"2-digit"}),T=_.toLocaleDateString("pt-BR",{month:"long"}),j=_.toLocaleDateString("pt-BR",{year:"numeric"});return`${h} de ${Xt(T)} de ${j}`}),s=f("");let o=0;function n(){s.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});const _=new Date,h=6e4-(_.getSeconds()*1e3+_.getMilliseconds());setTimeout(()=>{s.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),o=setInterval(()=>{s.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})},6e4)},h)}function v(_){r.value=_}return u({setStyles:v}),q(()=>{n()}),je(()=>{clearInterval(o)}),(_,h)=>(g(),S("div",{class:"d-flex flex-column flex-grow-1 totem",style:At(r.value),fluid:""},[p("div",zn,[_.hideBack?A("",!0):(g(),M(B,{key:0,variant:"text",color:"primary",onClick:h[0]||(h[0]=T=>a("back"))},{default:c(()=>[i(Me,{class:"mr-2",size:"30"},{default:c(()=>[I("mdi-chevron-left")]),_:1}),Nn]),_:1})),i(he),_.$vuetify.display.xs?A("",!0):(g(),S("div",qn,[i(W,{src:l.value,width:"194"},null,8,["src"])])),i(he),_.hideCancel?A("",!0):(g(),M(B,{key:2,variant:"text",color:"primary",onClick:h[1]||(h[1]=T=>a("cancel"))},{default:c(()=>[Un]),_:1}))]),p("div",Hn,[Pe(_.$slots,"default")]),p("div",Qn,[i(Ft,{class:"my-4"}),I(" "+P(d.value)+" - "+P(s.value),1)])],4))}}),po=O({__name:"NewFlow",setup(t){f("");const u=f(!1),e=f(!1),a=f(),r=f({title:"",text:"",action:{type:"confirm",label:"Ok"}}),l=f({text:"",callback:m=>{}}),d=f([]),s=f(""),o=f({internal:{}}),n=zt(),v=Nt(),_=C(()=>v.params.id),h=f(structuredClone(Zt.totem)),T=le({}),j=f({hideBack:!0,hideCancel:!0}),$=f(0),L=f(""),x=f(null),V=f(60*5),k=C(()=>h.value.screens[$.value]),w=C(()=>{var m;if(L.value!=="")return fe((m=k.value)==null?void 0:m.data,L.value)}),b=C(()=>{var m;return a.value&&a.value.setStyles({}),L.value===""?(m=k.value)==null?void 0:m.data:w.value}),E=C(()=>b.value?(T.value[b.value.component]||ve("component-not-found"),T.value[b.value.component]):T.value.Loading);G($,m=>{if(m==0)return j.value={hideBack:!0,hideCancel:!0};j.value={hideBack:!1,hideCancel:!1}}),G(b,(m,y)=>{(m==null?void 0:m.component)===s.value||!(y!=null&&y.component)&&s.value===""||$.value!==0&&d.value.push(y.component)});const U=Object.assign({"/src/modules/patient/views/totem/BirthDate.vue":Je,"/src/modules/patient/views/totem/Evaluation.vue":Xe,"/src/modules/patient/views/totem/Identifier.vue":Ze,"/src/modules/patient/views/totem/Init.vue":Ke,"/src/modules/patient/views/totem/Loading.vue":Ye,"/src/modules/patient/views/totem/PatientInfo/ContactInfo.vue":ua,"/src/modules/patient/views/totem/PatientInfo/PatientInfo.vue":va,"/src/modules/patient/views/totem/Queues/AttendanceType.vue":ka,"/src/modules/patient/views/totem/Queues/PasswordSuccess.vue":Ia,"/src/modules/patient/views/totem/Queues/Queues.vue":Ra,"/src/modules/patient/views/totem/Schedule.vue":et,"/src/modules/patient/views/totem/Signature/CheckinSuccess.vue":Na,"/src/modules/patient/views/totem/Signature/FaceRecognition.vue":en,"/src/modules/patient/views/totem/Signature/PDFSignature.vue":yn,"/src/modules/patient/views/totem/Signature/SendToken.vue":$n,"/src/modules/patient/views/totem/Signature/Signature.vue":Bn,"/src/modules/patient/views/totem/Welcome.vue":tt});Ue(),re(()=>{Kt(_.value).then(m=>{h.value=m.data}).catch(m=>{ne({title:"Falha ao encontrar o totem",text:m.response.data.message,action:{type:"confirm",label:"Ok",callback(){n.push({name:"totem.view"})}}})})}),q(()=>{window.addEventListener("click",K),window.addEventListener("keydown",K)}),qt(()=>{window.removeEventListener("click",K),window.removeEventListener("keydown",K),x.value!==null&&clearTimeout(x.value)});function Z(m){console.log("open loading"),console.log(m),e.value=!0,l.value=m,m.callback(e)}function ae(){$.value=0,L.value="",o.value={internal:{}},s.value="",d.value=[],Cn()}function Re(){if(d.value.length===0)return;s.value=d.value.pop();const m=qe(s.value);m&&($.value=m.index,L.value=m.subScreenComponent)}function Fe(){var y;const m=pe((y=k.value)==null?void 0:y.data,w.value);if(!m){Ae();return}L.value=m.component}function Ae(){if(L.value="",$.value==h.value.screens.length-1){$.value=0;return}$.value++}function Ee(m){var D;const y=fe((D=k.value)==null?void 0:D.data,m);if(y){L.value=y.component;return}ze(m)}function ze(m){const y=Ne(m);if(!y)return ve("flow-not-found");L.value="",$.value=h.value.screens.indexOf(y)}function ne(m){r.value=m,u.value=!0}function ve(m){ne({title:"Erro de sistema",text:`Favor entrar em contato com a equipe de TI. (erro: ${m})`,action:{type:"confirm",label:"Ok"}})}const K=()=>{x.value!==null&&clearTimeout(x.value),x.value=window.setTimeout(()=>{$.value!==0&&ae()},V.value*1e3)};function fe(m,y){return m.subscreens.find(D=>D.component===y)}function Ne(m){return h.value.screens.find(y=>y.data.component===m)}function qe(m){let y=null;for(let D=0;D<h.value.screens.length;D++){const R=h.value.screens[D];if(R.data.component===m){y={index:D,subScreenComponent:""};break}for(let J=0;J<R.data.subscreens.length;J++){const _e=R.data.subscreens[J];if(_e.component===m){y={index:D,subScreenComponent:_e.component};break}}if(y)break}return y}function pe(m,y){if(m.subscreens.length===0)return;if(!y)return m.subscreens[0];const D=m.subscreens.findIndex(J=>J.component===y.component),R=m.subscreens[D+1];if(R!==void 0)return R.order===y.order?pe(m,R):m.subscreens[D+1]}function Ue(){for(const m in U){const y=He(m);y!==null&&(T.value[y]=U[m].default)}}function He(m){const y=m.match(/\/([^\/]+)\.vue$/);return y?y[1]:null}return(m,y)=>(g(),S(N,null,[A("",!0),i(Gn,Q({ref_key:"layoutRef",ref:a,onBack:Re,onCancel:ae},j.value),{default:c(()=>{var D;return[(g(),M(Ut(E.value),{onAlert:ne,onNext:Fe,onTo:y[0]||(y[0]=R=>Ee(R)),onCancel:ae,onLoading:Z,data:o.value,"onUpdate:data":y[1]||(y[1]=R=>o.value=R),layoutRef:a.value,totem:h.value,screen:b.value,traits:((D=k.value)==null?void 0:D.traits)??[]},null,40,["data","layoutRef","totem","screen","traits"])),i(En,Q({modelValue:u.value,"onUpdate:modelValue":y[2]||(y[2]=R=>u.value=R)},r.value),null,16,["modelValue"]),i(Jt,Q({modelValue:e.value,"onUpdate:modelValue":y[3]||(y[3]=R=>e.value=R)},l.value),null,16,["modelValue"])]}),_:1},16)],64))}});export{po as default};
