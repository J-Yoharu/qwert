import { r as Ft, _ as Rt } from "./Init.vue_vue_type_script_setup_true_lang-Cc5xwld1.js";
import { _ as Et, L as Nt } from "./Loading-hKRZaAhx.js";
import "./VContainer-Clag2u1U.js";
import { V as zt } from "./VForm-DmbiyfSH.js";
import { V as H, a as R } from "./VRow-CBFz3Dht.js";
import { V as Z } from "./VSheet-D4hldqhc.js";
import { V as At } from "./VTextField-MS4vxye7.js";
import "./VWindowItem-CYT4qauv.js";
import { d as Ge, V as He, e as Je, r as Ne, _ as Qe, a as Ue, c as We, f as Xe, b as qe } from "./Welcome-BWFW0J8q.js";
import { d as Ut } from "./default-values-Cei7-cAt.js";
import "./index-C-zpw9ZX.js";
import { X as $e, b0 as $t, a5 as A, aa as Bt, c as C, f as Ce, ak as Ct, a1 as D, b as Dt, o as E, w as G, ac as I, V as Ie, am as It, a3 as J, aV as K, K as Ke, W as Le, b4 as Lt, a8 as M, ah as Mt, Y as O, aE as Ot, ab as P, b6 as Pt, as as Se, Q as St, a6 as T, a$ as Te, b2 as Tt, F as U, aY as Ve, b1 as Vt, i as W, a4 as Y, z as Ye, aF as Ze, aQ as _t, a_ as ae, P as at, D as bt, aM as ct, a2 as d, u as dt, t as et, af as f, S as ft, aR as ge, B as gt, a0 as h, aS as ht, ae as ie, y as it, b3 as je, b5 as jt, L as ke, aT as kt, aZ as le, aJ as lt, aN as mt, a7 as ne, aH as nt, aI as ot, r as p, aP as pt, T as re, aL as rt, h as s, s as se, aK as st, aG as tt, av as ut, aO as vt, N as we, aX as wt, g as xe, aW as xt, p as ye, ax as yt, aU as z } from "./index-eSwy3xtz.js";
import "./ssrBoot-Bs0WsREi.js";
import { c as Ht } from "./string-D3I3Kuho.js";
import { f as Qt } from "./totem.repository-BJ22GVYN.js";
const qt={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Wt(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return s("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[u])}function _e(e){const[u,t]=e.split("@");return Array.from({length:t}).map(()=>oe(u))}function oe(e){let u=[];if(!e)return u;const t=qt[e];if(e!==t){if(e.includes(","))return he(e);if(e.includes("@"))return _e(e);t.includes(",")?u=he(t):t.includes("@")?u=_e(t):t&&u.push(oe(t))}return[Wt(e,u)]}function he(e){return e.replace(/\s/g,"").split(",").map(oe)}const Gt=ye({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Ze(),...Ke(),...ke()},"VSkeletonLoader"),Jt=xe()({name:"VSkeletonLoader",props:Gt(),setup(e,u){let{slots:t}=u;const{backgroundColorClasses:n,backgroundColorStyles:c}=Ye(et(e,"color")),{dimensionStyles:a}=tt(e),{elevationClasses:r}=at(e),{themeClasses:i}=we(e),{t:o}=nt(),l=C(()=>oe(ot(e.type).join(",")));return Ce(()=>{var g;const m=!t.default||e.loading;return s("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},i.value,n.value,r.value],style:[c.value,m?a.value:{}],"aria-busy":e.boilerplate?void 0:m,"aria-live":e.boilerplate?void 0:"polite","aria-label":e.boilerplate?void 0:o(e.loadingText),role:e.boilerplate?void 0:"alert"},[m?l.value:(g=t.default)==null?void 0:g.call(t)])}),{}}});function Xt(e){const u=se(e);let t=-1;function n(){clearInterval(t)}function c(){n(),$e(()=>u.value=e)}function a(r){const i=r?getComputedStyle(r):{transitionDuration:.2},o=parseFloat(i.transitionDuration)*1e3||200;if(n(),u.value<=0)return;const l=performance.now();t=window.setInterval(()=>{const m=performance.now()-l+o;u.value=Math.max(e-m,0),u.value<=0&&n()},o)}return kt(n),{clear:n,time:u,start:a,reset:c}}const Zt=ye({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...lt({location:"bottom"}),...st(),...it(),...rt(),...ke(),...ut(ct({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Kt=xe()({name:"VSnackbar",props:Zt(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:t}=u;const n=dt(e,"modelValue"),{locationStyles:c}=mt(e),{positionClasses:a}=vt(e),{scopeId:r}=ft(),{themeClasses:i}=we(e),{colorClasses:o,colorStyles:l,variantClasses:m}=pt(e),{roundedClasses:g}=gt(e),_=Xt(Number(e.timeout)),$=p(),V=p(),L=se(!1);G(n,w),G(()=>e.timeout,w),E(()=>{n.value&&w()});let B=-1;function w(){_.reset(),window.clearTimeout(B);const b=Number(e.timeout);if(!n.value||b===-1)return;const F=_t(V.value);_.start(F),B=window.setTimeout(()=>{n.value=!1},b)}function S(){_.reset(),window.clearTimeout(B)}function x(){L.value=!0,S()}function k(){L.value=!1,w()}return Ce(()=>{const b=ge.filterProps(e),F=!!(t.default||t.text||e.text);return s(ge,W({ref:$,class:["v-snackbar",{"v-snackbar--active":n.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},a.value,e.class],style:e.style},b,{modelValue:n.value,"onUpdate:modelValue":Q=>n.value=Q,contentProps:W({class:["v-snackbar__wrapper",i.value,o.value,g.value,m.value],style:[c.value,l.value],onPointerenter:x,onPointerleave:k},b.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},r),{default:()=>{var Q,q;return[ht(!1,"v-snackbar"),e.timer&&!L.value&&s("div",{key:"timer",class:"v-snackbar__timer"},[s(Se,{ref:V,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":_.time.value},null)]),F&&s("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((Q=t.text)==null?void 0:Q.call(t))??e.text,(q=t.default)==null?void 0:q.call(t)]),t.actions&&s(bt,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[s("div",{class:"v-snackbar__actions"},[t.actions()])]})]},activator:t.activator})}),yt({},$)}});function Yt(e){return new Promise((u,t)=>{setTimeout(()=>{if(console.log(e),e.patient_id=="44444444444")return t("Não foi possível gerar a sua senha");u({data:{value:"C219",site:"Barra da Tijuca"}})},2e3)})}const ea=e=>(xt("data-v-80568fcc"),e=e(),wt(),e),ta=ea(()=>f("h1",{class:"text-center"}," Escolha seu tipo de prioridade: ",-1)),aa={class:"mr-2"},na={class:"font-weight-bold"},oa=O({__name:"AttendanceType",props:{totem:{},data:{}},emits:["alert","next","cancel","loading","update:data"],setup(e,{emit:u}){const t=e,n=u,c=C({get:()=>t.data,set:r=>n("update:data",r)});async function a(r){var o;const i={queue_id:r.integration_id,patient_id:(o=c.value.patient)==null?void 0:o.id};n("loading",{text:"Gerando senha",async callback(l){Yt(i).then(m=>{c.value.ticket=m.data,l.value=!1,n("next")}).catch(m=>{l.value=!1,n("alert",{title:m,text:"Fale com a recepção para prosseguir com o seu atendimento",action:{type:"confirm",label:"Ok, entendi",callback(){n("cancel")}}})})}})}return(r,i)=>(h(),T("div",null,[s(H,null,{default:d(()=>[s(R,{cols:"12"},{default:d(()=>[ta]),_:1}),(h(!0),T(U,null,ne(c.value.queue.attendance_types,(o,l)=>(h(),D(R,{cols:"12",md:"4",key:l},{default:d(()=>[z((h(),D(Z,{onClick:m=>a(o),color:"transparent",style:{cursor:"pointer","white-space":"normal"},border:"sm",rounded:"",class:"pa-6 d-flex align-center",link:"",height:r.$vuetify.display.mdAndUp?"300":"auto"},{default:d(()=>[f("div",null,[f("div",aa,[s(J,{src:o.data.icon,width:"64",height:"64"},null,8,["src"])]),f("h2",na,I(o.data.name),1),f("p",null,I(o.data.description),1)])]),_:2},1032,["onClick","height"])),[[K]])]),_:2},1024))),128))]),_:1})]))}}),la=ie(oa,[["__scopeId","data-v-80568fcc"]]),sa=Object.freeze(Object.defineProperty({__proto__:null,default:la},Symbol.toStringTag,{value:"Module"})),ia={key:0,class:"font-weight-bold text-secondary text-h4"},ra=O({__name:"Timer",props:{time:{default:15},hideNumber:{type:Boolean,default:!1},startManual:{type:Boolean,default:!1}},emits:["end"],setup(e,{expose:u,emit:t}){const n=e,c=t;u({start:m});const a=p(n.time),r=p(),i=p();G(n,(g,_)=>{g.time<_.time||(a.value=n.time,o(),m())});function o(){clearInterval(r.value),clearTimeout(i.value)}const l=C(()=>a.value*100/n.time);function m(){r.value=setInterval(()=>{a.value--},1e3),i.value=setTimeout(()=>{clearInterval(r.value),c("end")},n.time*1e3)}return E(()=>{n.startManual||m()}),(g,_)=>(h(),D(Se,{class:"progress",height:"6",modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=$=>l.value=$),color:"primary"},{default:d(()=>[g.hideNumber?A("",!0):(h(),T("span",ia,I(a.value),1))]),_:1},8,["modelValue"]))}}),ue=ie(ra,[["__scopeId","data-v-4807d716"]]),Pe="data:image/svg+xml,%3csvg%20width='113'%20height='112'%20viewBox='0%200%20113%20112'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M103.167%2051.7067V56C103.161%2066.0633%2099.9025%2075.8552%2093.8771%2083.9152C87.8516%2091.9752%2079.3822%2097.8716%2069.7318%20100.725C60.0815%20103.578%2049.7674%20103.236%2040.3277%2099.7481C30.888%2096.2606%2022.8286%2089.8151%2017.3513%2081.373C11.8741%2072.9308%209.27252%2062.9443%209.93465%2052.9028C10.5968%2042.8613%2014.4871%2033.3029%2021.0255%2025.653C27.5638%2018.0032%2036.3998%2012.6718%2046.2157%2010.454C56.0316%208.23626%2066.3014%209.25092%2075.4935%2013.3467'%20stroke='%2304B300'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M103.167%2018.6665L56.5%2065.3798L42.5%2051.3798'%20stroke='%2304B300'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ua={key:0},ca={key:1,class:"fill-height d-flex align-center justify-center flex-column"},da=["src"],ma=f("h1",{class:"text-success"},"Senha gerada com sucesso! :)",-1),va=f("p",null,"Retire sua senha e aguarde ser chamado pelo painel da recepção.",-1),fa={class:"w-100"},pa=["src"],ga=O({__name:"PasswordSuccess",props:{data:{}},emits:["alert","next","cancel","loading"],setup(e,{emit:u}){const t=e,n=C(()=>{const l=new URLSearchParams(t.data.ticket);return window.location.origin+`qwert/#/senha?${l.toString()}`}),c=u,a=p(null),r=p(!1),i=C(()=>"api"in window);function o(){c("loading",{text:"Aguarde só mais um instante",callback(l){window.api.print(JSON.parse(JSON.stringify(t.data.ticket))).then(()=>{var m;r.value=!1,l.value=!1,(m=a.value)==null||m.start()}).catch(m=>{var g;c("alert",{title:"Ops, Não foi possível imprimir a senha! :(",text:`Por favor, anote o número abaixo <br/> <h1> ${(g=t.data.ticket)==null?void 0:g.value} </h1> Já acionamos a equipe responsavel para cuidar disso`,action:{type:"confirm",label:"Já anotei a minha senha",callback(){c("cancel"),r.value=!1,l.value=!1}}})})}})}return re(()=>{if(i.value)return o()}),E(async()=>{var l;await $e(),i.value||(r.value=!1,(l=a.value)==null||l.start())}),(l,m)=>r.value?(h(),T("div",ua)):(h(),T("div",ca,[f("div",null,[f("img",{src:Y(Pe)},null,8,da)]),ma,va,f("div",fa,[s(ue,{"hide-number":"","start-manual":"",time:15,ref_key:"timer",ref:a,onEnd:m[0]||(m[0]=g=>l.$emit("cancel")),class:"mt-4"},null,512)]),i.value?A("",!0):(h(),T("iframe",{key:0,src:n.value,frameborder:"0",class:"rounded-xl border mt-6",height:"200"},null,8,pa))]))}}),_a=Object.freeze(Object.defineProperty({__proto__:null,default:ga},Symbol.toStringTag,{value:"Module"})),ha=f("h1",null,"O que você deseja fazer hoje?",-1),ba={class:"mr-2"},ya={class:"font-weight-medium"},ka=O({__name:"Queues",props:{totem:{},data:{}},emits:["alert","next","cancel","update:data"],setup(e,{emit:u}){const t=u,n=e,c=C({get:()=>n.data,set:i=>t("update:data",i)});function a(i){const o=new Date().getDay(),l=i.attendance_hours.find(m=>m.weekday_iso==o);if(l){if(!r(l==null?void 0:l.start_time,l==null?void 0:l.end_time))return t("alert",{title:"Ops, infelizmente já passamos do horário de atendimento! :(",text:`O horário de atendimento é das ${l.start_time} às ${l.end_time} <br/> ${i.off_hours_message??""}`,action:{type:"confirm",label:"Ok, entendi",callback(){t("cancel")}}});c.value.queue=i,t("next")}}function r(i,o){const l=new Date,m=new Date,g=new Date,[_,$]=i.split(":"),[V,L]=o.split(":");return m.setHours(parseInt(_),parseInt($)),g.setHours(parseInt(V),parseInt(L)),l>=m&&l<=g}return(i,o)=>(h(),T("div",null,[s(H,null,{default:d(()=>[s(R,{cols:"12",class:"text-center"},{default:d(()=>[ha]),_:1}),s(H,{justify:"center"},{default:d(()=>[s(R,{cols:"10"},{default:d(()=>[s(H,{justify:"center"},{default:d(()=>[(h(!0),T(U,null,ne(i.totem.queues,(l,m)=>(h(),D(R,{cols:"12",md:"auto",key:m,class:"d-flex justify-center"},{default:d(()=>[z((h(),D(Z,{color:"transparent",onClick:g=>a(l),style:{cursor:"pointer","white-space":"normal"},border:"sm",rounded:"",class:"d-flex pa-6",link:"","min-height":"80",width:"342",click:"checkQueue(queue)"},{default:d(()=>{var g,_;return[f("div",ba,[s(J,{src:(g=l.data)==null?void 0:g.icon_src,width:"32",height:"32"},null,8,["src"])]),f("p",ya,I((_=l.data)==null?void 0:_.name),1)]}),_:2},1032,["onClick"])),[[K]])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]))}}),xa=Object.freeze(Object.defineProperty({__proto__:null,default:ka},Symbol.toStringTag,{value:"Module"})),wa={class:"fill-height d-flex justify-center align-center"},Ca=f("h1",{class:"text-success text-center"}," Você realizou o check-in rápido! :) ",-1),Sa=f("p",{class:"text-center"}," Com esse benefício você não precisa mais enfrentar filas, basta aguardar ser chamado por seu médico pelo painel. ",-1),$a=O({__name:"CheckinSuccess",emits:["cancel"],setup(e){return(u,t)=>(h(),T("div",wa,[f("div",null,[s(J,{height:"112",src:Y(Pe),class:"mb-4"},null,8,["src"]),Ca,Sa,s(ue,{"hide-number":"",timer:20,class:"mt-4",onEnd:t[0]||(t[0]=n=>u.$emit("cancel"))})])]))}}),Va=Object.freeze(Object.defineProperty({__proto__:null,default:$a},Symbol.toStringTag,{value:"Module"})),Ta={class:"d-flex flex-column flex-grow-1"},La={class:"text-center"},ja={class:"text-primary"},Ia={class:"d-flex flex-column flex-grow-1",style:{"flex-grow":"1",background:"#4b4b4b"}},Pa={style:{width:"70%"},class:"d-flex flex-column justify-center align-center flex-grow-1 mx-auto position-relative"},Ba=["src"],Ma={key:1,class:"avatar-capture"},Da={class:"flex-grow-0"},Oa={class:"d-flex"},te=3,be=3,Ra=O({__name:"FaceRecognition",props:{data:{}},emits:["alert","next","to"],setup(e,{emit:u}){const t=u,n=e,c=p(null),a=p(!1),r=p(!1),i=p(!1),o=p(null),l=p(0),m=p(be),g=p(!1),_=C(()=>l.value>=te?"Limite de tentativas excedido":l.value>0?"Tentar novamente":!a.value&&!o.value?"Iniciar verificação":"Tirar outra foto");function $(){L(),o.value=null}function V(){const x=setInterval(()=>{if(m.value===0){w(),m.value=be,clearInterval(x);return}m.value--},1e3)}const L=async(x=!0)=>{try{const k=await navigator.mediaDevices.getUserMedia({video:!0});c.value&&(c.value.srcObject=k,x&&(a.value=!0,V()))}catch(k){t("alert",{title:"Erro ao acessar a câmera",text:k,action:{type:"confirm",label:"fechar"}})}};function B(){return new Promise((x,k)=>{try{r.value=!0,setTimeout(()=>{if(!c.value)return;const b=document.createElement("canvas");b.width=c.value.videoWidth,b.height=c.value.videoHeight;const F=b.getContext("2d");F==null||F.drawImage(c.value,0,0,b.width,b.height),x(b.toDataURL("image/png")),r.value=!1},200)}catch(b){k(b)}})}async function w(){if(o.value=await B(),!c.value)return;const x=c.value.srcObject;B(),x.getTracks().forEach(b=>{b.stop()}),c.value.srcObject=null,a.value=!1}function S(){var x;o.value&&(i.value=!0,Ne(o.value,(x=n.data.patient)==null?void 0:x.id).then(k=>{n.data.internal.faceRecognition=o.value,t("next")}).catch(k=>{if(l.value++,g.value=!0,o.value=null,l.value>=te){t("alert",{title:`Você atingiu ${te} tentativas de leitura biométrica!`,text:"Deseja tentar com o Token?",action:{type:"choise",rejectLabel:"Ir para recepção",acceptLabel:"Tentar com Token",callback(b){if(!b)return t("to","Queues");t("to","SendToken")}}});return}}).finally(()=>{i.value=!1}))}return Ve(()=>{w()}),E(()=>{n.data.internal.faceRecognition&&(o.value=n.data.internal.faceRecognition),L(!1)}),(x,k)=>(h(),T("div",Ta,[f("h1",La,[z(f("span",null,[P(" Capturando em "),f("span",ja,I(m.value),1)],512),[[le,a.value]]),z(f("span",null," Posicione-se em frente a câmera ",512),[[le,!a.value]])]),f("div",Ia,[f("div",Pa,[f("video",{ref_key:"video",ref:c,class:"bg-grey position-absolute",autoplay:"",style:{"object-fit":"fill",left:"0",right:"0",top:"0",bottom:"0",width:"100%",height:"100%"}},null,512),f("div",{class:Ct(["cover position-absolute d-flex justify-center align-center",{active:r.value}]),style:{width:"100%",left:"0",right:"0",top:"0",bottom:"0",height:"100%"}},[o.value?(h(),T("img",{key:0,src:o.value,style:{width:"100%",height:"100%"}},null,8,Ba)):(h(),T("div",Ma))],2)])]),f("div",Da,[f("div",Oa,[s(M,{class:"mx-auto px-8 py-2 mt-8",rounded:"",color:"primary",disabled:a.value,onClick:$},{default:d(()=>[P(I(_.value),1)]),_:1},8,["disabled"]),s(M,{loading:i.value,class:"mx-auto px-8 py-2 mt-8",disabled:!o.value,rounded:"",color:"green",onClick:S},{default:d(()=>[P(" Confirmar ")]),_:1},8,["loading","disabled"])])]),s(Kt,{modelValue:g.value,"onUpdate:modelValue":k[0]||(k[0]=b=>g.value=b),position:"absolute",location:"top right",color:"red"},{default:d(()=>[P(" Faces divergentes, não é a mesma pessoa. Tentativas restantes: "+I(te-l.value),1)]),_:1},8,["modelValue"])]))}}),Fa=ie(Ra,[["__scopeId","data-v-0fc53824"]]),za=Object.freeze(Object.defineProperty({__proto__:null,default:Fa},Symbol.toStringTag,{value:"Module"})),Aa=O({__name:"IFrameVue",props:{showLoading:{type:Boolean,default:!0}},setup(e){const u=p(!0);return(t,n)=>(h(),T(U,null,[s(Le,{name:"fade"},{default:d(()=>[t.showLoading&&u.value?(h(),D(ae,{key:0,variant:"tonal",elevation:"5",class:"pa-5 h-100"},{default:d(()=>[Te(t.$slots,"loading",{loading:u.value},()=>[s(ae,{variant:"outlined",rounded:"0",class:"mx-auto pa-10 h-100",style:{width:"70%"}},{default:d(()=>[s(ae,{variant:"outlined",class:"h-100",rounded:"0"},{default:d(()=>[(h(),T(U,null,ne(6,c=>s(Jt,{type:c%2==0?"paragraph":"article"},null,8,["type"])),64))]),_:1})]),_:1})])]),_:3})):A("",!0)]),_:3}),z(f("iframe",W({onLoad:n[0]||(n[0]=c=>u.value=!1)},t.$attrs),null,16),[[le,!u.value]])],64))}}),Ea={class:"d-flex justify-end text-h5"},Na={style:{overflow:"scroll",height:"90%"}},Ha={class:"d-flex align-center h-100",style:{overflow:"scroll"}},Ua=O({__name:"GuideCarousel",props:{urls:{}},setup(e){const u=e,t=p(0),n=C(()=>u.urls),c=C(()=>t.value+1),a=C(()=>t.value===n.value.length-1),r=C(()=>t.value===0);return(i,o)=>(h(),T(U,null,[f("div",Ea,I(c.value)+" / "+I(n.value.length),1),f("div",Na,[f("div",Ha,[s(M,{color:r.value?"":"primary",size:"large",icon:"mdi-chevron-left",class:"mr-2",onClick:o[0]||(o[0]=l=>t.value--),disabled:r.value},null,8,["color","disabled"]),s(He,{class:"h-100","show-arrows":!1,"hide-delimiters":"","hide-delimiter-background":"",modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=l=>t.value=l)},{default:d(()=>[(h(!0),T(U,null,ne(n.value,(l,m)=>(h(),D(Ue,{key:m},{default:d(()=>[s(Aa,{src:l+"?page=hsn#toolbar=0",height:"100%",width:"100%",style:{border:"none"}},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["modelValue"]),s(M,{color:a.value?"":"primary",size:"large",icon:"mdi-chevron-right",disabled:a.value,class:"ml-2",onClick:o[2]||(o[2]=l=>t.value++)},null,8,["color","disabled"])])])],64))}}),Qa="/qwert/assets//totem-VpQX9TsR.png",qa="/qwert/assets//totem-tablet-focus-DjzX2n2c.png",Wa="/qwert/assets//tablet-jtXbmNYi.svg";function Ga(){const{smAndDown:e,mdAndDown:u,lgAndUp:t,md:n,mobile:c}=St(),a=C(()=>["responsive-font"]),r=C(()=>[{"text-h6":e.value,"text-h5":n.value,"text-h4":t.value},"my-4"]),i=C(()=>{switch(!0){case e.value:return"small";case u.value:return"default";default:return"large"}});return{title:a,subtitle:r,btnSize:i,mobile:c}}const Ja=f("h1",null,"Assinatura de Guia",-1),Xa={key:0},Za=["innerHTML"],Ka={key:1},Ya=["innerHTML"],en=O({__name:"HelpSignatureFlow",props:{modelValue:{type:Boolean}},emits:["update:modelValue","end"],setup(e,{emit:u}){const t=e,n=u;Ga();const c=p(!1),a=[{text:"Bem-vindo ao nosso sistema de autoatendimento! <br/> Realize a assinatura da sua guia de forma rápida e simples. Siga as etapas abaixo para concluir o processo",image:Qa},{text:"No canto esquerdo do totem, você verá um tablet.",image:qa},{text:"Utilize a caneta que está em cima do tablet. <br> Após assinar, toque no botão <strong>'OK'</strong> na tela para confirmar",image:Wa}],r=p(!1),i=p(0),o=p(null);G(i,x=>{x==a.length-1&&!c.value&&(c.value=!0,n("end",!0))});const l=C(()=>i.value==0),m=C(()=>i.value==a.length-1),g=C(()=>a[i.value]),_=C({get(){return t.modelValue},set(x){n("update:modelValue",x)}}),$=C(()=>g.value.text.split(" ").length),V=C(()=>$.value*500);function L(){clearTimeout(o.value),i.value++}function B(){clearTimeout(o.value),i.value--}function w(x){x&&S(V.value)}function S(x){console.log(`Step: ${g.value.text} 
 reading time second: ${x/1e3}s`),a.length-1!=i.value&&(r.value=!r.value,i.value++)}return(x,k)=>(h(),D(je,{modelValue:_.value,"onUpdate:modelValue":[k[2]||(k[2]=b=>_.value=b),w],width:"100%",persistent:"",class:"totem"},{default:d(()=>[s(ae,null,{default:d(()=>[s($t,{class:"text-center"},{default:d(()=>[Ja]),_:1}),s(Vt,{style:{"overflow-y":"hidden"},class:"d-flex align-center justify-center justify-space-between"},{default:d(()=>[s(M,{fab:"",onClick:B,icon:"mdi-chevron-left",color:"primary",disabled:l.value},null,8,["disabled"]),s(Le,{name:"slide-up",mode:"out-in"},{default:d(()=>[r.value?(h(),T("div",Ka,[f("p",{class:"text-center",innerHTML:g.value.text},null,8,Ya),s(J,{src:g.value.image,height:"400"},null,8,["src"])])):(h(),T("div",Xa,[f("p",{class:"text-center mt-3",innerHTML:g.value.text},null,8,Za),s(J,{src:g.value.image,height:"400"},null,8,["src"])]))]),_:1}),s(M,{fab:"",onClick:L,icon:"mdi-chevron-right",color:"primary",disabled:m.value},null,8,["disabled"])]),_:1}),s(Tt,{class:"d-flex justify-end"},{default:d(()=>[s(M,{variant:"tonal",color:"primary",class:"pa-1",onClick:k[0]||(k[0]=b=>i.value=a.length-1),disabled:i.value==a.length-1},{default:d(()=>[P(" Pular Ajuda ")]),_:1},8,["disabled"])]),_:1}),i.value!=a.length-1?(h(),D(ue,{onTimerEnd:k[1]||(k[1]=b=>S(V.value)),key:i.value,time:V.value/1e3,"hide-number":""},null,8,["time"])):A("",!0)]),_:1})]),_:1},8,["modelValue"]))}});function tn(){return new Promise((e,u)=>{setTimeout(()=>e({data:{nr_sequencia_autor:"6546748",guia:{nr_guia:5087294,nr_prescricao:19828424,codigomensagem:"0",ds_mensagem:"Guia assinada com sucesso"}}}),4e3)})}const an={class:"fill-height"},nn=O({__name:"PDFSignature",props:{data:{}},emits:["update:data","next","cancel","alert","loading","to"],setup(e,{emit:u}){const t=e,n=u,c=p(!1),a=p(!1),r=C(()=>{var o;return((o=t.data.patient)==null?void 0:o.schedules.map(l=>{var m;return(m=l.guide)==null?void 0:m.url}).filter(l=>l))??[]});function i(){c.value=!0,tn().then(o=>{n("next")}).catch(o=>{a.value=!1,n("alert",o)}).finally(()=>{c.value=!1})}return E(()=>{r.value.length||n("to","Queues")}),(o,l)=>(h(),T("div",an,[s(Ua,{urls:r.value},{append:d(()=>[]),_:1},8,["urls"]),s(M,{block:"",disabled:c.value,loading:c.value,size:"x-large",color:"primary",onClick:l[0]||(l[0]=m=>a.value=!0)},{default:d(()=>[P(" Clique para assinar a guia do convênio ")]),_:1},8,["disabled","loading"]),s(en,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=m=>a.value=m),onEnd:i},null,8,["modelValue"])]))}}),on=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"}));function ln(e){return new Promise((u,t)=>{setTimeout(()=>e=="123456"?u({data:!0}):t({data:{message:"Token inválido",maxAttempts:ce--}}),1e3)})}function sn(){return new Promise(e=>{setTimeout(()=>e({data:!0}),1e3)})}var ce=2;function rn(e){return new Promise((u,t)=>{setTimeout(()=>e=="123456"?u({data:!0}):t({data:{message:"Token inválido",maxAttempts:ce--}}),4e3)})}function un(){ce=2}const cn={key:0},dn=f("p",{class:"mt-10"}," Caso não tenha acesso ao código ou seu número esteja incorreto, volte uma etapa para tentar a leitura biométrica ou pule o check-in para passar na recepção. ",-1),mn=O({__name:"SendToken",props:{data:{}},emits:["update:data","next","cancel","alert","loading","to"],setup(e,{emit:u}){const t=e,n=u,c=C({get:()=>t.data,set:w=>n("update:data",w)}),a=p({data:"",wasSended:!1,isValid:!1,expiration:10,timer:0,sendLoading:!1,timesItWasSend:0}),r=p(),i=p(),o=p(!1),l=C(()=>a.value.timesItWasSend<=1?"Não recebi o código":"Reenviar código");function m(w,S){return S.length<w?`Mínimo de ${w} caracteres`:!0}function g(w){return w.length==7&&a.value.wasSended&&!a.value.isValid?"Token inválido":!0}function _(){return a.value.data.replace(/\D/g,"")}const $=p(!1);function V(){o.value=!0,ln(_()).then(()=>{n("loading",{text:"Aguardando autorização da operadora",callback(w){rn(_()).then(()=>{w.value=!1,n("next")}).catch(S=>{var x,k;w.value=!1,n("alert",{title:`Ops, ${(k=(x=S.response)==null?void 0:x.data)==null?void 0:k.message} :(`,text:"Tente novamente",action:{type:"choise",acceptLabel:"Ok, entendi",rejectLabel:"Finalizar",callback(b){if(!b)return n("cancel");n("to","Queues")}}})})}})}).catch(w=>{var S;if(console.log({error:w}),a.value.wasSended=!0,a.value.isValid=!1,r.value.validate(),w.data.maxAttempts<=0){const x={title:"Você atingiu o limite de tentativas",text:"Vamos te encaminhar para a recepção :)"};if((S=c.value.patient)!=null&&S.has_face_recognition)return n("alert",{...x,action:{type:"choise",acceptLabel:"Ir para recepção",rejectLabel:"Tentar com biometria facial",callback(k){if(!k)return n("to","FaceRecognition");n("to","Queues")}}});n("alert",{...x,action:{type:"confirm",label:"Ok, entendi",callback(){n("to","Queues")}}})}}).finally(()=>o.value=!1)}function L(){var S,x;B();const w={title:`Enviamos um novo código SMS para o seu celular com o final ${(S=c.value.patient)==null?void 0:S.phone_hint} e para o seu app :)`,text:""};if((x=c.value.patient)!=null&&x.has_face_recognition)return n("alert",{...w,action:{type:"choise",acceptLabel:"Continuar",rejectLabel:"Tentar com biometria facial",callback(k){if(!k)return n("to","FaceRecognition");a.value.data="",r.value.resetValidation(),setTimeout(()=>i.value.focus(),500)}}});n("alert",{...w,action:{type:"choise",acceptLabel:"Continuar",rejectLabel:"Ir para recepção",callback(k){if(!k)return n("to","Queues");a.value.data="",r.value.resetValidation(),setTimeout(()=>i.value.focus(),500)}}})}function B(){a.value.timesItWasSend++,a.value.sendLoading=!0,sn().then(()=>{if(a.value.timesItWasSend<=1){a.value.sendLoading=!1;return}a.value.timer=a.value.expiration;const w=setInterval(()=>{if(a.value.timer==0)return a.value.sendLoading=!1,clearInterval(w);a.value.timer--},1e3)}).catch(w=>{console.log({errorSendToken:w})})}return E(()=>{B()}),(w,S)=>{const x=Rt,k=Lt("mask");return h(),T("div",null,[s(H,{justify:"center"},{default:d(()=>[s(R,{cols:"12"},{default:d(()=>{var b;return[f("h1",null," Enviamos um código SMS para o seu celular com final "+I((b=c.value.patient)==null?void 0:b.phone_hint)+" e para o seu app. ",1)]}),_:1}),s(R,{cols:"12",md:"8",lg:"7"},{default:d(()=>[s(zt,{modelValue:$.value,"onUpdate:modelValue":S[2]||(S[2]=b=>$.value=b),"lazy-validation":"",ref_key:"formElement",ref:r},{default:d(()=>[z(s(At,{"onUpdate:modelValue":[S[0]||(S[0]=b=>a.value.wasSended=!1),S[1]||(S[1]=b=>a.value.data=b)],ref_key:"inputElement",ref:i,"validate-on":"input",modelValue:a.value.data,number:"",rules:[Y(Ft),b=>m(6,_()),g],placeholder:"000-000"},null,8,["modelValue","rules"]),[[k,"###-###"]])]),_:1},8,["modelValue"]),s(H,{class:"d-flex",dense:"",justify:"center"},{default:d(()=>[s(R,{cols:"12",md:"7"},{default:d(()=>[s(M,{rounded:"",variant:"outlined",class:"mr-4",onClick:L,disabled:a.value.sendLoading},{default:d(()=>[P(I(l.value),1)]),_:1},8,["disabled"]),a.value.timer>0?(h(),T("div",cn," Seu código expira em 0:"+I(a.value.timer.toString().padStart(2,"0")),1)):A("",!0)]),_:1}),s(R,{cols:"12",md:"5"},{default:d(()=>[s(M,{color:"primary",onClick:V,disabled:!$.value||a.value.data.length!=7||o.value,loading:o.value,rounded:""},{default:d(()=>[P(" Continua ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),dn,s(M,{variant:"text",class:"mt-4 text-primary",onClick:S[3]||(S[3]=b=>w.$emit("to","Queues"))},{default:d(()=>[P(" Pular check-in rápido ")]),_:1})]),_:1}),s(R,{cols:"12",md:"4",lg:"5",class:"d-flex justify-center"},{default:d(()=>[s(x,{"always-visible":""})]),_:1})]),_:1})])}}}),vn=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),fn="data:image/svg+xml,%3csvg%20width='65'%20height='64'%20viewBox='0%200%2065%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.8333%208H21.3C16.8196%208%2014.5794%208%2012.8681%208.87195C11.3628%209.63893%2010.1389%2010.8628%209.37195%2012.3681C8.5%2014.0794%208.5%2016.3196%208.5%2020.8V21.3333M21.8333%2056H21.3C16.8196%2056%2014.5794%2056%2012.8681%2055.1281C11.3628%2054.3611%2010.1389%2053.1372%209.37195%2051.6319C8.5%2049.9206%208.5%2047.6804%208.5%2043.2V42.6667M56.5%2021.3333V20.8C56.5%2016.3196%2056.5%2014.0794%2055.6281%2012.3681C54.8611%2010.8628%2053.6372%209.63894%2052.1319%208.87195C50.4206%208%2048.1804%208%2043.7%208H43.1667M56.5%2042.6667V43.2C56.5%2047.6804%2056.5%2049.9206%2055.6281%2051.6319C54.8611%2053.1372%2053.6372%2054.3611%2052.1319%2055.1281C50.4206%2056%2048.1804%2056%2043.7%2056H43.1667M20.5%2021.3333V25.3333M44.5%2021.3333V25.3333M29.8333%2033.6003C31.9667%2033.6003%2033.8333%2031.7336%2033.8333%2029.6003V21.3333M41.0339%2040.5332C36.2339%2045.3332%2028.5005%2045.3332%2023.7005%2040.5332'%20stroke='%23FC4C02'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",pn="data:image/svg+xml,%3csvg%20width='65'%20height='64'%20viewBox='0%200%2065%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M59.1667%2029.3334V21.8667C59.1667%2018.8798%2059.1667%2017.3863%2058.5854%2016.2454C58.074%2015.2419%2057.2581%2014.426%2056.2546%2013.9147C55.1138%2013.3334%2053.6203%2013.3334%2050.6333%2013.3334H14.3667C11.3797%2013.3334%209.88624%2013.3334%208.74538%2013.9147C7.74185%2014.426%206.92595%2015.2419%206.41463%2016.2454C5.83333%2017.3863%205.83333%2018.8798%205.83333%2021.8667V31.4667C5.83333%2034.4537%205.83333%2035.9471%206.41463%2037.088C6.92595%2038.0915%207.74185%2038.9074%208.74538%2039.4187C9.88624%2040%2011.3797%2040%2014.3667%2040H29.8333M32.5%2026.6667H32.5133M45.8333%2026.6667H45.8467M19.1667%2026.6667H19.18M51.8333%2045.3334V40.6667C51.8333%2038.0894%2049.744%2036%2047.1667%2036C44.5893%2036%2042.5%2038.0894%2042.5%2040.6667V45.3334M33.1667%2026.6667C33.1667%2027.0349%2032.8682%2027.3334%2032.5%2027.3334C32.1318%2027.3334%2031.8333%2027.0349%2031.8333%2026.6667C31.8333%2026.2985%2032.1318%2026%2032.5%2026C32.8682%2026%2033.1667%2026.2985%2033.1667%2026.6667ZM46.5%2026.6667C46.5%2027.0349%2046.2015%2027.3334%2045.8333%2027.3334C45.4651%2027.3334%2045.1667%2027.0349%2045.1667%2026.6667C45.1667%2026.2985%2045.4651%2026%2045.8333%2026C46.2015%2026%2046.5%2026.2985%2046.5%2026.6667ZM19.8333%2026.6667C19.8333%2027.0349%2019.5349%2027.3334%2019.1667%2027.3334C18.7985%2027.3334%2018.5%2027.0349%2018.5%2026.6667C18.5%2026.2985%2018.7985%2026%2019.1667%2026C19.5349%2026%2019.8333%2026.2985%2019.8333%2026.6667ZM42.1%2056H52.2333C53.7268%2056%2054.4735%2056%2055.044%2055.7094C55.5457%2055.4537%2055.9537%2055.0458%2056.2093%2054.544C56.5%2053.9736%2056.5%2053.2268%2056.5%2051.7334V49.6C56.5%2048.1066%2056.5%2047.3598%2056.2093%2046.7894C55.9537%2046.2876%2055.5457%2045.8797%2055.044%2045.624C54.4735%2045.3334%2053.7268%2045.3334%2052.2333%2045.3334H42.1C40.6065%2045.3334%2039.8598%2045.3334%2039.2894%2045.624C38.7876%2045.8797%2038.3796%2046.2876%2038.124%2046.7894C37.8333%2047.3598%2037.8333%2048.1066%2037.8333%2049.6V51.7334C37.8333%2053.2268%2037.8333%2053.9736%2038.124%2054.544C38.3796%2055.0458%2038.7876%2055.4537%2039.2894%2055.7094C39.8598%2056%2040.6065%2056%2042.1%2056Z'%20stroke='%23FC4C02'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",gn=["src"],_n=["src"],hn=O({__name:"Signature",props:{subScreens:{},data:{},screen:{}},emits:["alert","next","to"],setup(e,{emit:u}){const t=e,n=u,c=p(!0);return re(()=>{var a;if(!((a=t.data.patient)!=null&&a.has_face_recognition))return n("alert",{title:"Como gostaria de realizar o seu check-in?",text:"",action:{type:"choise",acceptLabel:"Agilizar com token",rejectLabel:"Ir para recepção",callback(r){if(r)return n("to","SendToken");n("to","Queues")}}});c.value=!1}),(a,r)=>(h(),T("div",null,[c.value?A("",!0):(h(),D(H,{key:0,justify:"center"},{default:d(()=>[s(R,{cols:"12",sm:"auto"},{default:d(()=>[a.data.patient.has_face_recognition?z((h(),D(Z,{key:0,onClick:r[0]||(r[0]=i=>a.$emit("to","FaceRecognition")),height:"200",style:{cursor:"pointer","white-space":"normal"},width:"280",class:"d-flex align-start justify-center flex-column px-4 py-10",color:"transparent",border:"sm",rounded:"lg"},{default:d(()=>[f("img",{src:Y(fn),height:"64"},null,8,gn),P("Assinatura PDF Biometria facial ")]),_:1})),[[K]]):A("",!0)]),_:1}),s(R,{cols:"12",sm:"auto"},{default:d(()=>[z((h(),D(Z,{onClick:r[1]||(r[1]=i=>a.$emit("to","SendToken")),height:"200",style:{cursor:"pointer","white-space":"normal"},width:"280",class:"d-flex align-start justify-center flex-column px-4 py-10",color:"transparent",border:"sm",rounded:"lg"},{default:d(()=>[f("img",{src:Y(pn),height:"64"},null,8,_n),P(" Token via SMS ou App ")]),_:1})),[[K]])]),_:1}),s(R,{cols:"12",sm:"auto"},{default:d(()=>[z((h(),D(Z,{onClick:r[2]||(r[2]=i=>a.$emit("to","PDFSignature")),height:"200",style:{cursor:"pointer","white-space":"normal"},width:"280",class:"d-flex align-start justify-center flex-column px-4 py-10",color:"transparent",border:"sm",rounded:"lg"},{default:d(()=>[s(Ie,{icon:"mdi-file-pdf-box",size:"64",color:"primary"}),P(" Assinatura do PDF ")]),_:1})),[[K]])]),_:1}),s(R,{cols:"12",md:"10"},{default:d(()=>[s(M,{block:"",rounded:"",variant:"outlined",class:"mt-6",onClick:r[3]||(r[3]=i=>a.$emit("to","Queues"))},{default:d(()=>[P(" Pular checkin e ir para a recepção ")]),_:1})]),_:1})]),_:1}))]))}}),bn=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"})),yn={class:"d-flex bg-white align-center justify-center fill-height w-100"},kn={class:"text-center mb-6",style:{"font-size":"1.4em"}},xn={class:"font-weight-bold"},wn=["innerHTML"],Cn={key:0,class:"d-flex justify-center"},Sn={key:1,class:"d-flex justify-center"},$n=O({__name:"ConfirmAlert",props:{modelValue:{type:Boolean},title:{},action:{},text:{}},emits:["update:modelValue"],setup(e,{emit:u}){const t=e,n=u,c=C({get(){return t.modelValue},set(i){n("update:modelValue",i)}});function a(i=!0){var o;if(c.value=!1,t.action.type==="choise"){t.action.callback(i);return}(o=t.action)!=null&&o.callback&&t.action.callback()}const r=C(()=>t.text instanceof Error?t.text.message:t.text);return(i,o)=>(h(),D(je,{modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=l=>c.value=l),persistent:"",fullscreen:"",class:"totem"},{default:d(()=>[s(Et,{class:"bg-white"},{default:d(()=>[f("div",yn,[f("div",null,[f("p",kn,[f("span",xn,I(i.title),1),f("div",{innerHTML:r.value},null,8,wn)]),i.action.type=="choise"?(h(),T("div",Cn,[f("div",null,[s(M,{variant:"outlined",color:"primary",class:"mr-2","min-width":"350",rounded:"",onClick:o[0]||(o[0]=l=>a(!1))},{default:d(()=>[P(I(i.action.rejectLabel),1)]),_:1}),s(M,{variant:"flat","min-width":"350",rounded:"",color:"primary",onClick:o[1]||(o[1]=l=>a())},{default:d(()=>[P(I(i.action.acceptLabel),1)]),_:1})])])):(h(),T("div",Sn,[s(M,{ariant:"flat",rounded:"",width:"350",color:"primary",onClick:o[2]||(o[2]=l=>a())},{default:d(()=>[P(I(i.action.label),1)]),_:1})]))])])]),_:1})]),_:1},8,["modelValue"]))}}),Vn={class:"mt-4 d-flex justify-space-between",style:{}},Tn=f("span",{class:"font-weight-bold"},"Voltar",-1),Ln=f("span",{class:"font-weight-bold"},"Cancelar",-1),jn={style:{width:"80%"},class:"mx-auto flex-grow-1 d-flex flex-column"},In={class:"text-center"},Pn=O({__name:"Default",props:{hideBack:{type:Boolean,default:!1},hideCancel:{type:Boolean,default:!1}},emits:["cancel","back"],setup(e,{expose:u,emit:t}){const n=t,c=jt(),a=p({}),r=C(()=>c.tenant.logo||Bt);p(!1);const i=C(()=>{const _=new Date,$=_.toLocaleDateString("pt-BR",{day:"2-digit"}),V=_.toLocaleDateString("pt-BR",{month:"long"}),L=_.toLocaleDateString("pt-BR",{year:"numeric"});return`${$} de ${Ht(V)} de ${L}`}),o=p("");let l=0;function m(){o.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});const _=new Date,$=6e4-(_.getSeconds()*1e3+_.getMilliseconds());setTimeout(()=>{o.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),l=setInterval(()=>{o.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})},6e4)},$)}function g(_){a.value=_}return u({setStyles:g}),E(()=>{m()}),Ve(()=>{clearInterval(l)}),(_,$)=>(h(),T("div",{class:"d-flex flex-column flex-grow-1 totem",style:Pt(a.value),fluid:""},[f("div",null,[f("div",null,[s(J,{src:r.value,width:"194"},null,8,["src"])]),f("div",Vn,[s(M,{variant:"text",color:"primary",onClick:$[0]||($[0]=V=>n("back")),disabled:_.hideBack},{default:d(()=>[s(Ie,{class:"mr-2",size:"30"},{default:d(()=>[P("mdi-chevron-left")]),_:1}),Tn]),_:1},8,["disabled"]),s(M,{variant:"text",color:"primary",onClick:$[1]||($[1]=V=>n("cancel")),disabled:_.hideCancel},{default:d(()=>[Ln]),_:1},8,["disabled"])])]),f("div",jn,[Te(_.$slots,"default")]),f("div",In,[s(It,{class:"my-4"}),P(" "+I(i.value)+" - "+I(o.value),1)])],4))}}),Gn=O({__name:"NewFlow",setup(e){p("");const u=p(!1),t=p(!1),n=p(),c=p({title:"",text:"",action:{type:"confirm",label:"Ok"}}),a=p({text:"",callback:v=>{}}),r=p([]),i=p(""),o=p({internal:{}}),l=Mt(),m=C(()=>l.params.id),g=p(structuredClone(Ut.totem)),_=se({}),$=p({hideBack:!0,hideCancel:!1}),V=p(0),L=p(""),B=p(null),w=p(60*5),S=C(()=>{var v;return(v=g.value.screens[V.value])==null?void 0:v.data}),x=C(()=>{if(L.value!=="")return ve(S.value,L.value)}),k=C(()=>(n.value&&n.value.setStyles({}),L.value===""?S.value:x.value)),b=C(()=>k.value?(_.value[k.value.component]||me("component-not-found"),_.value[k.value.component]):_.value.Loading);G(V,v=>{if(v==0)return $.value.hideBack=!0;$.value.hideBack=!1}),G(k,(v,y)=>{(v==null?void 0:v.component)===i.value||!(y!=null&&y.component)&&i.value===""||V.value!==0&&r.value.push(y.component)});const F=Object.assign({"/src/modules/patient/views/totem/BirthDate.vue":Qe,"/src/modules/patient/views/totem/Identifier.vue":qe,"/src/modules/patient/views/totem/Init.vue":We,"/src/modules/patient/views/totem/Loading.vue":Ge,"/src/modules/patient/views/totem/Queues/AttendanceType.vue":sa,"/src/modules/patient/views/totem/Queues/PasswordSuccess.vue":_a,"/src/modules/patient/views/totem/Queues/Queues.vue":xa,"/src/modules/patient/views/totem/Schedule.vue":Je,"/src/modules/patient/views/totem/Signature/CheckinSuccess.vue":Va,"/src/modules/patient/views/totem/Signature/FaceRecognition.vue":za,"/src/modules/patient/views/totem/Signature/PDFSignature.vue":on,"/src/modules/patient/views/totem/Signature/SendToken.vue":vn,"/src/modules/patient/views/totem/Signature/Signature.vue":bn,"/src/modules/patient/views/totem/Welcome.vue":Xe});Ae(),re(()=>{Qt(m.value).then(v=>{g.value=v.data})}),E(()=>{window.addEventListener("click",ee),window.addEventListener("keydown",ee)}),Dt(()=>{window.removeEventListener("click",ee),window.removeEventListener("keydown",ee),B.value!==null&&clearTimeout(B.value)});function Q(v){console.log("open loading"),console.log(v),t.value=!0,a.value=v,v.callback(t)}function q(){V.value=0,L.value="",o.value={internal:{}},i.value="",r.value=[],un()}function Be(){if(r.value.length===0)return;i.value=r.value.pop();const v=ze(i.value);v&&(V.value=v.index,L.value=v.subScreenComponent)}function Me(){const v=fe(S.value,x.value);if(!v){De();return}L.value=v.component}function De(){if(L.value="",V.value==g.value.screens.length-1){V.value=0;return}V.value++}function Oe(v){const y=ve(S.value,v);if(y){L.value=y.component;return}Re(v)}function Re(v){const y=Fe(v);if(!y)return me("flow-not-found");L.value="",V.value=g.value.screens.indexOf(y)}function de(v){c.value=v,u.value=!0}function me(v){de({title:"Erro de sistema",text:`Favor entrar em contato com a equipe de TI. (erro: ${v})`,action:{type:"confirm",label:"Ok"}})}const ee=()=>{B.value!==null&&clearTimeout(B.value),B.value=window.setTimeout(()=>{V.value!==0&&q()},w.value*1e3)};function ve(v,y){return v.subscreens.find(j=>j.component===y)}function Fe(v){return g.value.screens.find(y=>y.data.component===v)}function ze(v){let y=null;for(let j=0;j<g.value.screens.length;j++){const N=g.value.screens[j];if(N.data.component===v){y={index:j,subScreenComponent:""};break}for(let X=0;X<N.data.subscreens.length;X++){const pe=N.data.subscreens[X];if(pe.component===v){y={index:j,subScreenComponent:pe.component};break}}if(y)break}return y}function fe(v,y){if(v.subscreens.length===0)return;if(!y)return v.subscreens[0];const j=v.subscreens.findIndex(X=>X.component===y.component),N=v.subscreens[j+1];if(N!==void 0)return N.order===y.order?fe(v,N):v.subscreens[j+1]}function Ae(){for(const v in F){const y=Ee(v);y!==null&&(_.value[y]=F[v].default)}}function Ee(v){const y=v.match(/\/([^\/]+)\.vue$/);return y?y[1]:null}return(v,y)=>(h(),T(U,null,[A("",!0),s(Pn,W({ref_key:"layoutRef",ref:n,onBack:Be,onCancel:q},$.value),{default:d(()=>[(h(),D(Ot(b.value),{onAlert:de,onNext:Me,onTo:y[0]||(y[0]=j=>Oe(j)),onCancel:q,onLoading:Q,data:o.value,"onUpdate:data":y[1]||(y[1]=j=>o.value=j),layoutRef:n.value,totem:g.value,screen:k.value},null,40,["data","layoutRef","totem","screen"])),s($n,W({modelValue:u.value,"onUpdate:modelValue":y[2]||(y[2]=j=>u.value=j)},c.value),null,16,["modelValue"]),s(Nt,W({modelValue:t.value,"onUpdate:modelValue":y[3]||(y[3]=j=>t.value=j)},a.value),null,16,["modelValue"])]),_:1},16)],64))}});export { Gn as default };

