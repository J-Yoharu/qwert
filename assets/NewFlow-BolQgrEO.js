import{r as He,V as Qe,a as Ge,_ as We,b as Je,c as Xe,d as Ze,e as Ke,f as Ye}from"./Welcome-jO5KB8dm.js";import{_ as ke}from"./Form.vue_vue_type_script_setup_true_lang-BklVvCmT.js";import{a as O,V as E}from"./VRow-B67CuxgM.js";import{p as xe,aH as et,K as tt,L as we,g as Ce,z as at,t as nt,aI as ot,P as lt,N as Se,aJ as st,c as C,aK as it,f as Ve,h as o,aL as rt,aM as ut,y as ct,aN as dt,aw as mt,aO as vt,u as ft,aP as pt,aQ as _t,S as gt,aR as ht,B as bt,r as _,s as se,w as W,o as N,aS as yt,aT as _e,aU as kt,as as $e,D as xt,i as G,ay as wt,aV as Ct,X as Te,Y as F,a0 as g,a6 as V,a2 as d,a8 as I,ab as L,af as v,ac as P,an as St,F as U,a7 as ne,a1 as D,aW as z,a3 as J,aX as Z,aY as Vt,aZ as $t,ae as ie,a5 as A,T as re,a4 as Y,a_ as je,a$ as le,ak as Tt,b0 as ae,b1 as Le,W as Pe,Q as jt,b2 as Lt,b3 as Pt,b4 as It,b5 as Ie,b6 as Bt,V as Be,b7 as Mt,av as ge,am as Dt,b8 as Ft,aa as Ot,ah as Rt,b as At,aF as Et}from"./index-4Bqea0Er.js";import{V as Me}from"./VForm-P9TQYi-b.js";import{V as K}from"./VSheet-C95x3Of-.js";import{_ as zt,r as Nt}from"./Init.vue_vue_type_script_setup_true_lang-ms4ELqp6.js";import{V as qt}from"./VTextField-BZI8dh9o.js";import{_ as Ut,L as Ht}from"./Loading-ZBzcF_tE.js";import{c as Qt}from"./string-D3I3Kuho.js";import{d as Gt}from"./default-values-Cei7-cAt.js";import{f as Wt}from"./totem.repository-8XL7XZva.js";import"./VWindowItem-EjiPKtYJ.js";import"./ssrBoot-p_oOs_wa.js";import"./filter-DPHQAZuM.js";import"./VList-BbIgPgj0.js";import"./VSlideGroup-4jonERS_.js";import"./VTooltip-CRXeyXLK.js";import"./validator-B0EVo-yO.js";import"./VContainer-DPbtGzbR.js";const Jt={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Xt(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return o("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[u])}function he(e){const[u,t]=e.split("@");return Array.from({length:t}).map(()=>oe(u))}function oe(e){let u=[];if(!e)return u;const t=Jt[e];if(e!==t){if(e.includes(","))return be(e);if(e.includes("@"))return he(e);t.includes(",")?u=be(t):t.includes("@")?u=he(t):t&&u.push(oe(t))}return[Xt(e,u)]}function be(e){return e.replace(/\s/g,"").split(",").map(oe)}const Zt=xe({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...et(),...tt(),...we()},"VSkeletonLoader"),Kt=Ce()({name:"VSkeletonLoader",props:Zt(),setup(e,u){let{slots:t}=u;const{backgroundColorClasses:n,backgroundColorStyles:r}=at(nt(e,"color")),{dimensionStyles:a}=ot(e),{elevationClasses:c}=lt(e),{themeClasses:s}=Se(e),{t:l}=st(),i=C(()=>oe(it(e.type).join(",")));return Ve(()=>{var m;const f=!t.default||e.loading;return o("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},s.value,n.value,c.value],style:[r.value,f?a.value:{}],"aria-busy":e.boilerplate?void 0:f,"aria-live":e.boilerplate?void 0:"polite","aria-label":e.boilerplate?void 0:l(e.loadingText),role:e.boilerplate?void 0:"alert"},[f?i.value:(m=t.default)==null?void 0:m.call(t)])}),{}}});function Yt(e){const u=se(e);let t=-1;function n(){clearInterval(t)}function r(){n(),Te(()=>u.value=e)}function a(c){const s=c?getComputedStyle(c):{transitionDuration:.2},l=parseFloat(s.transitionDuration)*1e3||200;if(n(),u.value<=0)return;const i=performance.now();t=window.setInterval(()=>{const f=performance.now()-i+l;u.value=Math.max(e-f,0),u.value<=0&&n()},l)}return Ct(n),{clear:n,time:u,start:a,reset:r}}const ea=xe({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...rt({location:"bottom"}),...ut(),...ct(),...dt(),...we(),...mt(vt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),ta=Ce()({name:"VSnackbar",props:ea(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:t}=u;const n=ft(e,"modelValue"),{locationStyles:r}=pt(e),{positionClasses:a}=_t(e),{scopeId:c}=gt(),{themeClasses:s}=Se(e),{colorClasses:l,colorStyles:i,variantClasses:f}=ht(e),{roundedClasses:m}=bt(e),h=Yt(Number(e.timeout)),T=_(),$=_(),j=se(!1);W(n,w),W(()=>e.timeout,w),N(()=>{n.value&&w()});let M=-1;function w(){h.reset(),window.clearTimeout(M);const b=Number(e.timeout);if(!n.value||b===-1)return;const R=yt($.value);h.start(R),M=window.setTimeout(()=>{n.value=!1},b)}function S(){h.reset(),window.clearTimeout(M)}function x(){j.value=!0,S()}function k(){j.value=!1,w()}return Ve(()=>{const b=_e.filterProps(e),R=!!(t.default||t.text||e.text);return o(_e,G({ref:T,class:["v-snackbar",{"v-snackbar--active":n.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},a.value,e.class],style:e.style},b,{modelValue:n.value,"onUpdate:modelValue":H=>n.value=H,contentProps:G({class:["v-snackbar__wrapper",s.value,l.value,m.value,f.value],style:[r.value,i.value],onPointerenter:x,onPointerleave:k},b.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},c),{default:()=>{var H,Q;return[kt(!1,"v-snackbar"),e.timer&&!j.value&&o("div",{key:"timer",class:"v-snackbar__timer"},[o($e,{ref:$,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":h.time.value},null)]),R&&o("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((H=t.text)==null?void 0:H.call(t))??e.text,(Q=t.default)==null?void 0:Q.call(t)]),t.actions&&o(xt,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[o("div",{class:"v-snackbar__actions"},[t.actions()])]})]},activator:t.activator})}),wt({},T)}}),aa=v("h2",null,"Agora confirme que todos os seus contatos estão corretos.",-1),na=v("p",null," Estas informações serão utilizadas caso seja necessário o hospital entrar em contato com você. ",-1),oa=F({__name:"ContactInfo",props:{data:{}},setup(e){const u=_([{component:"VTextField",value:"fix_phone",label:"DDD + Telefone fixo",required:!0,cols:{cols:12,md:3}},{component:"VTextField",value:"cellphone",label:"DDD + Celular",required:!0,cols:{cols:12,md:3}},{component:"VTextField",value:"email",label:"E-mail",required:!0,cols:{cols:12,md:6}},{component:"VAutocomplete",value:"adress_type",label:"Tipo de endereço",required:!0,cols:{cols:12,md:3},props:{items:["Residencial","Comercial","Outro"]}},{component:"VTextField",value:"cep",label:"CEP",required:!0,cols:{cols:12,md:2}},{component:"VTextField",value:"aditional_adress",label:"Logradouro",required:!0,cols:{cols:12,md:5}},{component:"VTextField",value:"number",label:"Número",required:!0,cols:{cols:12,md:2}},{component:"VTextField",value:"complement",label:"Complemento",required:!0,cols:{cols:12,md:3}},{component:"VAutocomplete",value:"uf",label:"UF",required:!0,cols:{cols:12,md:3},props:{items:["SP","RJ","MG","PR","RS"]}},{component:"VAutocomplete",value:"city",label:"Cidade",required:!0,cols:{cols:12,md:6},props:{items:["São Paulo","Rio de Janeiro","Belo Horizonte","Curitiba","Porto Alegre"]}}]),t=_({fix_phone:"11 1234-5678",cellphone:"11 98765-4321",email:"paciente@test.com",adress_type:"Residencial",cep:"12345-678",aditional_adress:"Rua dos Bobos",number:"0",complement:"Apto 123",uf:"SP",city:"São Paulo"});return(n,r)=>(g(),V("div",null,[aa,na,o(ke,{class:"mt-5",form:u.value,modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=a=>t.value=a)},null,8,["form","modelValue"]),o(E,{justify:"center"},{default:d(()=>[o(O,{cols:"5"},{default:d(()=>[o(I,{block:"",rounded:"lg",color:"primary",onClick:r[1]||(r[1]=a=>n.$emit("next"))},{default:d(()=>[L("Continuar")]),_:1})]),_:1})]),_:1})]))}}),la=Object.freeze(Object.defineProperty({__proto__:null,default:oa},Symbol.toStringTag,{value:"Module"})),sa=v("p",null,"É muito importante que estas informações estejam corretas.",-1),ia=v("p",null," Elas serão utilizadas para sua identificação em todos os processos dentro do hospital. ",-1),ra=F({__name:"PatientInfo",props:{data:{}},emits:["to"],setup(e,{emit:u}){var l,i;const t=u,n=e,r=_(),a=_({id:(l=n.data.patient)==null?void 0:l.id,first_name:((i=n.data.patient)==null?void 0:i.first_name)+" da Silva Santos",sex:"Masculino",civil_state:"Solteiro",nacionality:"Brasileiro",religion:"Católico",gender:"Masculino"}),c=_([{component:"VTextField",value:"id",label:"CPF",required:!0,cols:{cols:12,md:4},props:{disabled:!0}},{component:"VTextField",value:"first_name",label:"Nome completo",required:!0,cols:{cols:12,md:4}},{component:"VTextField",value:"social_name",label:"Nome socia",cols:{cols:12,md:4}},{component:"VAutocomplete",value:"sex",label:"Sexo",required:!0,cols:{cols:12,md:4},props:{items:["Masculino","Feminino"]}},{component:"VAutocomplete",value:"gender",label:"Gênero",cols:{cols:12,md:4},props:{items:["Masculino","Feminino","Lésbica","Bissexual","Transexual","Travesti","Outro"]}},{component:"VTextField",value:"rg",label:"RG",required:!0,cols:{cols:12,md:4}},{component:"VAutocomplete",value:"civil_state",label:"Estado civil",required:!0,cols:{cols:12,md:4},props:{items:["Solteiro","Casado","Divorciado","Viúvo"]}},{component:"VAutocomplete",value:"nacionality",label:"Nacionalidade",required:!0,cols:{cols:12,md:4},props:{items:["Brasileiro","Americano","Alemão","Francês","Italiano","Japonês","Chinês","Coreano","Outro"]}},{component:"VAutocomplete",value:"religion",label:"Religião",required:!0,cols:{cols:12,md:4},props:{items:["Católico","Evangélico","Espírita","Ateu","Agnóstico","Outro"]}}]);function s(){r.value.validate()&&t("to","ContactInfo")}return(f,m)=>{var h;return g(),V("div",null,[v("h2",null,[v("b",null,P((h=f.data.patient)==null?void 0:h.first_name),1),L(", revise suas informações pessoais.")]),sa,ia,o(Me,{ref_key:"formElement",ref:r,onSubmit:St(s,["prevent"])},{default:d(()=>[o(ke,{class:"mt-5",modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=T=>a.value=T),form:c.value},null,8,["modelValue","form"]),o(E,{justify:"center"},{default:d(()=>[o(O,{cols:"5"},{default:d(()=>[o(I,{type:"submit",block:"",rounded:"lg",color:"primary"},{default:d(()=>[L("Continuar")]),_:1})]),_:1})]),_:1})]),_:1},512)])}}}),ua=Object.freeze(Object.defineProperty({__proto__:null,default:ra},Symbol.toStringTag,{value:"Module"}));function ca(e){return new Promise((u,t)=>{setTimeout(()=>{if(console.log(e),e.patient_id=="44444444444")return t("Não foi possível gerar a sua senha");u({data:{value:"C219",site:"Barra da Tijuca"}})},2e3)})}const da=e=>(Vt("data-v-80568fcc"),e=e(),$t(),e),ma=da(()=>v("h1",{class:"text-center"}," Escolha seu tipo de prioridade: ",-1)),va={class:"mr-2"},fa={class:"font-weight-bold"},pa=F({__name:"AttendanceType",props:{totem:{},data:{}},emits:["alert","next","cancel","loading","update:data"],setup(e,{emit:u}){const t=e,n=u,r=C({get:()=>t.data,set:c=>n("update:data",c)});async function a(c){var l;const s={queue_id:c.integration_id,patient_id:(l=r.value.patient)==null?void 0:l.id};n("loading",{text:"Gerando senha",async callback(i){ca(s).then(f=>{r.value.ticket=f.data,i.value=!1,n("next")}).catch(f=>{i.value=!1,n("alert",{title:f,text:"Fale com a recepção para prosseguir com o seu atendimento",action:{type:"confirm",label:"Ok, entendi",callback(){n("cancel")}}})})}})}return(c,s)=>(g(),V("div",null,[o(E,null,{default:d(()=>[o(O,{cols:"12"},{default:d(()=>[ma]),_:1}),(g(!0),V(U,null,ne(r.value.queue.attendance_types,(l,i)=>(g(),D(O,{cols:"12",md:"4",key:i},{default:d(()=>[z((g(),D(K,{onClick:f=>a(l),color:"transparent",style:{cursor:"pointer","white-space":"normal"},border:"sm",rounded:"",class:"pa-6 d-flex align-center",link:"",height:c.$vuetify.display.mdAndUp?"300":"auto"},{default:d(()=>[v("div",null,[v("div",va,[o(J,{src:l.data.icon,width:"64",height:"64"},null,8,["src"])]),v("h2",fa,P(l.data.name),1),v("p",null,P(l.data.description),1)])]),_:2},1032,["onClick","height"])),[[Z]])]),_:2},1024))),128))]),_:1})]))}}),_a=ie(pa,[["__scopeId","data-v-80568fcc"]]),ga=Object.freeze(Object.defineProperty({__proto__:null,default:_a},Symbol.toStringTag,{value:"Module"})),ha={key:0,class:"font-weight-bold text-secondary text-h4"},ba=F({__name:"Timer",props:{time:{default:15},hideNumber:{type:Boolean,default:!1},startManual:{type:Boolean,default:!1}},emits:["end"],setup(e,{expose:u,emit:t}){const n=e,r=t;u({start:f});const a=_(n.time),c=_(),s=_();W(n,(m,h)=>{m.time<h.time||(a.value=n.time,l(),f())});function l(){clearInterval(c.value),clearTimeout(s.value)}const i=C(()=>a.value*100/n.time);function f(){c.value=setInterval(()=>{a.value--},1e3),s.value=setTimeout(()=>{clearInterval(c.value),r("end")},n.time*1e3)}return N(()=>{n.startManual||f()}),(m,h)=>(g(),D($e,{class:"progress",height:"6",modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=T=>i.value=T),color:"primary"},{default:d(()=>[m.hideNumber?A("",!0):(g(),V("span",ha,P(a.value),1))]),_:1},8,["modelValue"]))}}),ue=ie(ba,[["__scopeId","data-v-4807d716"]]),De="data:image/svg+xml,%3csvg%20width='113'%20height='112'%20viewBox='0%200%20113%20112'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M103.167%2051.7067V56C103.161%2066.0633%2099.9025%2075.8552%2093.8771%2083.9152C87.8516%2091.9752%2079.3822%2097.8716%2069.7318%20100.725C60.0815%20103.578%2049.7674%20103.236%2040.3277%2099.7481C30.888%2096.2606%2022.8286%2089.8151%2017.3513%2081.373C11.8741%2072.9308%209.27252%2062.9443%209.93465%2052.9028C10.5968%2042.8613%2014.4871%2033.3029%2021.0255%2025.653C27.5638%2018.0032%2036.3998%2012.6718%2046.2157%2010.454C56.0316%208.23626%2066.3014%209.25092%2075.4935%2013.3467'%20stroke='%2304B300'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M103.167%2018.6665L56.5%2065.3798L42.5%2051.3798'%20stroke='%2304B300'%20stroke-width='6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ya={key:0},ka={key:1,class:"fill-height d-flex align-center justify-center flex-column"},xa=["src"],wa=v("h1",{class:"text-success"},"Senha gerada com sucesso! :)",-1),Ca=v("p",null,"Retire sua senha e aguarde ser chamado pelo painel da recepção.",-1),Sa={class:"w-100"},Va=["src"],$a=F({__name:"PasswordSuccess",props:{data:{}},emits:["alert","next","cancel","loading"],setup(e,{emit:u}){const t=e,n=C(()=>{const i=new URLSearchParams(t.data.ticket);return window.location.origin+`qwert/#/senha?${i.toString()}`}),r=u,a=_(null),c=_(!1),s=C(()=>"api"in window);function l(){r("loading",{text:"Aguarde só mais um instante",callback(i){window.api.print(JSON.parse(JSON.stringify(t.data.ticket))).then(()=>{var f;c.value=!1,i.value=!1,(f=a.value)==null||f.start()}).catch(f=>{var m;r("alert",{title:"Ops, Não foi possível imprimir a senha! :(",text:`Por favor, anote o número abaixo <br/> <h1> ${(m=t.data.ticket)==null?void 0:m.value} </h1> Já acionamos a equipe responsavel para cuidar disso`,action:{type:"confirm",label:"Já anotei a minha senha",callback(){r("cancel"),c.value=!1,i.value=!1}}})})}})}return re(()=>{if(s.value)return l()}),N(async()=>{var i;await Te(),s.value||(c.value=!1,(i=a.value)==null||i.start())}),(i,f)=>c.value?(g(),V("div",ya)):(g(),V("div",ka,[v("div",null,[v("img",{src:Y(De)},null,8,xa)]),wa,Ca,v("div",Sa,[o(ue,{"hide-number":"","start-manual":"",time:15,ref_key:"timer",ref:a,onEnd:f[0]||(f[0]=m=>i.$emit("cancel")),class:"mt-4"},null,512)]),s.value?A("",!0):(g(),V("iframe",{key:0,src:n.value,frameborder:"0",class:"rounded-xl border mt-6",height:"200"},null,8,Va))]))}}),Ta=Object.freeze(Object.defineProperty({__proto__:null,default:$a},Symbol.toStringTag,{value:"Module"})),ja=v("h1",null,"O que você deseja fazer hoje?",-1),La={class:"mr-2"},Pa={class:"font-weight-medium"},Ia=F({__name:"Queues",props:{totem:{},data:{}},emits:["alert","next","cancel","update:data"],setup(e,{emit:u}){const t=u,n=e,r=C({get:()=>n.data,set:s=>t("update:data",s)});function a(s){const l=new Date().getDay(),i=s.attendance_hours.find(f=>f.weekday_iso==l);if(i){if(!c(i==null?void 0:i.start_time,i==null?void 0:i.end_time))return t("alert",{title:"Ops, infelizmente já passamos do horário de atendimento! :(",text:`O horário de atendimento é das ${i.start_time} às ${i.end_time} <br/> ${s.off_hours_message??""}`,action:{type:"confirm",label:"Ok, entendi",callback(){t("cancel")}}});r.value.queue=s,t("next")}}function c(s,l){const i=new Date,f=new Date,m=new Date,[h,T]=s.split(":"),[$,j]=l.split(":");return f.setHours(parseInt(h),parseInt(T)),m.setHours(parseInt($),parseInt(j)),i>=f&&i<=m}return(s,l)=>(g(),V("div",null,[o(E,null,{default:d(()=>[o(O,{cols:"12",class:"text-center"},{default:d(()=>[ja]),_:1}),o(E,{justify:"center"},{default:d(()=>[o(O,{cols:"10"},{default:d(()=>[o(E,{justify:"center"},{default:d(()=>[(g(!0),V(U,null,ne(s.totem.queues,(i,f)=>(g(),D(O,{cols:"12",md:"auto",key:f,class:"d-flex justify-center"},{default:d(()=>[z((g(),D(K,{color:"transparent",onClick:m=>a(i),style:{cursor:"pointer","white-space":"normal"},border:"sm",rounded:"",class:"d-flex pa-6",link:"","min-height":"80",width:"342",click:"checkQueue(queue)"},{default:d(()=>{var m,h;return[v("div",La,[o(J,{src:(m=i.data)==null?void 0:m.icon_src,width:"32",height:"32"},null,8,["src"])]),v("p",Pa,P((h=i.data)==null?void 0:h.name),1)]}),_:2},1032,["onClick"])),[[Z]])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]))}}),Ba=Object.freeze(Object.defineProperty({__proto__:null,default:Ia},Symbol.toStringTag,{value:"Module"})),Ma={class:"fill-height d-flex justify-center align-center"},Da=v("h1",{class:"text-success text-center"}," Você realizou o check-in rápido! :) ",-1),Fa=v("p",{class:"text-center"}," Com esse benefício você não precisa mais enfrentar filas, basta aguardar ser chamado por seu médico pelo painel. ",-1),Oa=F({__name:"CheckinSuccess",emits:["cancel"],setup(e){return(u,t)=>(g(),V("div",Ma,[v("div",null,[o(J,{height:"112",src:Y(De),class:"mb-4"},null,8,["src"]),Da,Fa,o(ue,{"hide-number":"",timer:20,class:"mt-4",onEnd:t[0]||(t[0]=n=>u.$emit("cancel"))})])]))}}),Ra=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"})),Aa={class:"d-flex flex-column flex-grow-1"},Ea={class:"text-center"},za={class:"text-primary"},Na={class:"d-flex flex-column flex-grow-1",style:{"flex-grow":"1",background:"#4b4b4b"}},qa={style:{width:"50%"},class:"d-flex flex-column justify-center align-center flex-grow-1 mx-auto position-relative"},Ua=["src"],Ha={key:1,class:"avatar-capture"},Qa={class:"flex-grow-0"},Ga={class:"d-flex"},te=3,ye=3,Wa=F({__name:"FaceRecognition",props:{data:{}},emits:["alert","next","to"],setup(e,{emit:u}){const t=u,n=e,r=_(null),a=_(!1),c=_(!1),s=_(!1),l=_(null),i=_(0),f=_(ye),m=_(!1),h=C(()=>i.value>=te?"Limite de tentativas excedido":i.value>0?"Tentar novamente":!a.value&&!l.value?"Iniciar verificação":"Tirar outra foto");function T(){j(),l.value=null}function $(){const x=setInterval(()=>{if(f.value===0){w(),f.value=ye,clearInterval(x);return}f.value--},1e3)}const j=async(x=!0)=>{try{const k=await navigator.mediaDevices.getUserMedia({video:!0});r.value&&(r.value.srcObject=k,x&&(a.value=!0,$()))}catch(k){t("alert",{title:"Erro ao acessar a câmera",text:k,action:{type:"confirm",label:"fechar"}})}};function M(){return new Promise((x,k)=>{try{c.value=!0,setTimeout(()=>{if(!r.value)return;const b=document.createElement("canvas");b.width=r.value.videoWidth,b.height=r.value.videoHeight;const R=b.getContext("2d");R==null||R.drawImage(r.value,0,0,b.width,b.height),x(b.toDataURL("image/png")),c.value=!1},200)}catch(b){k(b)}})}async function w(){if(l.value=await M(),!r.value)return;const x=r.value.srcObject;M(),x.getTracks().forEach(b=>{b.stop()}),r.value.srcObject=null,a.value=!1}function S(){var x;l.value&&(s.value=!0,He(l.value,(x=n.data.patient)==null?void 0:x.id).then(k=>{n.data.internal.faceRecognition=l.value,t("next")}).catch(k=>{if(i.value++,m.value=!0,l.value=null,i.value>=te){t("alert",{title:`Você atingiu ${te} tentativas de leitura biométrica!`,text:"Deseja tentar com o Token?",action:{type:"choise",rejectLabel:"Ir para recepção",acceptLabel:"Tentar com Token",callback(b){if(!b)return t("to","Queues");t("to","SendToken")}}});return}}).finally(()=>{s.value=!1}))}return je(()=>{w()}),N(()=>{n.data.internal.faceRecognition&&(l.value=n.data.internal.faceRecognition),j(!1)}),(x,k)=>(g(),V("div",Aa,[v("h1",Ea,[z(v("span",null,[L(" Capturando em "),v("span",za,P(f.value),1)],512),[[le,a.value]]),z(v("span",null," Posicione-se em frente a câmera ",512),[[le,!a.value]])]),v("div",Na,[v("div",qa,[v("video",{ref_key:"video",ref:r,class:"bg-grey position-absolute",autoplay:"",style:{"object-fit":"fill",left:"0",right:"0",top:"0",bottom:"0",width:"100%",height:"100%"}},null,512),v("div",{class:Tt(["cover position-absolute d-flex justify-center align-center",{active:c.value}]),style:{width:"100%",left:"0",right:"0",top:"0",bottom:"0",height:"100%"}},[l.value?(g(),V("img",{key:0,src:l.value,style:{width:"100%",height:"100%"}},null,8,Ua)):(g(),V("div",Ha))],2)])]),v("div",Qa,[v("div",Ga,[o(I,{class:"mx-auto px-8 py-2 mt-8",rounded:"",color:"primary",disabled:a.value,onClick:T},{default:d(()=>[L(P(h.value),1)]),_:1},8,["disabled"]),o(I,{loading:s.value,class:"mx-auto px-8 py-2 mt-8",disabled:!l.value,rounded:"",color:"green",onClick:S},{default:d(()=>[L(" Confirmar ")]),_:1},8,["loading","disabled"])])]),o(ta,{modelValue:m.value,"onUpdate:modelValue":k[0]||(k[0]=b=>m.value=b),position:"absolute",location:"top right",color:"red"},{default:d(()=>[L(" Faces divergentes, não é a mesma pessoa. Tentativas restantes: "+P(te-i.value),1)]),_:1},8,["modelValue"])]))}}),Ja=ie(Wa,[["__scopeId","data-v-4a7f690e"]]),Xa=Object.freeze(Object.defineProperty({__proto__:null,default:Ja},Symbol.toStringTag,{value:"Module"})),Za=F({__name:"IFrameVue",props:{showLoading:{type:Boolean,default:!0}},setup(e){const u=_(!0);return(t,n)=>(g(),V(U,null,[o(Pe,{name:"fade"},{default:d(()=>[t.showLoading&&u.value?(g(),D(ae,{key:0,variant:"tonal",elevation:"5",class:"pa-5 h-100"},{default:d(()=>[Le(t.$slots,"loading",{loading:u.value},()=>[o(ae,{variant:"outlined",rounded:"0",class:"mx-auto pa-10 h-100",style:{width:"70%"}},{default:d(()=>[o(ae,{variant:"outlined",class:"h-100",rounded:"0"},{default:d(()=>[(g(),V(U,null,ne(6,r=>o(Kt,{type:r%2==0?"paragraph":"article"},null,8,["type"])),64))]),_:1})]),_:1})])]),_:3})):A("",!0)]),_:3}),z(v("iframe",G({onLoad:n[0]||(n[0]=r=>u.value=!1)},t.$attrs),null,16),[[le,!u.value]])],64))}}),Ka={class:"d-flex justify-end text-h5"},Ya={style:{overflow:"scroll",height:"90%"}},en={class:"d-flex align-center h-100",style:{overflow:"scroll"}},tn=F({__name:"GuideCarousel",props:{urls:{}},setup(e){const u=e,t=_(0),n=C(()=>u.urls),r=C(()=>t.value+1),a=C(()=>t.value===n.value.length-1),c=C(()=>t.value===0);return(s,l)=>(g(),V(U,null,[v("div",Ka,P(r.value)+" / "+P(n.value.length),1),v("div",Ya,[v("div",en,[o(I,{color:c.value?"":"primary",size:"large",icon:"mdi-chevron-left",class:"mr-2",onClick:l[0]||(l[0]=i=>t.value--),disabled:c.value},null,8,["color","disabled"]),o(Qe,{class:"h-100","show-arrows":!1,"hide-delimiters":"","hide-delimiter-background":"",modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=i=>t.value=i)},{default:d(()=>[(g(!0),V(U,null,ne(n.value,(i,f)=>(g(),D(Ge,{key:f},{default:d(()=>[o(Za,{src:i+"?page=hsn#toolbar=0",height:"100%",width:"100%",style:{border:"none"}},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["modelValue"]),o(I,{color:a.value?"":"primary",size:"large",icon:"mdi-chevron-right",disabled:a.value,class:"ml-2",onClick:l[2]||(l[2]=i=>t.value++)},null,8,["color","disabled"])])])],64))}}),an="/qwert/assets/totem-VpQX9TsR.png",nn="/qwert/assets/totem-tablet-focus-DjzX2n2c.png",on="/qwert/assets/tablet-jtXbmNYi.svg";function ln(){const{smAndDown:e,mdAndDown:u,lgAndUp:t,md:n,mobile:r}=jt(),a=C(()=>["responsive-font"]),c=C(()=>[{"text-h6":e.value,"text-h5":n.value,"text-h4":t.value},"my-4"]),s=C(()=>{switch(!0){case e.value:return"small";case u.value:return"default";default:return"large"}});return{title:a,subtitle:c,btnSize:s,mobile:r}}const sn=v("h1",null,"Assinatura de Guia",-1),rn={key:0},un=["innerHTML"],cn={key:1},dn=["innerHTML"],mn=F({__name:"HelpSignatureFlow",props:{modelValue:{type:Boolean}},emits:["update:modelValue","end"],setup(e,{emit:u}){const t=e,n=u;ln();const r=_(!1),a=[{text:"Bem-vindo ao nosso sistema de autoatendimento! <br/> Realize a assinatura da sua guia de forma rápida e simples. Siga as etapas abaixo para concluir o processo",image:an},{text:"No canto esquerdo do totem, você verá um tablet.",image:nn},{text:"Utilize a caneta que está em cima do tablet. <br> Após assinar, toque no botão <strong>'OK'</strong> na tela para confirmar",image:on}],c=_(!1),s=_(0),l=_(null);W(s,x=>{x==a.length-1&&!r.value&&(r.value=!0,n("end",!0))});const i=C(()=>s.value==0),f=C(()=>s.value==a.length-1),m=C(()=>a[s.value]),h=C({get(){return t.modelValue},set(x){n("update:modelValue",x)}}),T=C(()=>m.value.text.split(" ").length),$=C(()=>T.value*500);function j(){clearTimeout(l.value),s.value++}function M(){clearTimeout(l.value),s.value--}function w(x){x&&S($.value)}function S(x){console.log(`Step: ${m.value.text} 
 reading time second: ${x/1e3}s`),a.length-1!=s.value&&(c.value=!c.value,s.value++)}return(x,k)=>(g(),D(Ie,{modelValue:h.value,"onUpdate:modelValue":[k[2]||(k[2]=b=>h.value=b),w],width:"100%",persistent:"",class:"totem"},{default:d(()=>[o(ae,null,{default:d(()=>[o(Lt,{class:"text-center"},{default:d(()=>[sn]),_:1}),o(Pt,{style:{"overflow-y":"hidden"},class:"d-flex align-center justify-center justify-space-between"},{default:d(()=>[o(I,{fab:"",onClick:M,icon:"mdi-chevron-left",color:"primary",disabled:i.value},null,8,["disabled"]),o(Pe,{name:"slide-up",mode:"out-in"},{default:d(()=>[c.value?(g(),V("div",cn,[v("p",{class:"text-center",innerHTML:m.value.text},null,8,dn),o(J,{src:m.value.image,height:"400"},null,8,["src"])])):(g(),V("div",rn,[v("p",{class:"text-center mt-3",innerHTML:m.value.text},null,8,un),o(J,{src:m.value.image,height:"400"},null,8,["src"])]))]),_:1}),o(I,{fab:"",onClick:j,icon:"mdi-chevron-right",color:"primary",disabled:f.value},null,8,["disabled"])]),_:1}),o(It,{class:"d-flex justify-end"},{default:d(()=>[o(I,{variant:"tonal",color:"primary",class:"pa-1",onClick:k[0]||(k[0]=b=>s.value=a.length-1),disabled:s.value==a.length-1},{default:d(()=>[L(" Pular Ajuda ")]),_:1},8,["disabled"])]),_:1}),s.value!=a.length-1?(g(),D(ue,{onTimerEnd:k[1]||(k[1]=b=>S($.value)),key:s.value,time:$.value/1e3,"hide-number":""},null,8,["time"])):A("",!0)]),_:1})]),_:1},8,["modelValue"]))}});function vn(){return new Promise((e,u)=>{setTimeout(()=>e({data:{nr_sequencia_autor:"6546748",guia:{nr_guia:5087294,nr_prescricao:19828424,codigomensagem:"0",ds_mensagem:"Guia assinada com sucesso"}}}),4e3)})}const fn={class:"fill-height"},pn=F({__name:"PDFSignature",props:{data:{}},emits:["update:data","next","cancel","alert","loading","to"],setup(e,{emit:u}){const t=e,n=u,r=_(!1),a=_(!1),c=C(()=>{var l;return((l=t.data.patient)==null?void 0:l.schedules.map(i=>{var f;return(f=i.guide)==null?void 0:f.url}).filter(i=>i))??[]});function s(){r.value=!0,vn().then(l=>{n("next")}).catch(l=>{a.value=!1,n("alert",l)}).finally(()=>{r.value=!1})}return N(()=>{c.value.length||n("to","Queues")}),(l,i)=>(g(),V("div",fn,[o(tn,{urls:c.value},{append:d(()=>[]),_:1},8,["urls"]),o(I,{block:"",disabled:r.value,loading:r.value,size:"x-large",color:"primary",onClick:i[0]||(i[0]=f=>a.value=!0)},{default:d(()=>[L(" Clique para assinar a guia do convênio ")]),_:1},8,["disabled","loading"]),o(mn,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=f=>a.value=f),onEnd:s},null,8,["modelValue"])]))}}),_n=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"}));function gn(e){return new Promise((u,t)=>{setTimeout(()=>e=="123456"?u({data:!0}):t({data:{message:"Token inválido",maxAttempts:ce--}}),1e3)})}function hn(){return new Promise(e=>{setTimeout(()=>e({data:!0}),1e3)})}var ce=2;function bn(e){return new Promise((u,t)=>{setTimeout(()=>e=="123456"?u({data:!0}):t({data:{message:"Token inválido",maxAttempts:ce--}}),4e3)})}function yn(){ce=2}const kn={key:0},xn=v("p",{class:"mt-10"}," Caso não tenha acesso ao código ou seu número esteja incorreto, volte uma etapa para tentar a leitura biométrica ou pule o check-in para passar na recepção. ",-1),wn=F({__name:"SendToken",props:{data:{}},emits:["update:data","next","cancel","alert","loading","to"],setup(e,{emit:u}){const t=e,n=u,r=C({get:()=>t.data,set:w=>n("update:data",w)}),a=_({data:"",wasSended:!1,isValid:!1,expiration:10,timer:0,sendLoading:!1,timesItWasSend:0}),c=_(),s=_(),l=_(!1),i=C(()=>a.value.timesItWasSend<=1?"Não recebi o código":"Reenviar código");function f(w,S){return S.length<w?`Mínimo de ${w} caracteres`:!0}function m(w){return w.length==7&&a.value.wasSended&&!a.value.isValid?"Token inválido":!0}function h(){return a.value.data.replace(/\D/g,"")}const T=_(!1);function $(){l.value=!0,gn(h()).then(()=>{n("loading",{text:"Aguardando autorização da operadora",callback(w){bn(h()).then(()=>{w.value=!1,n("next")}).catch(S=>{var x,k;w.value=!1,n("alert",{title:`Ops, ${(k=(x=S.response)==null?void 0:x.data)==null?void 0:k.message} :(`,text:"Tente novamente",action:{type:"choise",acceptLabel:"Ok, entendi",rejectLabel:"Finalizar",callback(b){if(!b)return n("cancel");n("to","Queues")}}})})}})}).catch(w=>{var S;if(console.log({error:w}),a.value.wasSended=!0,a.value.isValid=!1,c.value.validate(),w.data.maxAttempts<=0){const x={title:"Você atingiu o limite de tentativas",text:"Vamos te encaminhar para a recepção :)"};if((S=r.value.patient)!=null&&S.has_face_recognition)return n("alert",{...x,action:{type:"choise",acceptLabel:"Ir para recepção",rejectLabel:"Tentar com biometria facial",callback(k){if(!k)return n("to","FaceRecognition");n("to","Queues")}}});n("alert",{...x,action:{type:"confirm",label:"Ok, entendi",callback(){n("to","Queues")}}})}}).finally(()=>l.value=!1)}function j(){var S,x;M();const w={title:`Enviamos um novo código SMS para o seu celular com o final ${(S=r.value.patient)==null?void 0:S.phone_hint} e para o seu app :)`,text:""};if((x=r.value.patient)!=null&&x.has_face_recognition)return n("alert",{...w,action:{type:"choise",acceptLabel:"Continuar",rejectLabel:"Tentar com biometria facial",callback(k){if(!k)return n("to","FaceRecognition");a.value.data="",c.value.resetValidation(),setTimeout(()=>s.value.focus(),500)}}});n("alert",{...w,action:{type:"choise",acceptLabel:"Continuar",rejectLabel:"Ir para recepção",callback(k){if(!k)return n("to","Queues");a.value.data="",c.value.resetValidation(),setTimeout(()=>s.value.focus(),500)}}})}function M(){a.value.timesItWasSend++,a.value.sendLoading=!0,hn().then(()=>{if(a.value.timesItWasSend<=1){a.value.sendLoading=!1;return}a.value.timer=a.value.expiration;const w=setInterval(()=>{if(a.value.timer==0)return a.value.sendLoading=!1,clearInterval(w);a.value.timer--},1e3)}).catch(w=>{console.log({errorSendToken:w})})}return N(()=>{M()}),(w,S)=>{const x=zt,k=Bt("mask");return g(),V("div",null,[o(E,{justify:"center"},{default:d(()=>[o(O,{cols:"12"},{default:d(()=>{var b;return[v("h1",null," Enviamos um código SMS para o seu celular com final "+P((b=r.value.patient)==null?void 0:b.phone_hint)+" e para o seu app. ",1)]}),_:1}),o(O,{cols:"12",md:"8",lg:"7"},{default:d(()=>[o(Me,{modelValue:T.value,"onUpdate:modelValue":S[2]||(S[2]=b=>T.value=b),"lazy-validation":"",ref_key:"formElement",ref:c},{default:d(()=>[z(o(qt,{"onUpdate:modelValue":[S[0]||(S[0]=b=>a.value.wasSended=!1),S[1]||(S[1]=b=>a.value.data=b)],ref_key:"inputElement",ref:s,"validate-on":"input",modelValue:a.value.data,number:"",rules:[Y(Nt),b=>f(6,h()),m],placeholder:"000-000"},null,8,["modelValue","rules"]),[[k,"###-###"]])]),_:1},8,["modelValue"]),o(E,{class:"d-flex",dense:"",justify:"center"},{default:d(()=>[o(O,{cols:"12",md:"7"},{default:d(()=>[o(I,{rounded:"",variant:"outlined",class:"mr-4",onClick:j,disabled:a.value.sendLoading},{default:d(()=>[L(P(i.value),1)]),_:1},8,["disabled"]),a.value.timer>0?(g(),V("div",kn," Seu código expira em 0:"+P(a.value.timer.toString().padStart(2,"0")),1)):A("",!0)]),_:1}),o(O,{cols:"12",md:"5"},{default:d(()=>[o(I,{color:"primary",onClick:$,disabled:!T.value||a.value.data.length!=7||l.value,loading:l.value,rounded:""},{default:d(()=>[L(" Continua ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),xn,o(I,{variant:"text",class:"mt-4 text-primary",onClick:S[3]||(S[3]=b=>w.$emit("to","Queues"))},{default:d(()=>[L(" Pular check-in rápido ")]),_:1})]),_:1}),o(O,{cols:"12",md:"4",lg:"5",class:"d-flex justify-center"},{default:d(()=>[o(x,{"always-visible":""})]),_:1})]),_:1})])}}}),Cn=Object.freeze(Object.defineProperty({__proto__:null,default:wn},Symbol.toStringTag,{value:"Module"})),Sn="data:image/svg+xml,%3csvg%20width='65'%20height='64'%20viewBox='0%200%2065%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.8333%208H21.3C16.8196%208%2014.5794%208%2012.8681%208.87195C11.3628%209.63893%2010.1389%2010.8628%209.37195%2012.3681C8.5%2014.0794%208.5%2016.3196%208.5%2020.8V21.3333M21.8333%2056H21.3C16.8196%2056%2014.5794%2056%2012.8681%2055.1281C11.3628%2054.3611%2010.1389%2053.1372%209.37195%2051.6319C8.5%2049.9206%208.5%2047.6804%208.5%2043.2V42.6667M56.5%2021.3333V20.8C56.5%2016.3196%2056.5%2014.0794%2055.6281%2012.3681C54.8611%2010.8628%2053.6372%209.63894%2052.1319%208.87195C50.4206%208%2048.1804%208%2043.7%208H43.1667M56.5%2042.6667V43.2C56.5%2047.6804%2056.5%2049.9206%2055.6281%2051.6319C54.8611%2053.1372%2053.6372%2054.3611%2052.1319%2055.1281C50.4206%2056%2048.1804%2056%2043.7%2056H43.1667M20.5%2021.3333V25.3333M44.5%2021.3333V25.3333M29.8333%2033.6003C31.9667%2033.6003%2033.8333%2031.7336%2033.8333%2029.6003V21.3333M41.0339%2040.5332C36.2339%2045.3332%2028.5005%2045.3332%2023.7005%2040.5332'%20stroke='%23FC4C02'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Vn="data:image/svg+xml,%3csvg%20width='65'%20height='64'%20viewBox='0%200%2065%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M59.1667%2029.3334V21.8667C59.1667%2018.8798%2059.1667%2017.3863%2058.5854%2016.2454C58.074%2015.2419%2057.2581%2014.426%2056.2546%2013.9147C55.1138%2013.3334%2053.6203%2013.3334%2050.6333%2013.3334H14.3667C11.3797%2013.3334%209.88624%2013.3334%208.74538%2013.9147C7.74185%2014.426%206.92595%2015.2419%206.41463%2016.2454C5.83333%2017.3863%205.83333%2018.8798%205.83333%2021.8667V31.4667C5.83333%2034.4537%205.83333%2035.9471%206.41463%2037.088C6.92595%2038.0915%207.74185%2038.9074%208.74538%2039.4187C9.88624%2040%2011.3797%2040%2014.3667%2040H29.8333M32.5%2026.6667H32.5133M45.8333%2026.6667H45.8467M19.1667%2026.6667H19.18M51.8333%2045.3334V40.6667C51.8333%2038.0894%2049.744%2036%2047.1667%2036C44.5893%2036%2042.5%2038.0894%2042.5%2040.6667V45.3334M33.1667%2026.6667C33.1667%2027.0349%2032.8682%2027.3334%2032.5%2027.3334C32.1318%2027.3334%2031.8333%2027.0349%2031.8333%2026.6667C31.8333%2026.2985%2032.1318%2026%2032.5%2026C32.8682%2026%2033.1667%2026.2985%2033.1667%2026.6667ZM46.5%2026.6667C46.5%2027.0349%2046.2015%2027.3334%2045.8333%2027.3334C45.4651%2027.3334%2045.1667%2027.0349%2045.1667%2026.6667C45.1667%2026.2985%2045.4651%2026%2045.8333%2026C46.2015%2026%2046.5%2026.2985%2046.5%2026.6667ZM19.8333%2026.6667C19.8333%2027.0349%2019.5349%2027.3334%2019.1667%2027.3334C18.7985%2027.3334%2018.5%2027.0349%2018.5%2026.6667C18.5%2026.2985%2018.7985%2026%2019.1667%2026C19.5349%2026%2019.8333%2026.2985%2019.8333%2026.6667ZM42.1%2056H52.2333C53.7268%2056%2054.4735%2056%2055.044%2055.7094C55.5457%2055.4537%2055.9537%2055.0458%2056.2093%2054.544C56.5%2053.9736%2056.5%2053.2268%2056.5%2051.7334V49.6C56.5%2048.1066%2056.5%2047.3598%2056.2093%2046.7894C55.9537%2046.2876%2055.5457%2045.8797%2055.044%2045.624C54.4735%2045.3334%2053.7268%2045.3334%2052.2333%2045.3334H42.1C40.6065%2045.3334%2039.8598%2045.3334%2039.2894%2045.624C38.7876%2045.8797%2038.3796%2046.2876%2038.124%2046.7894C37.8333%2047.3598%2037.8333%2048.1066%2037.8333%2049.6V51.7334C37.8333%2053.2268%2037.8333%2053.9736%2038.124%2054.544C38.3796%2055.0458%2038.7876%2055.4537%2039.2894%2055.7094C39.8598%2056%2040.6065%2056%2042.1%2056Z'%20stroke='%23FC4C02'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",$n=["src"],Tn=["src"],jn=F({__name:"Signature",props:{subScreens:{},data:{},screen:{}},emits:["alert","next","to"],setup(e,{emit:u}){const t=e,n=u,r=_(!0);return re(()=>{var a;if(!((a=t.data.patient)!=null&&a.has_face_recognition))return n("alert",{title:"Como gostaria de realizar o seu check-in?",text:"",action:{type:"choise",acceptLabel:"Agilizar com token",rejectLabel:"Ir para recepção",callback(c){if(c)return n("to","SendToken");n("to","Queues")}}});r.value=!1}),(a,c)=>(g(),V("div",null,[r.value?A("",!0):(g(),D(E,{key:0,justify:"center"},{default:d(()=>[o(O,{cols:"12",sm:"auto"},{default:d(()=>[a.data.patient.has_face_recognition?z((g(),D(K,{key:0,onClick:c[0]||(c[0]=s=>a.$emit("to","FaceRecognition")),height:"200",style:{cursor:"pointer","white-space":"normal"},width:"280",class:"d-flex align-start justify-center flex-column px-4 py-10",color:"transparent",border:"sm",rounded:"lg"},{default:d(()=>[v("img",{src:Y(Sn),height:"64"},null,8,$n),L("Assinatura PDF Biometria facial ")]),_:1})),[[Z]]):A("",!0)]),_:1}),o(O,{cols:"12",sm:"auto"},{default:d(()=>[z((g(),D(K,{onClick:c[1]||(c[1]=s=>a.$emit("to","SendToken")),height:"200",style:{cursor:"pointer","white-space":"normal"},width:"280",class:"d-flex align-start justify-center flex-column px-4 py-10",color:"transparent",border:"sm",rounded:"lg"},{default:d(()=>[v("img",{src:Y(Vn),height:"64"},null,8,Tn),L(" Token via SMS ou App ")]),_:1})),[[Z]])]),_:1}),o(O,{cols:"12",sm:"auto"},{default:d(()=>[z((g(),D(K,{onClick:c[2]||(c[2]=s=>a.$emit("to","PDFSignature")),height:"200",style:{cursor:"pointer","white-space":"normal"},width:"280",class:"d-flex align-start justify-center flex-column px-4 py-10",color:"transparent",border:"sm",rounded:"lg"},{default:d(()=>[o(Be,{icon:"mdi-file-pdf-box",size:"64",color:"primary"}),L(" Assinatura do PDF ")]),_:1})),[[Z]])]),_:1}),o(O,{cols:"12",md:"10"},{default:d(()=>[o(I,{block:"",rounded:"",variant:"outlined",class:"mt-6",onClick:c[3]||(c[3]=s=>a.$emit("to","Queues"))},{default:d(()=>[L(" Pular checkin e ir para a recepção ")]),_:1})]),_:1})]),_:1}))]))}}),Ln=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"})),Pn={class:"d-flex bg-white align-center justify-center fill-height w-100"},In={class:"text-center mb-6",style:{"font-size":"1.4em"}},Bn={class:"font-weight-bold"},Mn=["innerHTML"],Dn={key:0,class:"d-flex justify-center"},Fn={key:1,class:"d-flex justify-center"},On=F({__name:"ConfirmAlert",props:{modelValue:{type:Boolean},title:{},action:{},text:{}},emits:["update:modelValue"],setup(e,{emit:u}){const t=e,n=u,r=C({get(){return t.modelValue},set(s){n("update:modelValue",s)}});function a(s=!0){var l;if(r.value=!1,t.action.type==="choise"){t.action.callback(s);return}(l=t.action)!=null&&l.callback&&t.action.callback()}const c=C(()=>t.text instanceof Error?t.text.message:t.text);return(s,l)=>(g(),D(Ie,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=i=>r.value=i),persistent:"",fullscreen:"",class:"totem"},{default:d(()=>[o(Ut,{class:"bg-white"},{default:d(()=>[v("div",Pn,[v("div",null,[v("p",In,[v("span",Bn,P(s.title),1),v("div",{innerHTML:c.value},null,8,Mn)]),s.action.type=="choise"?(g(),V("div",Dn,[v("div",null,[o(I,{variant:"outlined",color:"primary",class:"mr-2","min-width":"350",rounded:"",onClick:l[0]||(l[0]=i=>a(!1))},{default:d(()=>[L(P(s.action.rejectLabel),1)]),_:1}),o(I,{variant:"flat","min-width":"350",rounded:"",color:"primary",onClick:l[1]||(l[1]=i=>a())},{default:d(()=>[L(P(s.action.acceptLabel),1)]),_:1})])])):(g(),V("div",Fn,[o(I,{ariant:"flat",rounded:"",width:"350",color:"primary",onClick:l[2]||(l[2]=i=>a())},{default:d(()=>[L(P(s.action.label),1)]),_:1})]))])])]),_:1})]),_:1},8,["modelValue"]))}}),Rn={class:"d-flex justify-space-between mb-4"},An=v("span",{class:"font-weight-bold"},"Voltar",-1),En=v("span",{class:"font-weight-bold"},"Cancelar",-1),zn={style:{width:"80%"},class:"mx-auto flex-grow-1 d-flex flex-column"},Nn={class:"text-center"},qn=F({__name:"Default",props:{hideBack:{type:Boolean,default:!1},hideCancel:{type:Boolean,default:!1}},emits:["cancel","back"],setup(e,{expose:u,emit:t}){const n=t;Mt();const r=_({}),a=C(()=>Ot);_(!1);const c=C(()=>{const m=new Date,h=m.toLocaleDateString("pt-BR",{day:"2-digit"}),T=m.toLocaleDateString("pt-BR",{month:"long"}),$=m.toLocaleDateString("pt-BR",{year:"numeric"});return`${h} de ${Qt(T)} de ${$}`}),s=_("");let l=0;function i(){s.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});const m=new Date,h=6e4-(m.getSeconds()*1e3+m.getMilliseconds());setTimeout(()=>{s.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),l=setInterval(()=>{s.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})},6e4)},h)}function f(m){r.value=m}return u({setStyles:f}),N(()=>{i()}),je(()=>{clearInterval(l)}),(m,h)=>(g(),V("div",{class:"d-flex flex-column flex-grow-1 totem",style:Ft(r.value),fluid:""},[v("div",Rn,[m.hideBack?A("",!0):(g(),D(I,{key:0,variant:"text",color:"primary",onClick:h[0]||(h[0]=T=>n("back"))},{default:d(()=>[o(Be,{class:"mr-2",size:"30"},{default:d(()=>[L("mdi-chevron-left")]),_:1}),An]),_:1})),o(ge),v("div",null,[o(J,{src:a.value,width:"194"},null,8,["src"])]),o(ge),m.hideCancel?A("",!0):(g(),D(I,{key:1,variant:"text",color:"primary",onClick:h[1]||(h[1]=T=>n("cancel"))},{default:d(()=>[En]),_:1}))]),v("div",zn,[Le(m.$slots,"default")]),v("div",Nn,[o(Dt,{class:"my-4"}),L(" "+P(c.value)+" - "+P(s.value),1)])],4))}}),co=F({__name:"NewFlow",setup(e){_("");const u=_(!1),t=_(!1),n=_(),r=_({title:"",text:"",action:{type:"confirm",label:"Ok"}}),a=_({text:"",callback:p=>{}}),c=_([]),s=_(""),l=_({internal:{}}),i=Rt(),f=C(()=>i.params.id),m=_(structuredClone(Gt.totem)),h=se({}),T=_({hideBack:!0,hideCancel:!0}),$=_(0),j=_(""),M=_(null),w=_(60*5),S=C(()=>{var p;return(p=m.value.screens[$.value])==null?void 0:p.data}),x=C(()=>{if(j.value!=="")return ve(S.value,j.value)}),k=C(()=>(n.value&&n.value.setStyles({}),j.value===""?S.value:x.value)),b=C(()=>k.value?(h.value[k.value.component]||me("component-not-found"),h.value[k.value.component]):h.value.Loading);W($,p=>{if(p==0)return T.value={hideBack:!0,hideCancel:!0};T.value={hideBack:!1,hideCancel:!1}}),W(k,(p,y)=>{(p==null?void 0:p.component)===s.value||!(y!=null&&y.component)&&s.value===""||$.value!==0&&c.value.push(y.component)});const R=Object.assign({"/src/modules/patient/views/totem/BirthDate.vue":We,"/src/modules/patient/views/totem/Identifier.vue":Je,"/src/modules/patient/views/totem/Init.vue":Xe,"/src/modules/patient/views/totem/Loading.vue":Ze,"/src/modules/patient/views/totem/PatientInfo/ContactInfo.vue":la,"/src/modules/patient/views/totem/PatientInfo/PatientInfo.vue":ua,"/src/modules/patient/views/totem/Queues/AttendanceType.vue":ga,"/src/modules/patient/views/totem/Queues/PasswordSuccess.vue":Ta,"/src/modules/patient/views/totem/Queues/Queues.vue":Ba,"/src/modules/patient/views/totem/Schedule.vue":Ke,"/src/modules/patient/views/totem/Signature/CheckinSuccess.vue":Ra,"/src/modules/patient/views/totem/Signature/FaceRecognition.vue":Xa,"/src/modules/patient/views/totem/Signature/PDFSignature.vue":_n,"/src/modules/patient/views/totem/Signature/SendToken.vue":Cn,"/src/modules/patient/views/totem/Signature/Signature.vue":Ln,"/src/modules/patient/views/totem/Welcome.vue":Ye});qe(),re(()=>{Wt(f.value).then(p=>{m.value=p.data})}),N(()=>{window.addEventListener("click",ee),window.addEventListener("keydown",ee)}),At(()=>{window.removeEventListener("click",ee),window.removeEventListener("keydown",ee),M.value!==null&&clearTimeout(M.value)});function H(p){console.log("open loading"),console.log(p),t.value=!0,a.value=p,p.callback(t)}function Q(){$.value=0,j.value="",l.value={internal:{}},s.value="",c.value=[],yn()}function Fe(){if(c.value.length===0)return;s.value=c.value.pop();const p=Ne(s.value);p&&($.value=p.index,j.value=p.subScreenComponent)}function Oe(){const p=fe(S.value,x.value);if(!p){Re();return}j.value=p.component}function Re(){if(j.value="",$.value==m.value.screens.length-1){$.value=0;return}$.value++}function Ae(p){const y=ve(S.value,p);if(y){j.value=y.component;return}Ee(p)}function Ee(p){const y=ze(p);if(!y)return me("flow-not-found");j.value="",$.value=m.value.screens.indexOf(y)}function de(p){r.value=p,u.value=!0}function me(p){de({title:"Erro de sistema",text:`Favor entrar em contato com a equipe de TI. (erro: ${p})`,action:{type:"confirm",label:"Ok"}})}const ee=()=>{M.value!==null&&clearTimeout(M.value),M.value=window.setTimeout(()=>{$.value!==0&&Q()},w.value*1e3)};function ve(p,y){return p.subscreens.find(B=>B.component===y)}function ze(p){return m.value.screens.find(y=>y.data.component===p)}function Ne(p){let y=null;for(let B=0;B<m.value.screens.length;B++){const q=m.value.screens[B];if(q.data.component===p){y={index:B,subScreenComponent:""};break}for(let X=0;X<q.data.subscreens.length;X++){const pe=q.data.subscreens[X];if(pe.component===p){y={index:B,subScreenComponent:pe.component};break}}if(y)break}return y}function fe(p,y){if(p.subscreens.length===0)return;if(!y)return p.subscreens[0];const B=p.subscreens.findIndex(X=>X.component===y.component),q=p.subscreens[B+1];if(q!==void 0)return q.order===y.order?fe(p,q):p.subscreens[B+1]}function qe(){for(const p in R){const y=Ue(p);y!==null&&(h.value[y]=R[p].default)}}function Ue(p){const y=p.match(/\/([^\/]+)\.vue$/);return y?y[1]:null}return(p,y)=>(g(),V(U,null,[A("",!0),o(qn,G({ref_key:"layoutRef",ref:n,onBack:Fe,onCancel:Q},T.value),{default:d(()=>[(g(),D(Et(b.value),{onAlert:de,onNext:Oe,onTo:y[0]||(y[0]=B=>Ae(B)),onCancel:Q,onLoading:H,data:l.value,"onUpdate:data":y[1]||(y[1]=B=>l.value=B),layoutRef:n.value,totem:m.value,screen:k.value},null,40,["data","layoutRef","totem","screen"])),o(On,G({modelValue:u.value,"onUpdate:modelValue":y[2]||(y[2]=B=>u.value=B)},r.value),null,16,["modelValue"]),o(Ht,G({modelValue:t.value,"onUpdate:modelValue":y[3]||(y[3]=B=>t.value=B)},a.value),null,16,["modelValue"])]),_:1},16)],64))}});export{co as default};
